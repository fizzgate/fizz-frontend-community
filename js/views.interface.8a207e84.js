/*!
 * Fizz-Admin v3.2.0-beta1
 * (c) 2020-2024 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views.interface"],{"036d":function(e,t,a){"use strict";a("2821")},"0386":function(e,t,a){"use strict";a.r(t);a("386d");var n=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{title:"添加路由",direction:"rtl","modal-append-to-body":!1,"append-to-body":!0,size:"900px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("el-form",{ref:"form",attrs:{model:e.search,"label-width":"90px",size:"small",inline:""}},[t("el-form-item",{attrs:{label:"网关分组"}},[t("el-select",{attrs:{placeholder:"网关分组",filterable:"",clearable:""},model:{value:e.search.gatewayGroup,callback:function(t){e.$set(e.search,"gatewayGroup",t)},expression:"search.gatewayGroup"}},e._l(e.groupOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label+"("+e.value+")",value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"前端服务名"}},[t("el-input",{attrs:{placeholder:"前端服务名"},model:{value:e.search.service,callback:function(t){e.$set(e.search,"service",t)},expression:"search.service"}})],1),t("el-form-item",{attrs:{label:"前端API路径"}},[t("el-input",{attrs:{placeholder:"前端API路径"},model:{value:e.search.path,callback:function(t){e.$set(e.search,"path",t)},expression:"search.path"}})],1),t("el-form-item",{attrs:{label:"请求方法"}},[t("el-select",{attrs:{placeholder:"请求方法",multiple:"",clearable:"","collapse-tags":""},model:{value:e.search.method,callback:function(t){e.$set(e.search,"method",t)},expression:"search.method"}},e._l(e.apiMethod,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"访问"}},[t("el-select",{attrs:{placeholder:"访问",clearable:""},model:{value:e.search.access,callback:function(t){e.$set(e.search,"access",t)},expression:"search.access"}},e._l(e.accessType,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"search-btns"},[t("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:e.doSearch}},[e._v("搜 索")]),t("el-button",{attrs:{icon:"el-icon-delete",size:"small"},on:{click:e.clearSearch}},[e._v("清 空")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",size:"small",border:"",data:e.data},on:{"selection-change":e.handleSelectionChange,"current-change":e.selectRow}},[e.multiple?t("el-table-column",{attrs:{type:"selection",width:"55"}}):t("el-table-column",{attrs:{label:"",width:"55"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:a.row},model:{value:e.currentRow,callback:function(t){e.currentRow=t},expression:"currentRow"}},[t("i")])]}}])}),t("el-table-column",{attrs:{type:"index",width:"50",label:"#"}}),t("el-table-column",{attrs:{property:"gatewayGroup",label:"网关分组",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n         "+e._s(e.renderGatewayGroup(a.gatewayGroup))+"\n        ")]}}])}),t("el-table-column",{attrs:{property:"proxyMode",label:"路由类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n         "+e._s(e._f("proxyModeFilter")(a.proxyMode))+"\n        ")]}}])}),t("el-table-column",{attrs:{property:"isDedicatedLine",label:"是否专线路由",width:"94"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n         "+e._s(1===a.isDedicatedLine?"是":"否")+"\n        ")]}}])}),t("el-table-column",{attrs:{property:"service",label:"前端服务名"}}),t("el-table-column",{attrs:{property:"path",label:"前端API路径"}}),t("el-table-column",{attrs:{property:"method",label:"请求方法",width:"80"}}),t("el-table-column",{attrs:{property:"access",label:"访问",width:"70"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-tag",{attrs:{type:"a"===n.access?"success":"danger",size:"small"}},[e._v(e._s(e._f("accessFilter")(n.access)))])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,20,30,40,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("footer",{staticClass:"drawer-footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleDrawerConfirm()}}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("20d6"),a("bd86")),o=(a("c5f6"),a("5880")),s=a("27fc"),c=a("3bfd"),l=a("c54a");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={props:{visible:{type:Boolean,default:!1},app:{type:String,default:""},multiple:{type:Boolean,default:!1},rowSelections:{type:Array},isDedicatedLine:{type:Number,default:1}},data:function(){return{search:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},data:[],accessType:s["a"],currentRow:null,multipleSelection:[]}},computed:d(d({},Object(o["mapGetters"])(["apiMethod","groupOptions"])),{},{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}}}),filters:{proxyModeFilter:function(e){var t=s["e"].filter((function(t){return t.value===e}));return t.length>0?t[0].label:""},accessFilter:function(e){var t=s["a"].filter((function(t){return t.value===e}));return t.length>0?t[0].label:""}},methods:d(d({initRowSelections:function(){var e=this;this.data.map((function(t){e.rowSelections&&e.rowSelections.length>0&&e.rowSelections.map((function(a){t.id==a.id&&e.$nextTick((function(){e.$refs.singleTable.toggleRowSelection(t,!0)}))}))}))}},Object(o["mapActions"])(["getGroupOptions","getPluginOptions"])),{},{onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,a.method&&Object(l["b"])(a.method)&&(a.method_in=a.method.join(",")||"",delete a.method),Object(c["k"])(e.currentPage,e.pageSize,Object.assign(a,this.query,{noAppCondition:this.app,isDedicatedLine:this.isDedicatedLine})).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.page.currentPage>a.pages&&(t.page.currentPage=a.pages),t.initRowSelections(),t.loading=!1}))},renderGatewayGroup:function(e){var t="";if(this.groupOptions&&this.groupOptions.length>0){var a=this.groupOptions.filter((function(t){return t.value===e}));t=a.length>0?a[0].label+"("+a[0].value+")":""}return t},selectRow:function(e){this.multiple||(this.currentRow=e)},handleSelectionChange:function(e){var t=this;if(this.multiple)if(this.rowSelections&&this.rowSelections.length>0){var a=[],n=[];this.rowSelections.map((function(e){var i=t.data.findIndex((function(t){return t.id==e.id}));-1!=i?a.push(e):n.push(e)}));var i=[],r=[];this.multipleSelection.map((function(e){var a=t.data.findIndex((function(t){return t.id==e.id}));-1!=a?i.push(e):r.push(e)})),r.length>0?this.multipleSelection=r.concat(e):this.multipleSelection=n.concat(e)}else this.multipleSelection=e},handleSizeChange:function(e){this.page.pageSize=e,this.page.currentPage=1,this.onLoad(this.page,this.search)},handleCurrentChange:function(e){this.page.currentPage=e,this.onLoad(this.page,this.search)},handleDrawerConfirm:function(){!this.multiple&&!this.currentRow||this.multiple&&this.multipleSelection.length,this.$emit("emitData",this.multiple?this.multipleSelection:this.currentRow),this.dialogVisible=!1},doSearch:function(){this.page.currentPage=1,this.page.pageSize=20,this.onLoad(this.page,this.search)},clearSearch:function(){this.search={},this.page.currentPage=1,this.page.pageSize=20,this.onLoad(this.page,this.search)}}),mounted:function(){this.onLoad(this.page)},created:function(){this.getPluginOptions(),this.getGroupOptions()}},f=p,h=(a("68e7"),a("5b32"),a("2877")),b=Object(h["a"])(f,n,i,!1,null,"6f7dc9a8",null);t["default"]=b.exports},"042a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"document-inter-main"},[t("div",{staticClass:"left-con tree-document"},[t("el-tree",{ref:"tree",staticClass:"tree",attrs:{data:e.treeData,props:e.defaultProps,"highlight-current":"","node-key":"key","default-expanded-keys":e.defaultExpandedKeys,"current-node-key":e.currentNodeKey},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node;a.data;return t("span",{staticClass:"span-ellipsis"},[t("span",{attrs:{title:n.label}},[e._v(e._s(n.label))])])}}])})],1),t("div",{staticClass:"right-con"},[t("interInfo",{attrs:{docJson:e.docJson,curJson:e.curJson,disabled:e.disabled,otherInfo:e.otherInfo,showOtherInfo:!0},on:{changeOtherInfo:e.changeOtherInfo}})],1)])])},i=[],r=(a("8e6e"),a("456d"),a("bd86")),o=(a("6762"),a("2fdb"),a("768b")),s=(a("ffc1"),a("8615"),a("ac6a"),a("5df3"),a("f400"),a("7f7f"),a("20d6"),a("862dd")),c=a("307b");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={isShow:1,isAuth:1,isSupportDebug:1,remark:""},p={name:"interface-info",components:{interInfo:s["default"]},props:{docJson:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},otherInfo:{type:Object,default:function(){return{}}}},data:function(){return{currentNodeKey:"",defaultExpandedKeys:[],defaultProps:{children:"children",label:"name"},treeData:[],curJson:{},formMap:{}}},computed:{tags:function(){return this.docJson.tags||{}},paths:function(){return this.docJson.paths||{}}},methods:{handleNodeClick:function(e){var t=-1;if(e.tags&&e.tags.length>0){var a=e.tags[0];t=this.tags.findIndex((function(e){return e.name===a}))}-1!==t?(this.curJson=e,this.currentNodeKey=e.key):this.$refs.tree.setCurrentKey(this.currentNodeKey)},emitData:function(){this.$emit("changeOtherInfo",this.formMap)},changeOtherInfo:function(e){this.formMap=e},renderTreeData:function(){var e=this,t=new Map,a=Object(c["a"])(this.tags);this.treeData=a||[],Object.values(a).forEach((function(a,n){e.treeData[n].key=a.name,Object.entries(e.paths).forEach((function(i){var r=Object(o["a"])(i,2),s=r[0],c=r[1];Object.entries(c).forEach((function(i){var r=Object(o["a"])(i,2),c=r[0],l=r[1];t.has("".concat(a.name,"_").concat(l.summary))||(t.set("".concat(a.name,"_").concat(l.summary)),l.tags.includes(a.name)&&(e.treeData[n].children||(e.treeData[n].children=[]),e.treeData[n].children.push(u(u({},l),{},{name:l.summary,path:s,method:c,key:"".concat(a.name,"_").concat(l.summary)}))))}))}))})),this.treeData.length>0&&(this.treeData[0].children.length>0?(this.defaultExpandedKeys=[this.treeData[0].children[0].key],this.currentNodeKey=this.treeData[0].children[0].key,this.curJson=this.treeData[0].children[0]):(this.defaultExpandedKeys=[this.treeData[0].key],this.currentNodeKey=this.treeData[0].key,this.curJson=this.treeData[0]),this.$nextTick((function(){e.$refs.tree.setCurrentKey(e.currentNodeKey)})))},renderTree:function(){var e=this;this.$nextTick((function(){e.curJson={},e.treeData=[],e.renderTreeData()}))}},mounted:function(){this.$emit("getDefaultOhterInfo",d)}},f=p,h=(a("acb5"),a("93ff"),a("2877")),b=Object(h["a"])(f,n,i,!1,null,"4a75416d",null);t["default"]=b.exports},"0457":function(e,t,a){"use strict";a("b539")},"04a6":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"auth-detail"},[t("el-card",{staticClass:"main"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n          "),t("b",[e._v(e._s(e.title))])],1),t("h3",[t("i",{staticClass:"el-icon-edit-outline avue-group__icon"}),e._v("基础信息")]),t("el-form",{ref:"form",attrs:{disabled:e.disabled,model:e.form,rules:e.rules,size:"small","label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入 名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("h3",[t("i",{staticClass:"el-icon-edit-outline avue-group__icon"}),e._v("文档列表")]),e.showApi?t("api",{ref:"api",attrs:{data:e.openDocs,disabled:e.disabled},on:{"update:data":function(t){e.openDocs=t}}}):e._e(),e.disabled?e._e():t("footer",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check",loading:e.loading},on:{click:e.submitHandle}},[e._v(" 确 定 ")]),t("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:e.cancel}},[e._v(" 取 消 ")])],1)],1)],1)},i=[],r=(a("6762"),a("2fdb"),a("a8db")),o=(a("96cf"),a("3b8d")),s=(a("ac6a"),a("5df3"),a("2620")),c=a("f38d"),l=["openDocs"],u={components:{api:c["default"]},data:function(){return{form:{},rules:{name:[{required:!0,message:"必填",trigger:"blur"}]},loading:!1,disabled:!1,activeTab:"api",openDocs:[],showApi:!1}},computed:{title:function(){var e="";switch(this.type){case"add":e="新增文档集";break;case"edit":e="修改文档集";break;case"view":e="文档集详情";break}return e},type:function(){return this.$route.query.type},id:function(){return this.$route.query.id}},beforeRouteUpdate:function(e,t,a){e.fullPath!==t.fullPath&&(a(),this.init())},methods:{submitHandle:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=[e.$refs.api.validate()];Promise.all(a).then((function(){e.saveHandle()})).catch((function(t){e.$message.warning(t)}))}}))},handleParam:function(){this.$refs.api.emitData();var e={openDocs:this.openDocs};return Object.assign(this.form,e)},saveHandle:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t="add"===this.type?s["a"]:s["e"],a=this.handleParam(),e.next=5,t(a).then((function(e){200===e.data.code?(n.$message({type:"success",message:"保存成功！"}),"add"===n.type?n.cancel():n.getDetail()):n.$message({type:"error",message:e.data.msg||"保存失败！"})}),(function(){n.loading=!1}));case 5:this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showApi=!1,e.prev=1,e.next=4,Object(s["b"])(this.id).then((function(e){if(200===e.data.code){var a=e.data.data,n=a.openDocs,i=Object(r["a"])(a,l);t.form=i,t.openDocs=n}else t.$message({type:"error",message:e.data.msg||"获取详情 失败！"})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.log(e.t0);case 9:this.showApi=!0;case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/interface/collection"})},init:function(){["edit","view"].includes(this.type)?this.getDetail():this.showApi=!0,"view"===this.type&&(this.disabled=!0)}},mounted:function(){this.init()}},d=u,p=(a("74ff"),a("2877")),f=Object(p["a"])(d,n,i,!1,null,"53b1e608",null);t["default"]=f.exports},"0763":function(e,t,a){"use strict";a("abd3")},"0a6a":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return f}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/save"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/update"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/detail/").concat(e),method:"get"})},f=function(){return Object(i["a"])({url:"".concat(r["a"],"/registry-config/registry-name-list"),method:"get"})}},"109e":function(e,t,a){},1259:function(e,t,a){"use strict";a("2cba")},1330:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"选择前端服务名","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"700px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"select-service-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"small",border:"","max-height":"500"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"前端服务名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.label))]}}])})],1)],1),e.disabled?e._e():t("footer",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submitHandle}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),o=a("75fc"),s=a("bd86"),c=a("5880");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={label:"ALL",value:"ALL"},p={name:"select-service",props:{visible:{type:Boolean,default:!1}},computed:u(u({},Object(c["mapGetters"])(["frontendServiceOptions"])),{},{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDialog")}}}),data:function(){return{multipleSelection:[],tableData:[],loading:!0}},watch:{frontendServiceOptions:{deep:!0,handler:function(){this.tableData=[d].concat(Object(o["a"])(this.frontendServiceOptions))}}},methods:u(u({},Object(c["mapActions"])(["getFrontendServiceOptions"])),{},{handleSelectionChange:function(e){this.multipleSelection=e},submitHandle:function(){if(0!==this.multipleSelection.length){var e=this.multipleSelection.some((function(e){return"ALL"===e.value}));this.$emit("emitData",e?[d]:this.multipleSelection),this.dialogVisible=!1}else this.$message.warning("请选择数据!")}}),mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getFrontendServiceOptions();case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},f=p,h=(a("c749"),a("2877")),b=Object(h["a"])(f,n,i,!1,null,"550b817c",null);t["default"]=b.exports},"18df":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),e.visible?t("addressDetail",{attrs:{type:e.type,id:e.form.id,visible:e.visible},on:{doSearch:e.searchReset,changeDrawer:function(t){e.visible=!1}}}):e._e()],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("5880"),s=a("7f9e"),c=a("16cd"),l=a("a2ea");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"address",components:{addressDetail:s["default"]},data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:800,border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,column:[{label:"环境",prop:"env",search:!0,overHidden:!0},{label:"请求地址",prop:"reqUrl",search:!1,overHidden:!0}]},data:[],type:"",visible:!1}},computed:d(d({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.interface_address_add,!1),editBtn:this.vaildData(this.permission.interface_address_edit,!1),viewBtn:this.vaildData(this.permission.interface_address_view,!1),delBtn:this.vaildData(this.permission.interface_address_remove,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{handleSubmitData:function(e){return e=Object(c["c"])(e),e},rowDel:function(e){var t=this;this.$confirm("你确定要删除此环境信息吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["d"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){this.type=t,this.visible=!0},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(l["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))}}},f=p,h=a("2877"),b=Object(h["a"])(f,n,i,!1,null,"2c295efa",null);t["default"]=b.exports},"1a70":function(e,t,a){},"1a9b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"选择用户","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"700px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"small",border:"","max-height":"400"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"用户名",prop:"name"}})],1)],1),e.disabled?e._e():t("footer",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submitHandle}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),o=a("bd86"),s=a("5880"),c=a("4c02");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"select-users",props:{visible:{type:Boolean,default:!1}},computed:u(u({},Object(s["mapGetters"])(["userInfo"])),{},{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDialog")}},isAdmin:function(){return this.userInfo.is_admin||!1}}),data:function(){return{multipleSelection:[],tableData:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},submitHandle:function(){0!==this.multipleSelection.length?(this.$emit("emitData",this.multipleSelection),this.dialogVisible=!1):this.$message.warning("请选择数据!")},getUseList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isAdmin){e.next=3;break}return this.tableData.push({id:this.userInfo.user_id,name:this.userInfo.nick_name||this.userInfo.user_name}),e.abrupt("return");case 3:return this.loading=!0,e.next=6,Object(c["d"])().then((function(e){200==e.data.code&&(t.tableData=e.data.data)}));case 6:this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.getUseList()}},p=d,f=(a("ad53"),a("2877")),h=Object(f["a"])(p,n,i,!1,null,"34822b38",null);t["default"]=h.exports},"1bcd":function(e,t,a){},"1d77":function(e,t,a){"use strict";a("1bcd")},"1e18":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r}));var n=[{label:"接口专线",value:1},{label:"网站专线",value:2}],i=[{label:"是",value:1},{label:"否",value:0}],r=[{label:"未配对",value:1},{label:"已配对",value:2},{label:"需重新配对",value:3}]},"1e87":function(e,t,a){},"1eab":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/auth-info/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/auth-info/save"),method:"post",data:e})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/auth-info/update"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/auth-info/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/auth-info/detail/").concat(e),method:"get"})}},2075:function(e,t,a){},"21dd":function(e,t,a){"use strict";a("3c46")},2620:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/open-doc-set/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc-set/detail/").concat(e),method:"get"})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc-set/save"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc-set/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc-set/update"),method:"post",data:e})}},2821:function(e,t,a){},"2c59":function(e,t,a){},"2cba":function(e,t,a){},"2de0":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("el-card",{staticClass:"box-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n      "),t("b",[e._v(e._s(e.title))])],1),t("el-form",{ref:"form",attrs:{disabled:e.disabled,model:e.form,rules:e.rules,size:"small","label-width":"100px"}},[t("el-form-item",{attrs:{label:"主题",prop:"subject"}},[t("el-input",{attrs:{placeholder:"请输入 主题"},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"desc"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 描述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),t("el-form-item",{attrs:{label:"前端服务名",prop:"services"}},[t("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addService}},[e._v("添加服务")]),t("el-table",{staticStyle:{width:"500px"},attrs:{data:e.serviceList,border:"",size:"small","max-height":"300"}},[t("el-table-column",{attrs:{prop:"value",label:"服务名"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.delService(n)}}},[e._v("删除")])]}}])})],1)],1),t("el-form-item",{attrs:{label:"订阅告警",prop:"type"}},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),t("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value,name:"type"}},[e._v(e._s(a.label))])})),1)],1),t("el-form-item",{attrs:{label:"用户",prop:"userIds"}},[t("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("添加用户")]),t("div",{staticClass:"key-tips"},[e._v("告警邮件发送到个人资料里填写的邮箱")]),t("el-table",{staticStyle:{width:"500px"},attrs:{data:e.userList,border:"",size:"small","max-height":"300"}},[t("el-table-column",{attrs:{prop:"name",label:"用户名"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index,i=a.row;return[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",disabled:e.disabled||i.id!==e.userInfo.user_id&&!e.isAdmin},on:{click:function(t){return e.delUser(n)}}},[e._v("删除")])]}}])})],1)],1)],1),e.disabled?e._e():t("footer",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check",loading:e.loading},on:{click:e.submitHandle}},[e._v("\n        确 定\n      ")]),t("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")])],1),e.serviceVisible?t("selectSreviceDialog",{attrs:{visible:e.serviceVisible},on:{changeDialog:function(t){e.serviceVisible=!1},emitData:e.selectService}}):e._e(),e.usersVisible?t("selectUsersDialog",{attrs:{visible:e.usersVisible},on:{changeDialog:function(t){e.usersVisible=!1},emitData:e.selectUsrs}}):e._e()],1)],1)},i=[],r=(a("8e6e"),a("456d"),a("768b")),o=(a("ffc1"),a("ac6a"),a("bd86")),s=a("5880"),c=a("1330"),l=a("1a9b"),u=a("4c02");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={components:{selectSreviceDialog:c["default"],selectUsersDialog:l["default"]},data:function(){return{loading:!1,form:{type:[],services:[],userIds:[]},rules:{subject:[{required:!0,message:"请输入 主题",trigger:"blur"}],services:[{required:!0,message:"请选择 前端服务名",trigger:"change"}],type:[{required:!0,message:"请选择 订阅告警",trigger:"change"}]},typeList:[{label:"接口错误",value:"1"},{label:"接口超时",value:"2"},{label:"限流",value:"3"},{label:"熔断",value:"4"}],checkAll:!1,isIndeterminate:!0,serviceList:[],userList:[],serviceVisible:!1,usersVisible:!1}},computed:p(p({},Object(s["mapGetters"])(["userInfo"])),{},{title:function(){var e="";switch(this.type){case"add":e="新增告警订阅";break;case"edit":e="修改告警订阅";break;case"view":e="告警订阅详情";break}return e},type:function(){return this.$route.query.type},id:function(){return this.$route.query.id},isAdmin:function(){return this.userInfo.is_admin||!1}}),methods:{submitHandle:function(){var e=this;this.form.services=[],this.form.userIds=[],this.serviceList.forEach((function(t){e.form.services.push(t.value)})),this.userList.forEach((function(t){e.form.userIds.push(t.id)})),this.$refs.form.validate((function(t){if(t){var a="add"===e.type?u["a"]:u["f"];e.loading=!0,a(e.handleData()).then((function(t){200==t.data.code&&(e.$message.success("操作成功！"),e.cancel()),e.loading=!1})).catch((function(){e.loading=!1}))}else e.$message.warning("请完善表单信息！")}))},handleData:function(){var e=[];return e=this.form.type.length===this.typeList.length?["0"]:this.form.type,{id:this.form.id,desc:this.form.desc,services:this.form.services,subject:this.form.subject,types:e,userIds:this.form.userIds}},cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/alarm/subscription"})},handleCheckAllChange:function(e){var t=[];this.typeList.forEach((function(e){t.push(e.value)})),this.form.type=e?t:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.typeList.length,this.isIndeterminate=t>0&&t<this.typeList.length},addUser:function(){this.usersVisible=!0},addService:function(){this.serviceVisible=!0},delService:function(e){var t=this;this.$confirm("确定删除该服务名?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.serviceList.splice(e,1)}))},delUser:function(e){var t=this;this.$confirm("确定删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.userList.splice(e,1)}))},selectService:function(e){var t=this,a={};this.serviceList.forEach((function(e){a[e.value]=!0})),e.forEach((function(e){a[e.value]||t.serviceList.push(e)}))},selectUsrs:function(e){var t=this,a={};this.userList.forEach((function(e){a[e.id]=!0})),e.forEach((function(e){a[e.id]||t.userList.push(e)}))},getDetail:function(){var e=this;Object(u["b"])(this.id).then((function(t){200==t.data.code&&(e.form=Object.assign({},e.form,t.data.data),Object.entries(e.form.userId2NameMap).forEach((function(t){var a=Object(r["a"])(t,2),n=a[0],i=a[1];e.userList.push({id:n,name:i})})),e.form.services.forEach((function(t){e.serviceList.push({label:t,value:t})})),e.typeList.forEach((function(t){(e.form.types.indexOf("0")>-1||e.form.types.indexOf(t.value)>-1)&&e.form.type.push(t.value)})),e.checkAll=e.form.type.length===e.typeList.length,e.isIndeterminate=e.form.type.length>0&&e.form.type.length<e.typeList.length)}))}},mounted:function(){"view"===this.type&&(this.disabled=!0),"add"!==this.type&&this.getDetail()}},h=f,b=(a("aca0"),a("2877")),m=Object(b["a"])(h,n,i,!1,null,"72c8e8a7",null);t["default"]=m.exports},"2f32":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return h}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/save"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/update"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/detail/").concat(e),method:"get"})},f=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/pair-code/detail/").concat(e),method:"get"})},h=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line/pair-code/regenerate"),method:"post",data:e})}},3077:function(e,t,a){"use strict";a("b22c")},"307b":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("7618"),i=function(e){if("object"===Object(n["a"])(e))return JSON.parse(JSON.stringify(e))}},"30b1":function(e,t,a){},"32a6":function(e,t,a){var n=a("241e"),i=a("c3a1");a("ce7e")("keys",(function(){return function(e){return i(n(e))}}))},3388:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("el-tabs",{staticClass:"data-params"},e._l(e.config.tabs,(function(a){return t("el-tab-pane",{key:a.name,attrs:{label:a.label}},[e.getParamsKeys(e.tableData[a.name])>0?t("span",{attrs:{slot:"label"},slot:"label"},[t("el-badge",{attrs:{value:e.getParamsKeys(e.tableData[a.name]),max:10,type:"success"}},[e._v(" "+e._s(a.label)+" ")])],1):e._e(),e._t("body"),t("params-table",{attrs:{"business-type":e.businessType,fixed:e.tableData[a.name],rules:e.bodyRules,"multiple-values":e.multipleValues&&("multipart/form-data"===e.contentType||"application/x-www-form-urlencoded"===e.contentType),disabled:e.disabled,isDelScriptWithHttp:e.isDelScriptWithHttp,"show-desc-column":e.showDescColumn,"field-desc":a.fieldDesc},on:{"update:fixed":function(t){return e.$set(e.tableData,a.name,t)},"update:fieldDesc":function(t){return e.$set(a,"fieldDesc",t)},"update:field-desc":function(t){return e.$set(a,"fieldDesc",t)}}})],2)})),1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("61c7"),s=a("5880");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"data-param",data:function(){return{config:{tabs:[{name:"openapiPackageSkus",label:"流量包",fieldDesc:""}]},activeTab:"openapiPackageSkus",tableData:{}}},props:{data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},businessType:{type:String},isDelWithHttp:{type:Boolean,default:!0},multipleValues:{type:Boolean,default:!1},contentType:{type:String,default:""},isDelScriptWithHttp:{type:Boolean,default:!0},showDescColumn:{type:Boolean,default:!1}},computed:{dataObj:function(){var e=this.tableData;return e},fieldDesc:function(){return{body:this.fieldDescBody,header:this.fieldDescHeader,query:this.fieldDescQuery}}},components:{paramsTable:o["default"]},watch:{data:{immediate:!0,deep:!0,handler:function(e){this.initData(e)}},dataObj:{deep:!0,handler:function(){this.emitData()}}},methods:l(l({},Object(s["mapActions"])(["removeScript"])),{},{getParamsKeys:function(e){var t=Object.keys(e||{})||[];return t.length},emitData:function(){this.$emit("update:data",this.dataObj)},initData:function(e){e=e||this.data||{},this.tableData=e},openScript:function(){this.scriptVisible=!0},deleteScript:function(e){var t=this;this.$confirm("确定删除该脚本?",{type:"warning"}).then((function(){t.isDelScriptWithHttp?t.removeScript(e).then((function(){t.scriptId="",t.$message.success("删除成功")})):(t.$store.commit("SET_WILL_DEL_SCRIPT_IDS",e),t.scriptId="",t.$message.success("删除成功"))}))}})},d=u,p=(a("c980"),a("2877")),f=Object(p["a"])(d,n,i,!1,null,null,null);t["default"]=f.exports},3657:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"auto","show-message":!1}},[t("el-table",{staticClass:"request-table",attrs:{data:e.form.data,size:e.size,border:"","default-expand-all":""}},[t("el-table-column",{attrs:{prop:"name",label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"data."+a.$index+".name",rules:e.form.rules.name}},[t("el-input",{attrs:{size:e.size,disabled:e.disabled,placeholder:"参数名"},model:{value:a.row.name,callback:function(t){e.$set(a.row,"name",t)},expression:"scope.row.name"}})],1)]}}])}),t("el-table-column",{attrs:{prop:"required",label:"必填",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"data."+a.$index+".required",rules:e.form.rules.required}},[t("el-checkbox",{attrs:{size:e.size,disabled:e.disabled},model:{value:a.row.required,callback:function(t){e.$set(a.row,"required",t)},expression:"scope.row.required"}})],1)]}}])}),t("el-table-column",{attrs:{prop:"description",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"data."+a.$index+".description",rules:e.form.rules.description}},[t("el-input",{attrs:{size:e.size,disabled:e.disabled,placeholder:"描述"},model:{value:a.row.description,callback:function(t){e.$set(a.row,"description",t)},expression:"scope.row.description"}})],1)]}}])}),t("el-table-column",{attrs:{prop:"example",label:"示例值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"data."+a.$index+".example",rules:e.form.rules.example}},[t("el-input",{attrs:{size:e.size,disabled:e.disabled,placeholder:"示例值"},model:{value:a.row.example,callback:function(t){e.$set(a.row,"example",t)},expression:"scope.row.example"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{content:"插入新的参数",placement:"top-start"}},[t("el-button",{attrs:{size:e.size,disabled:e.disabled,type:"text"},on:{click:function(t){return e.handleAdd(a.row)}}},[e._v("插入\n          ")])],1),t("el-button",{attrs:{size:e.size,disabled:e.disabled,type:"text"},on:{click:function(t){return e.handleDelete(a.$index)}}},[e._v("删除\n        ")])]}}])}),t("template",{slot:"empty"},[t("div",{staticStyle:{padding:"20px"}},[t("avue-empty"),t("el-button",{attrs:{type:"primary",size:e.size,disabled:e.disabled},on:{click:function(t){return e.initTableData()}}},[e._v("新增数据")])],1)])],2)],1)},i=[],r={name:"request-table",props:{disabled:{type:Boolean,default:!1},size:{type:String,default:"mini"},data:{type:Array,default:function(){return[]}}},watch:{data:{deep:!0,handler:function(){this.form.data=this.data}}},data:function(){return{activeTab:"header",form:{data:[],rules:{name:[{required:!0,trigger:"blur"}]}}}},methods:{handleAdd:function(){this.form.data.splice(0,0,{name:"",required:!0,description:"",example:""})},handleDelete:function(e){this.form.data.splice(e,1)},initTableData:function(){this.form.data.push({name:"",required:!0,description:"",example:""})},validate:function(){var e=this;return new Promise((function(t,a){e.$refs.form.validate((function(n){n?(e.emitData(),t()):(e.$message({showClose:!0,message:"请完善信息！",type:"warning"}),a("请完善信息"))}))}))},emitData:function(){this.$emit("emitData",this.form.data),this.$emit("update:data",this.form.data)}}},o=r,s=(a("46f9"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=c.exports},3863:function(e,t,a){"use strict";a("e38d")},"38e0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"preview"},[t("el-card",{staticClass:"preview-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.documentName?t("el-tag",[e._v(e._s(e.documentName))]):e._e(),e._v(" \n        "),t("b",[e._v(e._s(e.title))])],1),t("div",{attrs:{id:"micro"}})])],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("34ac9"),s=a("1ca4"),c=a("27ae"),l=a("0a5a"),u=a("e223");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={name:"preview",data:function(){return{app:null}},computed:{id:function(){return this.$route.query.id},documentName:function(){return this.$route.query.documentName},type:function(){return this.$route.query.type},pageType:function(){return this.$route.query.pageType},title:function(){return"interface"===this.pageType?"接口文档预览":"document"===this.pageType?"文档集预览":""},pairId:function(){return this.$route.query.pairId},dedicatedLineBizId:function(){return this.$route.query.dedicatedLineBizId}},watch:{$route:{deep:!0,handler:function(){this.app&&(this.app.unmount(),this.actions.offGlobalStateChange(),this.loadApp())}}},methods:{loadApp:function(){var e=this;if(this.id&&Constant.document&&Constant.document.plugins&&Constant.document.plugins.openDocument){var t={pairId:this.pairId,documentId:this.id,dedicatedLineBizId:this.dedicatedLineBizId,type:this.type,headers:{Authorization:"Basic ".concat(c["Base64"].encode("".concat(s["a"].clientId,":").concat(s["a"].clientSecret))),"Blade-Auth":"bearer "+Object(l["a"])()}};this.app=Object(o["b"])(p(p({},Constant.document.plugins.openDocument),{},{container:"#micro",props:t}));var a=this.actions=Object(u["b"])(t),n=a.onGlobalStateChange;this.actions.setGlobalState(t),n((function(t){e.actions.setGlobalState(t)}))}}},mounted:function(){this.loadApp()},beforeDestroy:function(){this.app&&(this.app.unmount(),this.actions.offGlobalStateChange())}},h=f,b=(a("1259"),a("2877")),m=Object(b["a"])(h,n,i,!1,null,null,null);t["default"]=m.exports},"39d3":function(e,t,a){"use strict";a("c107")},"3c46":function(e,t,a){},"3ec6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{title:"添加文档",direction:"rtl","modal-append-to-body":!1,"append-to-body":!0,size:"900px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("avue-crud",{ref:"crud",attrs:{data:e.data,page:e.page,option:e.option,"table-loading":e.loading},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"selection-change":e.selectionChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),t("footer",{staticClass:"drawer-footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=a("16cd"),o=a("52f7"),s={props:{visible:{type:Boolean,default:!1},app:{type:String,default:""}},data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,border:!0,index:!0,dialogClickModal:!1,menu:!1,menuPosition:"right",labelWidth:100,menuWidth:360,addBtn:!1,tip:!1,column:[{label:"服务名称",prop:"name",search:!0,searchSpan:12},{label:"描述",prop:"description",search:!0,searchSpan:12},{label:"版本",prop:"version",search:!1}]},data:[],selectionList:[]}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}}},methods:{selectionChange:function(e){this.selectionList=e},andleSubmitData:function(e){return e=Object(r["c"])(e),e},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["e"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))},confirm:function(){0!==this.selectionList.length?(this.$emit("emitData",this.selectionList),this.dialogVisible=!1):this.$message.warning("请选择数据！")}}},c=s,l=(a("e35c"),a("2877")),u=Object(l["a"])(c,n,i,!1,null,"6b20132e",null);t["default"]=u.exports},"45ff":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"collection"},[t("input",{ref:"urlInput",staticClass:"url-input"}),t("el-alert",{staticClass:"link-con",attrs:{type:"warning"}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"label"},[e._v("快速集成开放文档：")]),t("el-link",{attrs:{type:"primary",href:"http://fizzgate.com/guide/manager/manager_open_document_use.html",target:"_blank"}},[e._v("\n        http://fizzgate.com/guide/manager/manager_open_document_use.html\n      ")])],1)]),t("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(a){var n=a.row;return[e.permissionList.previewBtn?t("el-button",{attrs:{icon:"el-icon-view",size:"small",type:"text"},on:{click:function(t){return e.handlePreview(n)}}},[e._v("预览")]):e._e(),t("el-button",{attrs:{icon:"el-icon-copy-document",size:"small",type:"text"},on:{click:function(t){return e.copyUrl(n.url)}}},[e._v("复制地址")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("96cf"),a("3b8d")),o=(a("6762"),a("2fdb"),a("bd86")),s=a("2620"),c=a("52f7"),l=a("5880");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"collection",data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,editBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,menuWidth:320,column:[{label:"名称",prop:"name",search:!0,width:150},{label:"描述",prop:"description",search:!0},{label:"地址",prop:"url",labelWidth:300}]},data:[],defaultOpenUrl:""}},computed:d(d({},Object(l["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.interface_collection_add,!1),editBtn:this.vaildData(this.permission.interface_collection_edit,!1),delBtn:this.vaildData(this.permission.interface_collection_remove,!1),viewBtn:this.vaildData(this.permission.interface_collection_view,!1),previewBtn:this.vaildData(this.permission.interface_collection_preview,!1)}}}),methods:{handleSubmitData:function(e){return e},rowDel:function(e){var t=this;this.$confirm("你确定要删除此文档集吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["d"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){["add","edit","view"].includes(t)&&this.$router.push({path:"/interface/collection/".concat(t),query:{id:this.form.id,type:t}})},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:{},this.loading=!0,this.defaultOpenUrl){e.next=5;break}return e.next=5,this.getOpenDocDefaultUrl();case 5:Object(s["c"])(t.currentPage,t.pageSize,Object.assign(a,this.query)).then((function(e){var t=e.data.data;n.page.total=t.total,n.loading=!1,n.data=t.records.map((function(e){return e.url="".concat(n.defaultOpenUrl,"?id=").concat(e.id),e}))}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getOpenDocDefaultUrl:function(){var e=this;return Object(c["f"])().then((function(t){200===t.data.code?e.defaultOpenUrl=t.data.data:e.$message({type:"error",message:t.data.msg||"获取开放文档默认地址 失败！"})}))},copyUrl:function(e){this.$refs.urlInput.value=e,this.$refs.urlInput.select(),document.execCommand("copy"),this.$message({message:"地址已复制到粘贴板！",type:"success"})},handlePreview:function(e){this.$router.push({path:"/interface/document/preview",query:{id:e.id,documentName:e.name,pageType:"document"}})}}},f=p,h=(a("6e9f"),a("2877")),b=Object(h["a"])(f,n,i,!1,null,"2f37faaa",null);t["default"]=b.exports},"46db":function(e,t,a){},"46f9":function(e,t,a){"use strict";a("2c59")},"4bc4":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"business-detail"},[t("el-card",{staticClass:"main"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n      "),t("b",[e._v(e._s(e.title))])],1),t("avue-form",{attrs:{disabled:e.disabled,option:e.option,rules:e.rules},on:{submit:e.saveHandle},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"intro"},[t("div",{attrs:{id:"vditor"}},[e._v(e._s(e.form.intro))])]),t("template",{slot:"icon"},[t("div",[e.form.icon?t("div",{staticClass:"img-con"},[t("img",{staticClass:"avatar",attrs:{src:e.form.icon}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(e.form.icon)}}},[t("i",{staticClass:"el-icon-zoom-in"})]),t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){e.form.icon=""}}},[t("i",{staticClass:"el-icon-delete"})])])]):t("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.disabled,action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-change":function(){return e.handleAvatarChangeIcon.apply(e,arguments)},accept:".jpg,.jpeg,.png,.JPG,.JPEG"}},[t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("span",{staticClass:"key-tips"},[e._v("尺寸要求：60px * 60px")])],1)]),t("template",{slot:"openapiPackageSkus"},[t("package-params",{key:"bubboRequest",staticClass:"highlight-border",attrs:{"body-name":"订阅套餐","business-type":e.businessType,"has-query":!1,data:e.packages,isDelScriptWithHttp:e.isDelScriptWithHttp,disabled:e.disabled},on:{"update:data":function(t){e.packages=t}}})],1),t("template",{slot:"openDocSetId"},[t("div",[t("paginationSelect",{attrs:{dataList:e.docSetList,loading:e.docSetLoading,labelKey:e.docSetLabelKey,valueKey:e.docSetValueKey,disabled:e.disabled,value:e.form.openDocSetId,clearable:!0,showPagination:!1},on:{selectChange:e.docSetSelectChange}})],1)]),t("template",{slot:"openapiRelations"},[t("div",[e.disabled?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.addRoute}},[e._v("选择路由")]),t("el-table",{staticClass:"table",attrs:{disabled:e.disabled,data:e.docList,border:"",size:"mini"}},[t("el-table-column",{attrs:{prop:"service",label:"路由"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n                "+e._s(a.service+(a.path||"")||"")+"\n              ")]}}])}),e.disabled?e._e():t("el-table-column",{attrs:{prop:"",label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.removeRoute(n)}}},[e._v("删除")])]}}],null,!1,426637380)})],1)],1)])],2),t("el-dialog",{staticClass:"preview-dialog",attrs:{"append-to-body":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{staticClass:"img",attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e.routeVisible?t("routeDidalog",{attrs:{visible:e.routeVisible,multiple:!0,isDedicatedLine:0,rowSelections:e.rowSelections},on:{changeDrawer:function(t){e.routeVisible=!1},emitData:e.routeChange}}):e._e()],1)},i=[],r=(a("8e6e"),a("456d"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=a("bd86"),s=(a("aef6"),a("28a5"),a("ac6a"),a("8615"),a("ff41")),c=a.n(s),l=(a("2f2f"),a("0386")),u=a("6cb8"),d=a("3388"),p=a("684b"),f=a("1e18"),h=a("2620"),b=a("0e0b");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={name:"packageDetail",components:{routeDidalog:l["default"],packageParams:d["default"],paginationSelect:p["default"]},data:function(){var e=this;return{dialogVisible:!1,dialogImageUrl:"",option:{emptyBtn:!1,disabled:!1,column:[{label:"套餐名称",prop:"name",type:"input",placeholder:"请输入套餐名称",span:24,rules:[{required:!0,message:"请输入 API套餐",trigger:"blur"}]},{label:"套餐Icon",prop:"icon",formslot:!0,slot:!0,span:24,rules:[{required:!0,message:"请输入 套餐Icon",trigger:"blur"},{validator:function(t,a,n){e.form.icon?n():n(new Error("请选择 套餐Icon"))},trigger:"change"}]},{label:"套餐描述",prop:"description",type:"textarea",placeholder:"请输入套餐名称",span:24,rules:[{required:!0,message:"请输入 业务描述",trigger:"blur"}]},{label:"套餐说明",prop:"intro",formslot:!0,slot:!0,span:24,rules:[{required:!0,validator:function(t,a,n){var i=e.contentEditor.getValue();i&&0!==i.length?n():n(new Error("请输入 业务说明"))},trigger:"blur"}]},{label:"API分类",prop:"apiCategory",type:"input",placeholder:"请输入API分类",span:24,rules:[{required:!0,message:"请输入 API分类",trigger:"blur"}]},{label:"是否公开",prop:"isPublic",type:"radio",dicData:f["b"],span:24,rules:[{required:!0,message:"请选择 是否公开",trigger:"change"}]},{label:"套餐类型",prop:"openapiPackageSkus",formslot:!0,slot:!0,span:24,rules:[{validator:function(t,a,n){if(e.packages&&0!==e.packages.length){var i=Object.values(e.packages).map((function(e){return e}));i.length>0?n():n(new Error("请添加套餐类型"))}else n(new Error("请添加套餐类型"))},trigger:"change"}]},{label:"文档集",prop:"openDocSetId",formslot:!0,slot:!0,span:24,rules:[]},{label:"路由",prop:"openapiRelations",formslot:!0,slot:!0,span:24,rules:[{required:!0,validator:function(t,a,n){e.docList&&0!==e.docList.length?n():n(new Error("请选择 路由"))},trigger:"change"}]}]},isPublic:f["b"],packages:{},form:{name:"",description:"",intro:"",categoryIds:[],isPublic:1,openDocSetId:"",openapiPackageSkus:[],icon:""},contentEditor:"",rowSelections:[],docSetList:[],docSetLoading:!1,docSetLabelKey:"name",docSetValueKey:"id",docList:[],routeVisible:!1,disabled:!1,route:{type:"",index:-1}}},computed:{title:function(){var e="";switch(this.type){case"add":e="新增API套餐";break;case"edit":e="修改API套餐";break;case"view":e="API套餐详情";break}return e},type:function(){var e=this.$route.path.split("/");return e[e.length-1]||"add"},id:function(){return this.$route.query.id}},methods:{initEdit:function(){var e=this;this.contentEditor=new c.a("vditor",{cdn:"/cdn/vditor/3.9.6",after:function(){e.contentEditor.setValue(e.form.intro),e.disabled&&e.contentEditor.disabled()},height:300,placeholder:"请输入套餐介绍",theme:"classic",counter:{enable:!0,type:"markdown"},preview:{delay:0,hljs:{style:"monokai",lineNumber:!0}},tab:"\t",typewriterMode:!0,toolbarConfig:{pin:!0},cache:{enable:!1},mode:"sv",toolbar:["headings","bold","italic","strike","link","emoji","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","table","|","undo","redo","|","edit-mode","code-theme","export",{name:"more",toolbar:["fullscreen","both","preview"]}]})},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},handleAvatarChangeIcon:function(e,t){var a=this;Object(b["c"])(e.raw,(function(e){a.form.icon=e}))},beforeAvatarUpload:function(e){var t=this.isImage(e.name);return t||this.$message.error("只允许上传图片"),t},isImage:function(e){if("string"===typeof e){var t=e.toLowerCase();return t.endsWith(".png")||t.endsWith(".jpeg")||t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".bmp")}},removeRoute:function(e){this.docList.splice(e,1)},addRoute:function(){this.rowSelections=this.docList.map((function(e){return{id:e.apiAuthId,service:e.service,path:e.path}})),this.routeVisible=!0},routeChange:function(e){var t=[];e.forEach((function(e){t.push({service:e.service,apiAuthId:e.id,path:e.path})})),this.docList=t},getParams:function(){var e=this,t=[],a=this.docList;a.forEach((function(e){t.push({apiAuthId:e.apiAuthId,openDocSetRelationId:e.openDocSetRelationId||e.id,service:e.service})}));var n=this.packages.openapiPackageSkus;return n=n.map((function(t){return g(g({},t),{},{packageId:e.id,payType:1})})),g(g({},this.form),{},{intro:this.contentEditor.getValue(),openapiPackageSkus:n,openapiRelations:t})},validateAgain:function(){var e=!0;return 1===this.form.type&&1===this.form.bind&&(this.docList.forEach((function(t){t.apiAuthId||(e=!1)})),e||this.$message.warning("文档路由的服务名不能为空！"),0===this.docList.length&&(e=!1,this.$message.warning("请选择文档！"))),e},cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/openapi/package"})},saveHandle:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a,n){var i,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,i="add"===this.type?u["a"]:u["e"],r=this.getParams(),e.next=5,i(r).then((function(e){200===e.data.code?(o.$message({type:"success",message:e.data.msg||"保存成功！"}),"add"===o.type?o.cancel():o.init()):o.$message({type:"error",message:e.data.msg||"保存失败！"}),o.loading=!1,a()}),(function(){o.loading=!1,a()}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=this;Object(u["b"])(this.id).then((function(t){if(200===t.data.code){var a=t.data.data;e.form=t.data.data,e.initEdit();var n=e.form.openapiPackageSkus.filter((function(e){return 1==e.payType}));e.packages={openapiPackageSkus:n},e.$set(e.form,"bind",e.form.openDocSetId&&1===e.form.type?1:0),a.openapiRelations.forEach((function(t){e.docList.push(t)}))}}))},getDocSetList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.docSetLoading=!0,Object(h["c"])(10,-1,{name:t||""}).then((function(e){var t=e.data.data;a.docSetLoading=!1,a.docSetList=t.records.map((function(e){return e.url="".concat(a.defaultOpenUrl,"?id=").concat(e.id),e}))}),(function(){a.docSetLoading=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),docSetSelectChange:function(e){this.form.openDocSetId=e},init:function(){this.docList=[],this.initEdit(),["edit","view"].includes(this.type)&&this.getDetail(),"view"===this.type&&(this.disabled=!0,this.option.disabled=!0,this.option.submitBtn=!1)}},beforeRouteUpdate:function(e,t,a){e.fullPath!==t.fullPath&&(a(),this.init())},mounted:function(){this.init(),this.getDocSetList()}},y=v,O=(a("0763"),a("39d3"),a("2877")),w=Object(O["a"])(y,n,i,!1,null,"79b353cc",null);t["default"]=w.exports},"4c02":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"d",(function(){return f}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/detail/").concat(e),method:"get"})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/remove"),method:"post",params:{ids:e}})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/save"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/update"),method:"post",data:e})},f=function(){return Object(i["a"])({url:"".concat(r["a"],"/alarm-subscription/simple-user-list"),method:"get"})}},"4c67":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"history"},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("b",[e._v("文档历史版本")])]),t("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(a){var n=a.row;return[e.permissionList.previewBtn?t("el-button",{attrs:{icon:"el-icon-view",size:"small",type:"text"},on:{click:function(t){return e.handlePreview(n)}}},[e._v("预览")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),o=a("5880"),s=a("b5c6"),c=a("da71");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e,t,a){return Object(s["a"])({url:"".concat(c["a"],"/open-doc/open-doc-history/list"),method:"get",params:u(u({},a),{},{current:e,size:t})})},p=function(e){return Object(s["a"])({url:"".concat(c["a"],"/open-doc/open-doc-history/remove"),method:"post",params:{ids:e}})};function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"document-history",data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:800,border:!0,index:!0,dialogClickModal:!1,viewBtn:!1,editBtn:!1,addBtn:!1,columnBtn:!1,menuPosition:"right",labelWidth:100,column:[{label:"名称",prop:"name",search:!0},{label:"描述",prop:"description",search:!0},{label:"版本",prop:"version",search:!1}]},data:[]}},computed:h(h({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permission.interface_document_history_remove,!1),previewBtn:this.vaildData(this.permission.interface_document_history_preview,!1)}},id:function(){return this.$route.query.id}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{rowDel:function(e){var t=this;this.$confirm("你确定要删除此历史版本吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,d(e.currentPage,e.pageSize,Object.assign(a,this.query,{openDocId:this.id})).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))},handlePreview:function(e){this.$router.push({path:"/interface/document/preview",query:{id:e.id,documentName:e.name,type:"history"}})}}},m=b,g=a("2877"),v=Object(g["a"])(m,n,i,!1,null,"0fb01072",null);t["default"]=v.exports},"4cba":function(e,t,a){},"4ec5":function(e,t,a){},"52f7":function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return h})),a.d(t,"f",(function(){return b}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/save"),method:"post",data:e,timeout:4e4})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/update"),method:"post",data:e,timeout:4e4})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/detail/").concat(e),method:"get"})},f=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/get-api-docs-by-service"),method:"get",params:e})},h=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/get-api-docs-by-api"),method:"get",params:e})},b=function(){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/open-doc/open-doc-default-url"),method:"get"})}},"55d7":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"document-detail"},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[e.baseForm.name?t("el-tag",[e._v(e._s(e.baseForm.name))]):e._e(),e._v(" \n        "),t("b",[e._v(e._s(e.title))])],1),t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{staticClass:"base-con",attrs:{label:"基本信息",name:"base"}},[t("document-base",{ref:"base",attrs:{disabled:e.disabled,data:e.baseForm},on:{"update:data":function(t){e.baseForm=t},goInter:e.goInter}})],1),t("el-tab-pane",{attrs:{label:"接口信息",name:"interface",disabled:e.interTabDisabled}},[t("document-inter",{ref:"interface",attrs:{disabled:e.disabled,docJson:e.docJson,otherInfo:e.otherInfo},on:{"update:otherInfo":function(t){e.otherInfo=t},"update:other-info":function(t){e.otherInfo=t},changeOtherInfo:e.changeOtherInfo,getDefaultOhterInfo:function(t){return e.defaultOtherInfo=t}}})],1)],1),e.disabled?e._e():t("footer",[t("el-button",{attrs:{icon:"el-icon-circle-check",type:"primary",size:"small",loading:e.loading},on:{click:e.submit}},[e._v("保 存")]),t("el-button",{attrs:{icon:"el-icon-circle-close",size:"small"},on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],r=(a("8e6e"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=(a("456d"),a("bd86")),s=(a("8615"),a("768b")),c=(a("ffc1"),a("ac6a"),a("52f7")),l=a("042a"),u=a("a9ec"),d=a("307b");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{documentBase:u["default"],documentInter:l["default"]},data:function(){return{baseForm:{},loading:!1,docJson:{},openDocApis:[],otherInfo:{},defaultOtherInfo:{isShow:0,isAuth:0,isSupportDebug:0,remark:""},activeTab:"base",interTabDisabled:!0}},computed:{id:function(){return this.$route.query.id},disabled:function(){return"view"===this.$route.params.actionType},pageType:function(){return this.$route.params.actionType},title:function(){return"add"===this.pageType?"新增接口文档":"view"===this.pageType?"接口文档详情":"edit"===this.pageType?"编辑接口文档":void 0}},watch:{activeTab:function(){"interface"===this.activeTab&&this.$refs.interface.renderTree()}},methods:{tabClick:function(e){this.activeTab=e.name},goInter:function(e){this.docJson=Object(d["a"])(e),this.activeTab="interface",this.interTabDisabled=!1},renderOpenDocApis:function(){var e=[],t=this;return this.docJson&&this.docJson.paths&&Object.entries(this.docJson.paths).forEach((function(a){var n=Object(s["a"])(a,2),i=n[0],r=n[1];Object.values(r).forEach((function(a){var n=t.otherInfo[i]?t.otherInfo[i]:t.defaultOtherInfo;n.id&&delete n.id,e.push(f(f({content:JSON.stringify({curJson:f(f({},r),{},{path:i})}),module:a.tags.join(","),name:a.summary},n),{},{method:Object.entries(r)[0][0]||"",path:i}))}))})),e},renderOtherInfo:function(e){var t=this;e.forEach((function(e){if(e.content){var a=JSON.parse(e.content)||{},n=a.curJson.path;n&&(t.otherInfo[n]={},Object.keys(t.defaultOtherInfo).forEach((function(a){t.otherInfo[n][a]=e[a]})),t.otherInfo[n].id=e.id)}}))},changeOtherInfo:function(e){this.otherInfo=e},getDetail:function(){var e=this;Object(c["b"])(this.id).then((function(t){200===t.data.code?(e.baseForm=t.data.data,e.openDocApis=e.baseForm.openDocApis,e.docJson=JSON.parse(e.baseForm.content||{}),delete e.baseForm.openDocApis,e.interTabDisabled=!1,e.openDocApis&&e.renderOtherInfo(e.openDocApis||[])):e.$message({type:"error",message:t.data.msg||"获取详情 失败！"})}))},handleContent:function(){var e=this.docJson.definitions||{},t={swagger:this.docJson.swagger,info:{version:this.docJson.info.version},host:this.docJson.host,tags:this.docJson.tags,paths:this.docJson.paths,securityDefinitions:this.docJson.securityDefinitions,definitions:e};return t},handleSave:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="add"===this.pageType?c["a"]:c["h"],a=f(f({},this.baseForm),{},{content:JSON.stringify(this.handleContent()),openDocApis:this.renderOpenDocApis()||this.openDocApis}),this.loading=!0,e.next=5,t(a).then((function(e){200===e.data.code?(n.$message({type:"success",message:e.data.msg||"保存成功！"}),n.cancel()):n.$message({type:"error",message:e.data.msg||"保存失败！"})}),(function(){n.loading=!1}));case 5:this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/interface/document"})},submit:function(){var e=this;this.$refs.interface.emitData(),this.$refs.base.validate().then((function(){if("add"===e.pageType&&(e.openDocApis=e.renderOpenDocApis()),e.openDocApis&&e.openDocApis.length>0)e.handleSave();else{var t="";switch(parseInt(e.baseForm.sourceType)){case 1:t="请点击 '获取' 按钮获取服务数据！";break;case 2:t="请点击 '获取' 按钮获取服务数据！";break;case 3:t="请点击 '加载' 按钮获取服务数据！";break}e.$message({type:"warning",message:t})}}))}},mounted:function(){["edit","view"].includes(this.pageType)&&this.getDetail()}},b=h,m=(a("c890"),a("036d"),a("2877")),g=Object(m["a"])(b,n,i,!1,null,"7ba92ec6",null);t["default"]=g.exports},"56be":function(e,t,a){"use strict";a("1e87")},"588e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(a){var n=a.row;return[e.permissionList.previewBtn?t("el-button",{attrs:{icon:"el-icon-view",size:"small",type:"text"},on:{click:function(t){return e.handlePreview(n)}}},[e._v("预览")]):e._e(),e.permissionList.historyBtn?t("el-button",{attrs:{icon:"el-icon-bank-card",size:"small",type:"text"},on:{click:function(t){return e.handleHistory(n.id)}}},[e._v("历史版本")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("6762"),a("2fdb"),a("bd86")),o=a("5880"),s=a("16cd"),c=a("52f7");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"document",data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,editBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,menuWidth:360,column:[{label:"服务名称",prop:"name",search:!0},{label:"描述",prop:"description",search:!0},{label:"版本",prop:"version",search:!1}]},data:[]}},computed:u(u({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.interface_document_add,!1),editBtn:this.vaildData(this.permission.interface_document_edit,!1),delBtn:this.vaildData(this.permission.interface_document_remove,!1),viewBtn:this.vaildData(this.permission.interface_document_view,!1),previewBtn:this.vaildData(this.permission.interface_document_preview,!1),historyBtn:this.vaildData(this.permission.interface_document_history,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{handleSubmitData:function(e){return e=Object(s["c"])(e),e},rowDel:function(e){var t=this;this.$confirm("你确定要删除此接口文档吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["g"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){["add","edit","view"].includes(t)&&this.$router.push({path:"/interface/document/".concat(t),query:{id:this.form.id}}),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["e"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))},handleHistory:function(e){this.$router.push({path:"/interface/document/history",query:{id:e}})},handlePreview:function(e){this.$router.push({path:"/interface/interface/preview",query:{id:e.id,documentName:e.name,type:"real",pageType:"interface"}})}}},p=d,f=a("2877"),h=Object(f["a"])(p,n,i,!1,null,"4326bcce",null);t["default"]=h.exports},"5b32":function(e,t,a){"use strict";a("a176")},"5b4b":function(e,t,a){},"5bb1":function(e,t,a){},"5e55":function(e,t,a){},"5fb3":function(e,t,a){},"61c7":function(e,t,a){"use strict";a.r(t),a.d(t,"cycle",(function(){return p}));a("7f7f");var n=function(){var e=this,t=e._self._c;return e.reload?t("avue-crud",{ref:"crudRef",staticClass:"param-table",attrs:{option:e.option,data:e.data,"table-loading":e.loading,"row-class-name":e.tableRowClassName},on:{"row-del":e.rowDel,"row-update":e.addUpdate},nativeOn:{click:function(t){return e.clickNative.apply(null,arguments)}},scopedSlots:e._u([{key:"name",fn:function(a){var n=a.row,i=a.size;return[n.$cellEdit?t("div",{staticClass:"with-icon"},[t("el-input",{staticStyle:{"padding-right":"6px"},attrs:{size:i,placeholder:"请输入名称(必填)",clearable:""},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"row.name"}}),t("el-tooltip",{staticClass:"tooltip",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("span",[e._v("\n            套餐名称可以使用：次数/计费周期，也可以自定义\n          ")])]),t("i",{staticClass:"el-icon-question"})])],1):t("div",[e._v(" "+e._s(n.name))])]}},{key:"cycle",fn:function(a){var n=a.row,i=a.size;return[n.$cellEdit?t("el-select",{attrs:{size:i,placeholder:"请选择类型(必填)"},model:{value:n.cycle,callback:function(t){e.$set(n,"cycle",t)},expression:"row.cycle"}},e._l(e.cycle,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):t("div",[e._v("\n      "+e._s(e.getCycleName(n.cycle))+"\n    ")])]}},{key:"requestTimes",fn:function(a){var n=a.row,i=a.size;return[n.$cellEdit?t("div",[t("el-input",{attrs:{size:i,placeholder:"请输入值(必填)",type:"number",clearable:""},model:{value:n.requestTimes,callback:function(t){e.$set(n,"requestTimes",t)},expression:"row.requestTimes"}})],1):t("div",[e._v(" "+e._s(n.requestTimes))])]}},{key:"price",fn:function(a){var n=a.row,i=a.size;return[n.$cellEdit?t("div",{staticClass:"with-icon"},[t("el-input",{staticStyle:{"padding-right":"6px"},attrs:{size:i,placeholder:"请输入价格(必填)",clearable:""},model:{value:n.price,callback:function(t){e.$set(n,"price",t)},expression:"row.price"}}),t("el-tooltip",{staticClass:"tooltip",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("span",[e._v("\n            套餐价格，填入0时为免费套餐\n          ")])]),t("i",{staticClass:"el-icon-question"})])],1):t("div",[e._v(" "+e._s(n.price))])]}}],null,!1,1847273789)}):e._e()},i=[],r=(a("8e6e"),a("7514"),a("7618")),o=(a("456d"),a("ac6a"),a("3b2b"),a("d263"),a("bd86")),s=a("5880"),c=a("e683"),l=a("c54a");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=[{label:"月",value:2},{label:"年",value:3}],f={name:"params-table",props:{fixed:{type:[Object,Array],default:function(){return{}}},quote:{type:[Object,Array],default:function(){return{}}},disabled:{type:Boolean,default:!1},businessType:{type:String},rules:{type:Object},multipleValues:{type:Boolean,default:!1},isDelScriptWithHttp:{type:Boolean,default:!0},showDescColumn:{type:Boolean,default:!1},fieldDesc:{type:Array,default:function(){return[]}}},data:function(){return{reload:!1,loading:!1,scriptVisible:!1,fixedDataType:c["f"],quoteDataType:c["h"],cycle:p,data:[],option:{addBtn:!1,editBtn:!1,cancelBtn:!1,refreshBtn:!1,columnBtn:!1,cellBtn:!0,addBtnText:"添加",addRowBtn:!this.disabled,menu:!this.disabled,menuWidth:130,column:[{label:"名称",prop:"name",slot:!0,cell:!0,rules:[{required:!0,message:"请输入名称",trigger:"blur"}]},{label:"计费周期",prop:"cycle",slot:!0,cell:!0,dicData:[{label:"月",value:2},{label:"年",value:3}]},{label:"次数",prop:"requestTimes",minWidth:200,cell:!0,slot:!0},{label:"价格",prop:"price",cell:!0,slot:!0}]}}},components:{},computed:d(d({},Object(s["mapGetters"])(["paramOptions"])),{},{dataObj:function(){return{fixed:this.fixed,quote:this.quote}}}),watch:{rules:{immediate:!0,deep:!0,handler:function(e){e&&this.initOption()}},dataObj:{immediate:!0,deep:!0,handler:function(e){this.initData(e)}},disabled:function(e,t){e!==t&&(this.option.addRowBtn=!e,this.option.menu=!e)}},methods:{clickNative:function(e){var t=this.findTagName(e.target,"BUTTON"),a=new RegExp(this.option.addBtnText);if(t&&a.test(t.innerText)){var n=document.querySelector(".el-drawer__body");this.scrollIntoView(n,this.$refs.crudRef.$el,0,50)}},findTagName:function(e,t){return e.tagName===t?e:!!e.parentElement&&this.findTagName(e.parentElement,t)},scrollIntoView:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&t)if(t){var i=[],r=t.offsetParent;while(r&&e!==r&&e.contains(r))i.push(r),r=r.offsetParent;var o=t.offsetTop+i.reduce((function(e,t){return e+t.offsetTop}),0),s=o+t.offsetHeight,c=e.scrollTop,l=c+e.clientHeight;o-a<c?e.scrollTop=o-a:s+n>l&&(e.scrollTop=s-e.clientHeight+n)}else e.scrollTop=0},tableRowClassName:function(e){var t=e.row;return t.$cellEdit?"row-edit":""},initOption:function(){var e=this;this.option.column=this.option.column.map((function(t){if("name"===t.prop){var a=e.rules&&e.rules["name"]||[];t.rules=t.rules.concat(a)}if("requestTimes"===t.prop){var n=e.rules&&e.rules["requestTimes"]||[];t.rules=(t.rules||[]).concat(n)}return t}))},addUpdate:function(e,t,a,n){return e.name?e.cycle?e.requestTimes||!1===e.requestTimes||0===e.requestTimes?(this.emitData(),n(),void a()):(this.$message.error("第".concat(t+1,"行: 字段值不能为空")),n(),!1):(this.$message.error("第".concat(t+1,"行: 字段类型不能为空")),n(),!1):(this.$message.error("第".concat(t+1,"行: 字段名不能为空")),n(),!1)},initData:function(e){var t=e.fixed;e.quote;this.reload=!1;var a=[];Object(l["d"])(t,"object")?Object.keys(t).forEach((function(e){var n=Object(l["c"])(t[e])?"json":Object(r["a"])(t[e])||"",i=Object(l["c"])(t[e])?JSON.stringify(t[e]):t[e];a.push({name:e,price:t[e].price,cycle:t[e].cycle,id:t[e].id,dataType:n,requestTimes:i})})):Object(l["d"])(t,"array")&&t.forEach((function(e){var t=Object(l["c"])(e.requestTimes)?"json":Object(r["a"])(e.requestTimes)||"",n=Object(l["c"])(e.requestTimes)?JSON.stringify(e.requestTimes):e.requestTimes;a.push({name:e.name,price:e.price,cycle:e.cycle,id:e.id,dataType:t,requestTimes:n})})),this.data=a,this.reload=!0,this.initTableDesc()},initTableDesc:function(){var e=this;this.data.map((function(t,a){for(var n=0;n<e.fieldDesc.length;n++)e.fieldDesc[n].key===t.key&&e.fieldDesc[n].cycle===t.cycle&&e.$set(e.data[a],"desc",e.fieldDesc[n].desc);return t}))},handleData:function(){var e=[],t=[];return this.data.forEach((function(t){if(t.cycle){var a="json"===t.dataType?JSON.parse(t.requestTimes):t.requestTimes;e.push({price:t.price,cycle:t.cycle,id:t.id,name:t.name,requestTimes:a})}})),{fixed:e,quote:t}},getCycleName:function(e){var t=this.cycle.find((function(t){return t.value==e}))||{};return t.label||""},emitData:function(){var e=this.handleData(),t=e.fixed,a=e.quote;this.$emit("update:fixed",t),this.$emit("update:quote",a)},rowDel:function(e,t){this.data.splice(t,1),this.emitData()}}},h=f,b=(a("85176"),a("21dd"),a("2877")),m=Object(b["a"])(h,n,i,!1,null,"0ab7e6b2",null);t["default"]=m.exports},"624d":function(e,t,a){"use strict";a("4ec5")},6541:function(e,t,a){},"684b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"paginationSelect"},[t("el-select",{attrs:{disabled:e.disabled,filterable:"",multiple:e.multiple,placeholder:e.placeholder,"filter-method":e.filterMethod,loading:e.loading,clearable:e.clearable},on:{clear:e.selectClear,change:e.updateValue,focus:e.focusMethod},model:{value:e.copyValue,callback:function(t){e.copyValue=t},expression:"copyValue"}},[e._l(e.dataList,(function(a){return t("el-option",{key:a[e.valueKey],attrs:{label:a[e.labelKey],value:a[e.valueKey]}})})),e.showPagination?t("div",{staticClass:"pagination-con"},[t("el-pagination",{attrs:{"current-page":e.pageInfo.pageNo,"page-size":e.pageInfo.pageSize,layout:" prev, pager, next,total",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()],2)],1)},i=[],r={name:"paginationSelect",props:{value:{type:String,default:""},dataList:{type:Array,default:function(){return[]}},labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},pageInfo:{type:Object,default:function(){return{pageNo:1,pageSize:10}}},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},elSelectClass:Boolean,placeholder:{type:String,default:"请选择"},showPagination:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},watch:{value:{handler:function(e){this.copyValue=e},deep:!0}},data:function(){return{copyValue:this.value}},methods:{updateValue:function(){this.$emit("selectChange",this.copyValue),this.$emit("update:value",this.copyValue)},filterMethod:function(e){this.$emit("selectPageChange",1,this.pageInfo.pageSize,e)},focusMethod:function(){(!this.dataList||this.dataList&&0==this.dataList.length)&&this.filterMethod()},selectClear:function(){this.$emit("selectPageChange",1,this.pageInfo.pageSize,"")},handleCurrentChange:function(e){this.$emit("selectPageChange",e,this.pageInfo.pageSize)}}},o=r,s=(a("624d"),a("3077"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"4549380d",null);t["default"]=c.exports},"68e7":function(e,t,a){"use strict";a("46db")},"6c4e":function(e,t,a){},"6cb8":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e){return Object(i["a"])({url:"".concat(r["a"],"/openapipackage/page"),method:"get",params:s({},e)})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/openapipackage/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/openapipackage/save"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/openapipackage/update"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/openapipackage/detail/").concat(e),method:"get"})}},"6ce6":function(e,t,a){"use strict";a("1a70")},"6e9f":function(e,t,a){"use strict";a("80ed")},7424:function(e,t,a){"use strict";a("4cba")},7485:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line-biz/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line-biz/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line-biz/save"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line-biz/update"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/dedicated-line-biz/detail/").concat(e),method:"get"})}},"74ff":function(e,t,a){"use strict";a("d121")},"768b":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("f410"),i=a.n(n);function r(e){if(i()(e))return e}var o=a("f921"),s=a.n(o),c=a("d8d6"),l=a.n(c);function u(e,t){var a=null==e?null:"undefined"!=typeof s.a&&e[l.a]||e["@@iterator"];if(null!=a){var n,i,r,o,c=[],u=!0,d=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=r.call(a)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){d=!0,i=e}finally{try{if(!u&&null!=a["return"]&&(o=a["return"](),Object(o)!==o))return}finally{if(d)throw i}}return c}}var d=a("e630");function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return r(e)||u(e,t)||Object(d["a"])(e,t)||p()}},"7ab8":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"business-detail"},[t("el-card",{staticClass:"main"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n      "),t("b",[e._v(e._s(e.title))])],1),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,disabled:e.disabled,"label-width":"110px",size:"small"}},[t("el-form-item",{attrs:{label:"专线业务",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入 专线业务"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("div",{staticClass:"key-tips"},[e._v("专线业务名称")])],1),t("el-form-item",{attrs:{label:"业务描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 业务描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择 业务类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.dedicatedLineType,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"是否公开",prop:"isPublic"}},[t("el-radio-group",{model:{value:e.form.isPublic,callback:function(t){e.$set(e.form,"isPublic",t)},expression:"form.isPublic"}},e._l(e.isPublic,(function(a){return t("el-radio",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1),t("div",{staticClass:"key-tips"},[e._v("公开的业务会出现在推荐列表里")])],1),t("el-form-item",{attrs:{label:"联系邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入 联系邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t("div",{staticClass:"key-tips"},[e._v("邮箱用于接收商务合作邮件")])],1),1===e.form.type?[t("el-form-item",{attrs:{label:"绑定文档集",prop:"bind"}},[t("el-radio-group",{model:{value:e.form.bind,callback:function(t){e.$set(e.form,"bind",t)},expression:"form.bind"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),1===e.form.bind?t("el-form-item",{staticClass:"form-item-required",attrs:{label:"文档集"}},[t("paginationSelect",{attrs:{dataList:e.docSetList,loading:e.docSetLoading,labelKey:e.docSetLabelKey,valueKey:e.docSetValueKey,disabled:e.disabled,value:e.form.openDocSetId,clearable:!0,showPagination:!1},on:{selectChange:e.docSetSelectChange}}),t("el-table",{staticClass:"table",attrs:{data:e.docList,border:"",size:"mini"}},[t("el-table-column",{attrs:{prop:"openDocName",label:"文档名称"}}),t("el-table-column",{attrs:{prop:"service",label:"路由"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n                "+e._s(a.service||"")+"\n              ")]}}],null,!1,1367134722)}),t("el-table-column",{attrs:{prop:"",label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showRoute(n,"doc")}}},[e._v("选择路由")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.addRouteLine}},[e._v("新增专线路由")])]}}],null,!1,1796623092)})],1)],1):e._e()]:e._e(),0===e.form.bind||2===e.form.type?t("el-form-item",{staticClass:"form-item-required line",attrs:{label:"专线路由"}},[e.disabled?e._e():t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showRoute(-1,"route")}}},[e._v("选择路由")]),e.disabled?e._e():t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRouteLine}},[e._v("新增专线路由")]),t("div",{staticClass:"key-tips"},[e._v("\n          路由要求：前端API路径统一为/**, 后端API路径统一为/{$1},\n          且不启用AppID\n        ")]),t("el-table",{staticClass:"table",attrs:{data:e.websiteRoute,border:"",size:"mini"}},[t("el-table-column",{attrs:{prop:"service",label:"路由"}}),t("el-table-column",{attrs:{prop:"",label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delRoute(n)}}},[e._v("删除")])]}}],null,!1,2293877295)})],1)],1):e._e(),2===e.form.type?t("el-form-item",{attrs:{label:"网站入口路径",prop:"entrancePath"}},[t("el-input",{attrs:{placeholder:"请输入 网站入口路径"},model:{value:e.form.entrancePath,callback:function(t){e.$set(e.form,"entrancePath",t)},expression:"form.entrancePath"}}),t("div",{staticClass:"key-tips"},[e._v("请填写入口URL的路径部分")])],1):e._e(),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],2),e.disabled?e._e():t("footer",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check",loading:e.loading},on:{click:e.submitHandle}},[e._v("保 存")]),t("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:e.cancel}},[e._v(" 取 消 ")])],1)],1),e.routeVisible?t("routeDidalog",{attrs:{visible:e.routeVisible,multiple:"route"===e.route.type},on:{changeDrawer:function(t){e.routeVisible=!1},emitData:e.routeChange}}):e._e()],1)},i=[],r=(a("8e6e"),a("456d"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=a("bd86"),s=(a("20d6"),a("ac6a"),a("c54a")),c=a("bf76"),l=a("0386"),u=a("684b"),d=a("7485"),p=a("1e18"),f=a("2620");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(e,t,a){t&&!Object(s["h"])(t)?a(new Error("邮箱 格式不正确！")):a()},g={name:"businessDetail",components:{appidDialog:c["default"],routeDidalog:l["default"],paginationSelect:u["default"]},data:function(){return{dedicatedLineType:p["a"],isPublic:p["b"],form:{isPublic:1,bind:1,openDocSetId:""},rules:{name:[{required:!0,message:"请输入 专线业务",trigger:"blur"}],description:[{required:!0,message:"请输入 业务描述",trigger:"blur"}],type:[{required:!0,message:"请选择 业务类型",trigger:"change"}],isPublic:[{required:!0,message:"请输入 是否公开",trigger:"change"}],email:[{required:!0,message:"请输入 联系邮箱",trigger:"blur"},{validator:m,trigger:"blur"}],bind:[{required:!0,message:"请选择 是否绑定文档集",trigger:"change"}],entrancePath:[{required:!0,message:"请输入 网站入口路径",trigger:"blur"}]},websiteRoute:[],docSetList:[],docSetLoading:!1,docSetLabelKey:"name",docSetValueKey:"id",docList:[],routeVisible:!1,route:{type:"",index:-1}}},computed:{title:function(){var e="";switch(this.type){case"add":e="新增专线业务";break;case"edit":e="修改专线业务";break;case"view":e="专线业务详情";break}return e},type:function(){return this.$route.params.actionType},id:function(){return this.$route.query.id}},methods:{delRoute:function(e){this.websiteRoute.splice(e,1)},showRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;this.routeVisible=!0,this.route={type:t,index:e}},routeChange:function(e){var t=this;if("route"===this.route.type){var a=[];e.forEach((function(e){var n=t.websiteRoute.findIndex((function(t){return t.id===e.id}));-1===n&&a.push(b(b({},e),{},{apiAuthId:e.id}))})),this.websiteRoute=this.websiteRoute.concat(a)}else this.docList.splice(this.route.index,1,b(b({},this.docList[this.route.index]),{},{service:e.service,apiAuthId:e.id}))},addRouteLine:function(){this.$router.push({path:"/proxy/detail/add",query:{isDedicatedLine:!0}})},getParams:function(){var e=this,t=[],a=1===this.form.bind&&1===this.form.type?this.docList:this.websiteRoute;return a.forEach((function(a){t.push({apiAuthId:a.apiAuthId,openDocSetRelationId:1===e.form.bind?a.openDocSetRelationId||a.id:void 0,service:a.service})})),1===this.form.type&&1===this.form.bind||delete this.form.openDocSetId,b(b({},this.form),{},{apis:t})},validateAgain:function(){var e=!0;return 1===this.form.type&&1===this.form.bind?(this.docList.forEach((function(t){t.apiAuthId||(e=!1)})),e||this.$message.warning("文档路由的服务名不能为空！"),0===this.docList.length&&(e=!1,this.$message.warning("请选择文档！"))):(1===this.form.type&&0===this.form.bind||2===this.form.type)&&0===this.websiteRoute.length&&(e=!1,this.$message.warning("专线路由列表不能为空！")),e},cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/public-network/business"})},submitHandle:function(){var e=this;this.$refs.form.validate((function(t){t&&e.validateAgain()&&e.saveHandle()}))},saveHandle:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t="add"===this.type?d["a"]:d["e"],a=this.getParams(),e.next=5,t(a).then((function(e){200===e.data.code?(n.$message({type:"success",message:e.data.msg||"保存成功！"}),"add"===n.type?n.cancel():n.init()):n.$message({type:"error",message:e.data.msg||"保存失败！"}),n.loading=!1}),(function(){n.loading=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=this;Object(d["b"])(this.id).then((function(t){if(200===t.data.code){var a=t.data.data;e.form=t.data.data,e.$set(e.form,"bind",e.form.openDocSetId&&1===e.form.type?1:0),1===e.form.bind&&1===e.form.type?e.getApiList(e.form.openDocSetId).then((function(){a.apis.forEach((function(t){var a=e.docList.findIndex((function(e){return e.id===t.openDocSetRelationId}));-1===a?e.docList.push(t):e.docList.splice(a,1,t)}))})):a.apis.forEach((function(t){e.websiteRoute.push(b(b({},t),{},{id:t.apiAuthId}))}))}}))},getDocSetList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.docSetLoading=!0,Object(f["c"])(10,-1,{name:t||""}).then((function(e){var t=e.data.data;a.docSetLoading=!1,a.docSetList=t.records.map((function(e){return e.url="".concat(a.defaultOpenUrl,"?id=").concat(e.id),e}))}),(function(){a.docSetLoading=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),docSetSelectChange:function(e){this.form.openDocSetId=e,this.getApiList(e)},getApiList:function(e){var t=this;return Object(f["b"])(e).then((function(e){200===e.data.code&&(t.docList=e.data.data.openDocs||[])}))},init:function(){this.docList=[],this.websiteRoute=[],["edit","view"].includes(this.type)&&this.getDetail(),"view"===this.type&&(this.disabled=!0)}},beforeRouteUpdate:function(e,t,a){e.fullPath!==t.fullPath&&(a(),this.init())},mounted:function(){this.init(),this.getDocSetList()}},v=g,y=(a("b069"),a("aefb"),a("2877")),O=Object(y["a"])(v,n,i,!1,null,"45e4dd59",null);t["default"]=O.exports},"7b2b":function(e,t,a){"use strict";a("5bb1")},"7f9e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,"modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"700px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("el-form",{ref:"form",attrs:{disabled:e.disabled,model:e.form,rules:e.rules,size:"small","label-width":"90px"}},[t("el-form-item",{attrs:{label:"环境",prop:"env"}},[t("el-input",{attrs:{placeholder:"请输入 环境"},model:{value:e.form.env,callback:function(t){e.$set(e.form,"env",t)},expression:"form.env"}})],1),t("el-form-item",{attrs:{label:"请求地址",prop:"reqUrl"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 请求地址"},model:{value:e.form.reqUrl,callback:function(t){e.$set(e.form,"reqUrl",t)},expression:"form.reqUrl"}})],1)],1)],1),e.disabled?e._e():t("footer",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submitHandle}},[e._v(" 确 定 ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=(a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=(a("c5f6"),a("a2ea")),s=a("c54a"),c=function(e,t,a){""===t?a(new Error("必填")):Object(s["e"])(t)?a():a(new Error("URL格式不正确!"))},l={name:"address-detail",props:{visible:{type:Boolean,default:!1},type:{type:String,default:""},id:{type:Number}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}},title:function(){var e="";switch(this.type){case"add":e="新增环境信息";break;case"edit":e="修改环境信息";break;case"view":e="环境信息详情";break}return e}},data:function(){return{loading:!1,disabled:!1,form:{},rules:{env:[{required:!0,message:"必填",trigger:"blur"}],reqUrl:[{validator:c,required:!0,trigger:"blur"}]}}},methods:{getDetail:function(){var e=this;Object(o["b"])(this.id).then((function(t){e.form=t.data.data}))},submitHandle:function(){var e=this;this.$refs.form.validate((function(t){t&&e.saveHandle()}))},saveHandle:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t="add"===this.type?o["a"]:o["e"],e.next=4,t(this.form).then((function(e){200===e.data.code?(a.$message({type:"success",message:e.data.msg||"保存成功！"}),a.dialogVisible=!1,a.$emit("doSearch")):a.$message({type:"error",message:e.data.msg||"保存失败！"})}),(function(){a.loading=!1}));case 4:this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){["edit","view"].includes(this.type)&&this.getDetail(),"view"===this.type&&(this.disabled=!0)}},u=l,d=(a("f501"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"5f0597f2",null);t["default"]=p.exports},8040:function(e,t,a){},"80ed":function(e,t,a){},85176:function(e,t,a){"use strict";a("dc99")},"862dd":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"avue-empty",attrs:{"image-size":200}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"inter-info"},[t("h2",[e._v(e._s(e.curJson.name))]),e.showOtherInfo?t("div",{staticClass:"other"},[t("el-form",{ref:"ruleForm",attrs:{size:"small",model:e.form,rules:e.rules,"label-width":"60px",disabled:e.disabled}},[t("el-form-item",{attrs:{label:"展示",prop:"isShow"}},[t("el-radio-group",{model:{value:e.form.isShow,callback:function(t){e.$set(e.form,"isShow",t)},expression:"form.isShow"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),t("el-form-item",{attrs:{label:"认证",prop:"isAuth"}},[t("el-radio-group",{model:{value:e.form.isAuth,callback:function(t){e.$set(e.form,"isAuth",t)},expression:"form.isAuth"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),t("el-form-item",{attrs:{label:"调试",prop:"isSupportDebug"}},[t("el-radio-group",{model:{value:e.form.isSupportDebug,callback:function(t){e.$set(e.form,"isSupportDebug",t)},expression:"form.isSupportDebug"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1):e._e(),t("div",{staticClass:"container"},[t("h3",{staticClass:"container-title"},[e._v("请求信息")]),t("div",{staticClass:"descriptions-wrapper"},[t("div",{staticClass:"descriptions-con"},[t("el-row",{staticClass:"descriptions-row",attrs:{gutter:24}},[t("el-col",{staticClass:"descriptions",attrs:{md:24,lg:12}},[t("span",{staticClass:"label"},[e._v("接口名")]),t("span",{staticClass:"value"},[e._v(e._s(e.curJson.name))])]),t("el-col",{staticClass:"descriptions",attrs:{md:24,lg:12}},[t("span",{staticClass:"label"},[e._v("版本号")]),t("span",{staticClass:"value"},[e._v(e._s(e.info.version))])])],1)],1),t("div",{staticClass:"descriptions-con"},[t("el-row",{staticClass:"descriptions-row",attrs:{gutter:24}},[t("el-col",{staticClass:"descriptions",attrs:{md:24,lg:12}},[t("span",{staticClass:"label"},[e._v("方法")]),t("span",{staticClass:"value"},[e._v(e._s(e.curJson.method))])]),t("el-col",{staticClass:"descriptions",attrs:{md:24,lg:12}},[t("span",{staticClass:"label"},[e._v("请求地址")]),t("span",{staticClass:"value"},[e._v(e._s(e.service?e.service+e.curJson.path:e.curJson.path))])])],1)],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.curJson.description,expression:"curJson.description"}],staticClass:"desc"},[t("h3",{staticClass:"container-title"},[e._v("接口描述")]),t("p",{staticClass:"desc-text"},[e._v(e._s(e.curJson.description))])]),t("div",{staticClass:"container"},[t("h3",{staticClass:"container-title"},[e._v("请求参数")]),t("el-table",{staticStyle:{width:"100%"},attrs:{"default-expand-all":"",data:e.requestTableData(),"row-key":"nodeKey",border:"","tree-props":{children:"children",hasChildren:"hasChildren"},size:"small"}},[t("el-table-column",{attrs:{prop:"name",label:"参数名称"}}),t("el-table-column",{attrs:{prop:"description",label:"描述"}}),t("el-table-column",{attrs:{prop:"in",label:"请求类型"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"}}),t("el-table-column",{attrs:{prop:"required",label:"是否必填",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.required?"是":!1===t.row.required?"否":"")+"\n          ")]}}])}),t("el-table-column",{attrs:{prop:"example",label:"示例值"}})],1)],1),t("div",{staticClass:"container"},[t("h3",{staticClass:"container-title"},[e._v("响应状态")]),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",size:"small","default-expand-all":"",data:e.responseStatus}},[t("el-table-column",{attrs:{prop:"status",label:"状态",width:"70px"}}),t("el-table-column",{attrs:{prop:"description",label:"说明"}}),t("el-table-column",{attrs:{prop:"schema",label:"schema"}})],1)],1),t("div",{staticClass:"container"},[t("h3",{staticClass:"container-title"},[e._v("响应参数")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.responseParams,"row-key":"nodeKey",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},size:"small"}},[t("el-table-column",{attrs:{prop:"name",label:"参数名"}}),t("el-table-column",{attrs:{prop:"description",label:"参数说明"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"}}),t("el-table-column",{attrs:{prop:"schema",label:"schema"}})],1)],1),t("div",{staticClass:"container"},[t("h3",{staticClass:"container-title"},[e._v("响应示例")]),e.responseDemo?t("data-editor",{attrs:{content:e.responseDemo,height:300,disabled:""}}):t("avue-empty",{staticStyle:{"text-align":"center"}})],1)])],1)},i=[],r=(a("8e6e"),a("456d"),a("6762"),a("2fdb"),a("28a5"),a("bd86")),o=a("768b"),s=(a("ffc1"),a("ac6a"),a("75fc")),c=a("307b"),l=a("4627"),u=a("c54a"),d=a("0e0b");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={isShow:1,isAuth:1,isSupportDebug:1,remark:""},b={name:"inter-info",components:{dataEditor:l["default"]},props:{curJson:{type:Object,default:function(){return{}}},docJson:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},otherInfo:{type:Object,defualt:function(){return{}}},showOtherInfo:{type:Boolean,default:!1},authInfo:{type:Object,default:function(){return{}}},securityDefinitions:{type:Object,default:function(){return{}}},service:{type:String,default:""}},data:function(){return{currentNodeKey:"",defaultExpandedKeys:[],defaultProps:{children:"children",label:"name"},form:Object(c["a"])(h),rules:{isShow:[{required:!0,message:"必填",trigger:"change"}],isAuth:[{required:!0,message:"必填",trigger:"change"}],isSupportDebug:[{required:!0,message:"必填",trigger:"change"}]},reqParameters:[],authRequest:[],responseObject:"",nodeKey:0,formMap:{},responoseSchema:{}}},computed:{isEmpty:function(){return Object(u["o"])(this.curJson)},requestData:function(){var e=[].concat(Object(s["a"])(this.securityRequests),Object(s["a"])(this.authRequest),Object(s["a"])(this.businessRequests));return this.$emit("emitRequest",e||[]),e},securityRequests:function(){var e=[];return Object.entries(this.securityDefinitions).forEach((function(t){var a=Object(o["a"])(t,2),n=a[0],i=a[1];e.push(f(f({name:n},i),{},{nodeKey:Object(d["e"])(),hide:!0}))})),e},businessRequests:function(){return this.curJson&&this.curJson.parameters?this.formatParamtersToRequest(this.curJson.parameters):[]},responseStatus:function(){var e=this,t=[];return this.curJson&&this.curJson.responses&&Object.entries(this.curJson.responses).forEach((function(a){var n=Object(o["a"])(a,2),i=n[0],r=n[1];t.push({status:i,description:r.description||"",schema:r.schema&&r.schema.originalRef?r.schema.originalRef:""}),"200"===i&&(e.responseObject=e.getOriginalRef(r))})),t},responseParams:function(){var e=[];if(this.responseObject&&this.docJson.definitions&&this.docJson.definitions[this.responseObject]){var t=this.docJson.definitions[this.responseObject];e=this.renderResponseParams(t)}else this.responoseSchema&&(e=this.renderProperties(this.responoseSchema));return e},responseDemo:function(){var e="";return this.responseParams.length>0&&(e=this.renderResponseObjectDemo(this.responseParams)),e},paths:function(){return this.docJson.paths||{}},info:function(){return this.docJson.info||{}}},watch:{form:{deep:!0,handler:function(){this.curJson.path&&this.showOtherInfo&&(this.formMap[this.curJson.path]=Object(c["a"])(this.form),this.emitData())}},otherInfo:{deep:!0,immediate:!0,handler:function(){this.showOtherInfo&&(this.formMap=this.otherInfo,this.emitData())}},curJson:{deep:!0,immediate:!0,handler:function(){var e=this;this.formMap[this.curJson.path]?this.form=Object(c["a"])(this.formMap[this.curJson.path]):this.form=Object(c["a"])(h),this.responseObject="",this.responoseSchema={},this.curJson&&this.curJson.responses&&Object.entries(this.curJson.responses).forEach((function(t){var a=Object(o["a"])(t,2),n=a[0],i=a[1];"200"===n&&(e.responoseSchema=i)}))}},authInfo:{deep:!0,immediate:!0,handler:function(){if(this.authInfo&&this.authInfo.content){var e=JSON.parse(this.authInfo.content||[]),t=e.query,a=void 0===t?[]:t,n=e.header,i=void 0===n?[]:n,r=[];a.forEach((function(e){r.push({name:e.name,type:"string",required:!0,description:e.description,in:"query",example:e["x-example"]||e.example,nodeKey:Object(d["e"])()})})),i.forEach((function(e){r.push({name:e.name,type:"string",required:!0,description:e.description,in:"header",example:e["x-example"]||e.example,nodeKey:Object(d["e"])()})})),this.authRequest=r}}}},methods:{getOriginalRef:function(e){var t="",a=e.$ref||e.schema&&(e.schema.$ref||e.schema.items&&e.schema.items.$ref)||e.items&&e.items.$ref;if(a){var n=a.split("/");t=n[n.length-1]}return t},formatParamtersToRequest:function(e){var t=this,a=[];return e&&e.forEach((function(e){var n={name:e.name,type:e.type,required:e.required,description:e.description,example:e["x-example"]||e.example,in:e.in,nodeKey:Object(d["e"])()},i=t.getOriginalRef(e);if(i&&t.docJson.definitions[i]){var r=t.renderParamsChildren(e,i,e.in);r&&r.length>0&&(n.children=r)}else n.children=t.renderProperties(e,e.in);a.push(n)})),a},renderProperties:function(e,t){var a=this,n=[];if(e.schema||e){var i=e.schema||e,r=i.properties,s=void 0===r?{}:r,c=i.required,l=void 0===c?[]:c;Object.entries(s).forEach((function(i){var r=Object(o["a"])(i,2),s=r[0],c=r[1],u=l.includes(s),p={name:s,type:c.type,required:u,description:c.description,example:c["x-example"]||c.example,in:e.in||t,nodeKey:Object(d["e"])()};["object","array"].includes(c.type)&&(p.children=[],p.children=a.renderProperties({properties:c.properties,required:c.required},t)),n.push(p)}))}return n},renderParamsChildren:function(e,t,a){var n=this,i=[],r=this.docJson.definitions[t],s=r.properties,c=void 0===s?{}:s,l=r.required,u=void 0===l?[]:l;return Object.entries(c).forEach((function(t){var r=Object(o["a"])(t,2),s=r[0],c=r[1],l=u.includes(s),p={name:s,type:c.type,required:l,description:c.description,example:c["x-example"]||c.example,in:e.in||a,nodeKey:Object(d["e"])()},f=n.getOriginalRef(c);f&&n.docJson.definitions[f]&&(p.children=[],p.children=n.renderParamsChildren(c,f,e.in||a)),i.push(p)})),i},requestTableData:function(){return this.requestData.filter((function(e){return!e.hide}))||[]},renderResponseParams:function(e){var t=this,a=[],n=e.type,i=e.properties;return"object"===n&&Object.entries(i).forEach((function(e){var n=Object(o["a"])(e,2),i=n[0],r=n[1],s=t.getOriginalRef(r),c={type:r.type||r.originalRef,description:r.description,name:i,example:r["x-example"]||r.example||"",schema:s,nodeKey:++t.nodeKey};s?t.docJson.definitions&&t.docJson.definitions[s]&&(c.children=[],c.children=t.renderResponseParams(t.docJson.definitions[s])):(c.children=[],c.children=t.renderProperties(r)),a.push(c)})),a},renderDefaultValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)&&e.length>0&&(e=e[0]),["integer","float","long","short","byte","character","number"].includes(e)?t.example||0:"string"===e?t.example||"":"boolean"===e?t.example||!0:"array"===e?t.example||[]:{}},renderResponseDemo:function(e){var t=this,a={};return e.forEach((function(e){a[e.name]=t.renderDefaultValue(e.type,e),e.children&&e.children.length>0&&(Array.isArray(a[e.name])?a[e.name]=[t.renderResponseDemo(e.children)]:a[e.name]=t.renderResponseDemo(e.children))})),a},renderResponseObjectDemo:function(e){var t=this,a={};return e.forEach((function(e){a[e.name]=t.renderDefaultValue(e.type,e),e.children&&e.children.length>0&&(Array.isArray(a[e.name])?a[e.name]=[t.renderResponseObjectDemo(e.children)]:a[e.name]=t.renderResponseObjectDemo(e.children))})),a},renderResponseArrayDemo:function(e,t){var a=this;if(!Array.isArray(t))return[this.renderResponseObjectDemo(e)];var n=[];return t.forEach((function(e){n.push(a.renderDefaultValue(e.type,e))})),n},emitData:function(){this.$emit("changeOtherInfo",this.formMap)}},mounted:function(){this.showOtherInfo&&this.$emit("getDefaultOhterInfo",h)}},m=b,g=(a("d3fc"),a("3863"),a("2877")),v=Object(g["a"])(m,n,i,!1,null,"7e81a223",null);t["default"]=v.exports},"87f1":function(e,t,a){"use strict";a("6541")},"8a56":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("5880"),s=a("16cd"),c=a("1eab");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"authentication",data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:900,border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,column:[{label:"名称",prop:"name",search:!0,overHidden:!0,rules:[{required:!0,message:"必填",trigger:"blur"}]},{label:"描述",prop:"description",search:!0,overHidden:!0,rules:[{required:!0,message:"必填",trigger:"blur"}]}]},data:[{}]}},computed:u(u({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.interface_authentication_add,!1),editBtn:this.vaildData(this.permission.interface_authentication_edit,!1),viewBtn:this.vaildData(this.permission.interface_authentication_view,!1),delBtn:this.vaildData(this.permission.interface_authentication_remove,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{handleSubmitData:function(e){return e=Object(s["c"])(e),e},rowDel:function(e){var t=this;this.$confirm("你确定要删除此认证信息吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["d"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){this.$router.push({path:"/interface/authentication/".concat(t),query:{id:this.form.id}})},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))}}},p=d,f=a("2877"),h=Object(f["a"])(p,n,i,!1,null,"20acdd30",null);t["default"]=h.exports},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},"93ff":function(e,t,a){"use strict";a("a7b3")},9579:function(e,t,a){},a176:function(e,t,a){},a2ea:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b5c6"),r=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/env-info/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/env-info/save"),method:"post",data:e})},u=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/env-info/update"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/env-info/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(i["a"])({url:"".concat(r["a"],"/open-doc/env-info/detail/").concat(e),method:"get"})}},a7b3:function(e,t,a){},a8db:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("ed33"),i=a.n(n),r=a("8aae"),o=a.n(r);function s(e,t){if(null==e)return{};var a,n,i={},r=o()(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}function c(e,t){if(null==e)return{};var a,n,r=s(e,t);if(i.a){var o=i()(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},a9ec:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"form",attrs:{disabled:e.disabled,model:e.form,rules:e.rules,size:"small","label-width":"150px"}},[t("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入 服务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("div",{staticClass:"key-tips"},[e._v("服务名称用于文档集展示时文档列表显示，如： 会员接口文档")])],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("el-form-item",{attrs:{label:"版本",prop:"version"}},[t("el-input",{attrs:{placeholder:"请输入 版本"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}}),t("div",{staticClass:"key-tips"},[e._v("当版本变更后旧版本会生成历史记录，建议格式为 vX.Y.Z , 如： v1.0.0")])],1),t("el-form-item",{attrs:{label:"认证信息",prop:"authInfoId"}},[t("pagination-select",{attrs:{value:e.form.authInfoId,dataList:e.authInfo.data,pageInfo:e.authInfo.pageInfo,labelKey:e.authInfo.labelKey,valueKey:e.authInfo.valueKey,showPagination:!1,placeholder:"请选择 认证信息"},on:{"update:value":function(t){return e.$set(e.form,"authInfoId",t)},selectPageChange:e.authPageChange}})],1),t("el-form-item",{staticClass:"env-row",attrs:{label:"环境信息",prop:"envInfoIds"}},[t("div",{staticClass:"env-select"},[t("pagination-select",{attrs:{value:e.form.envInfoIds,dataList:e.envInfo.data,pageInfo:e.envInfo.pageInfo,labelKey:e.envInfo.labelKey,valueKey:e.envInfo.valueKey,showPagination:!1,placeholder:"请选择 环境信息",multiple:""},on:{"update:value":function(t){return e.$set(e.form,"envInfoIds",t)},selectPageChange:e.envPageChange}})],1),t("el-button",{staticClass:"add-env-btn",attrs:{type:"primary",size:"small"},on:{click:e.addEnv}},[e._v("新增环境")])],1),t("el-form-item",{attrs:{label:"文档来源",prop:"sourceType"}},[t("el-radio-group",{attrs:{placeholder:"请选择 文档来源"},on:{change:e.changeSource},model:{value:e.form.sourceType,callback:function(t){e.$set(e.form,"sourceType",t)},expression:"form.sourceType"}},[t("el-radio",{attrs:{label:1}},[e._v("服务")]),t("el-radio",{attrs:{label:2}},[e._v("API")]),t("el-radio",{attrs:{label:3}},[e._v("LOCAL")])],1)],1),1===e.form.sourceType?t("div",{staticClass:"form-item-required service"},[t("el-form-item",{attrs:{label:"服务"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("el-form-item",{attrs:{label:"",prop:"registryName"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择 注册中心",clearable:""},on:{change:e.changeRegister},model:{value:e.form.registryName,callback:function(t){e.$set(e.form,"registryName",t)},expression:"form.registryName"}},e._l(e.registerList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.value,value:e.value}})})),1)],1)],1),t("div",{staticClass:"col"},[t("el-form-item",{attrs:{label:"",prop:"service"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择 服务名"},model:{value:e.form.service,callback:function(t){e.$set(e.form,"service",t)},expression:"form.service"}},e._l(e.serviceList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("div",{staticClass:"col json-col"},[t("el-form-item",{attrs:{label:"",prop:"serviceApiDocPath"}},[t("el-input",{attrs:{placeholder:"服务文档请求路径"},model:{value:e.form.serviceApiDocPath,callback:function(t){e.$set(e.form,"serviceApiDocPath",t)},expression:"form.serviceApiDocPath"}}),t("div",{staticClass:"key-tips"},[e._v("后端 swagger 请求地址，如：/fizz-manager/v2/api-docs?group=授权模块")])],1)],1),t("span",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getDocByService}},[e._v("获 取")])],1)])])],1):e._e(),2===e.form.sourceType?t("div",{staticClass:"form-item-required api"},[t("el-form-item",{attrs:{label:"OpenAPI接口地址"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col api-col"},[t("el-form-item",{attrs:{label:"",prop:"apiDocUrl"}},[t("el-input",{attrs:{placeholder:"请输入 OpenAPI接口地址"},model:{value:e.form.apiDocUrl,callback:function(t){e.$set(e.form,"apiDocUrl",t)},expression:"form.apiDocUrl"}}),t("div",{staticClass:"key-tips"},[e._v("后端 swagger 的完整请求地址，如： http://172.0.0.1:6666/fizz-manager/v2/api-docs?group=授权模块")])],1)],1),t("span",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getDocByApi}},[e._v("获 取")])],1)])])],1):e._e(),3===e.form.sourceType?t("div",{staticClass:"form-item-required local"},[t("el-form-item",{attrs:{label:"OpenAPI-V2(JSON)"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col api-col"},[t("el-form-item",{attrs:{label:"",prop:"apiDocJson"}},[t("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.form.apiDocJson,callback:function(t){e.$set(e.form,"apiDocJson",t)},expression:"form.apiDocJson"}}),t("div",{staticClass:"key-tips"},[e._v(" swagger json 数据可复制到文本框进行解析 ")])],1)],1),t("span",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadInter}},[e._v("加 载")])],1)])])],1):e._e()],1),e.visible?t("addressDetail",{attrs:{type:"add",visible:e.visible},on:{doSearch:e.searchEnv,changeDrawer:function(t){e.visible=!1}}}):e._e()],1)},i=[],r=(a("ac6a"),a("684b")),o=a("7f9e"),s=a("3bfd"),c=a("a2ea"),l=a("1eab"),u=a("52f7"),d=a("307b"),p=a("c54a"),f=a("0a6a"),h={name:"document-base",components:{paginationSelect:r["default"],addressDetail:o["default"]},props:{disabled:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}}},data:function(){return{form:{envInfoIds:[],sourceType:1},rules:{name:[{required:!0,message:"必填",trigger:"blur"}],version:[{required:!0,message:"必填",trigger:"blur"}],envInfoIds:[{required:!0,message:"必填",trigger:"change"}],sourceType:[{required:!0,message:"必填",trigger:"change"}],registryName:[{required:!0,message:"必填",trigger:"change"}],service:[{required:!0,message:"必填",trigger:"change"}],serviceApiDocPath:[{required:!0,message:"必填",trigger:"change"}],apiDocUrl:[{required:!0,message:"必填"}],apiDocJson:[{required:!0,message:"必填"}]},envInfo:{data:[],pageInfo:{pageNo:1,pageSize:-1,total:0},labelKey:"env",valueKey:"id"},authInfo:{data:[],pageInfo:{pageNo:1,pageSize:-1,total:0},labelKey:"name",valueKey:"id"},serviceList:[],documentName:"",docJson:{},registerList:[],visible:!1}},watch:{data:{deep:!0,handler:function(){this.form=Object(d["a"])(this.data)}},"form.registryName":{deep:!0,immediate:!0,handler:function(){this.fetchDiscoveryServiceOptions(this.form.registryName)}}},methods:{getAddressList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(c["c"])(this.envInfo.pageInfo.pageNo,this.envInfo.pageInfo.pageSize,{env:t}).then((function(t){if(200===t.data.code){var a=t.data.data;e.envInfo.data=a.records,e.envInfo.pageInfo.total=a.total}else e.$message({type:"error",message:t.data.msg||"获取环境列表失败！！"})}))},getAuthList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(l["c"])(this.authInfo.pageInfo.pageNo,this.authInfo.pageInfo.pageSize,{name:t}).then((function(t){if(200===t.data.code){var a=t.data.data;e.authInfo.data=a.records,e.authInfo.pageInfo.total=a.total}else e.$message({type:"error",message:t.data.msg||"获取认证信息列表失败！！"})}))},fetchDiscoveryServiceOptions:function(e){var t=this;e?Object(s["d"])({registryName:e}).then((function(e){200===e.data.code?t.serviceList=e.data.data:t.$message({type:"error",message:e.data.msg||"获取服务列表失败！"})})):this.serviceList=[]},envPageChange:function(e,t,a){this.envInfo.pageInfo.pageNo=e,this.envInfo.pageInfo.pageSize=t,this.getAddressList(a)},authPageChange:function(e,t,a){this.authInfo.pageInfo.pageNo=e,this.authInfo.pageInfo.pageSize=t,this.getAuthList(a)},searchEnv:function(){this.envInfo.pageInfo.pageNo=1,this.getAddressList()},getDocByService:function(){var e=this;this.form.registryName&&this.form.service&&this.form.serviceApiDocPath?Object(u["d"])({service:this.form.service,serviceApiDocPath:this.form.serviceApiDocPath}).then((function(t){200===t.data.code?(e.docJson=JSON.parse(t.data.data.jsonStr),e.loadInter()):e.$message({type:"error",message:t.data.msg||"获取指定服务的api-docs响应 失败！"})})):this.$message({type:"warning",message:"请完善服务信息！"})},getDocByApi:function(){var e=this;this.form.apiDocUrl?Object(u["c"])({apiDocUrl:this.form.apiDocUrl}).then((function(t){200===t.data.code?(e.docJson=JSON.parse(t.data.data.jsonStr),e.loadInter()):e.$message({type:"error",message:t.data.msg||"获取指定API的api-docs响应 失败！"})})):this.$message({type:"warning",message:"请完善OpenAPI接口地址！"})},changeSource:function(){this.docJson={}},loadInter:function(){try{if(3===this.form.sourceType){var e="";if(this.form.apiDocJson||(e="OpenAPI-V2(JSON) 不能为空！"),Object(p["k"])(this.form.apiDocJson)||(e="OpenAPI-V2(JSON) 数据格式有问题！"),e)return void this.$message({showClose:!0,message:e,type:"warning"});this.docJson=JSON.parse(this.form.apiDocJson)}this.$emit("goInter",this.docJson)}catch(t){console.log(t)}},addEnv:function(){this.visible=!0},validate:function(){var e=this;return new Promise((function(t,a){e.$refs.form.validate((function(n){n?(e.emitData(),t()):a("请完善基本信息！")}))}))},getRegisterNameList:function(){var e=this;Object(f["d"])().then((function(t){if(200===t.data.code){var a=t.data.data;a.forEach((function(t){e.registerList.push({label:t,value:t})}))}}))},changeRegister:function(e){this.$set(this.form,"service",""),this.fetchDiscoveryServiceOptions(e)},emitData:function(){this.$emit("update:data",this.form)}},mounted:function(){this.getAddressList(),this.getAuthList(),this.getRegisterNameList()}},b=h,m=(a("af48"),a("56be"),a("2877")),g=Object(m["a"])(b,n,i,!1,null,"313f4f38",null);t["default"]=g.exports},abd3:function(e,t,a){},aca0:function(e,t,a){"use strict";a("f60a")},acb5:function(e,t,a){"use strict";a("ed4b")},ad53:function(e,t,a){"use strict";a("8040")},aefb:function(e,t,a){"use strict";a("9579")},af48:function(e,t,a){"use strict";a("5e55")},b069:function(e,t,a){"use strict";a("e29e")},b22c:function(e,t,a){},b539:function(e,t,a){},bf76:function(e,t,a){"use strict";a.r(t);a("386d");var n=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{title:"添加appid",direction:"rtl","modal-append-to-body":!1,"append-to-body":!0,size:"900px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("avue-crud",{ref:"crud",attrs:{data:e.data,page:e.page,search:e.search,option:e.option,"table-loading":e.loading},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.search=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"tags",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.tags.join(","))+"\n      ")]}},{key:"useWhiteList",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.useWhiteList?"是":"否")+"\n      ")]}},{key:"useAuth",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(a.useAuth?"是":"否")+"\n      ")]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"tagsSearch"},[t("el-input",{attrs:{placeholder:"标签",clearable:""},model:{value:e.query.tagCondition,callback:function(t){e.$set(e.query,"tagCondition",t)},expression:"query.tagCondition"}})],1)],2)],1),t("footer",{staticClass:"drawer-footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},i=[],r=a("24a7"),o=[{label:"MD5签名",value:1},{label:"密钥认证",value:3},{label:"自定义认证插件",value:2}],s={props:{visible:{type:Boolean,default:!1},app:{type:String,default:""}},data:function(){return{selections:[],form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,menu:!1,dialogWidth:900,border:!0,index:!0,dialogClickModal:!1,addBtn:!1,columnBtn:!1,menuPosition:"right",menuWidth:"280px",tip:!1,column:[{label:"appID",prop:"app",search:!0,overHidden:!0,searchSpan:12},{label:"应用名",prop:"appName",search:!0,overHidden:!0,searchSpan:12},{label:"标签",prop:"tags",search:!0,overHidden:!0,searchslot:!0,slot:!0,searchSpan:12},{label:"是否启用认证",prop:"useAuth",type:"switch",slot:!0},{label:"认证方式",prop:"authType",search:!0,type:"select",dicData:o,searchSpan:12},{label:"密钥",prop:"secretkey",overHidden:!0,hide:!0},{label:"是否启用IP白名单",prop:"useWhiteList",type:"switch",slot:!0},{label:"IP白名单",prop:"authIps",placeholder:"多个IP用逗号,分隔",overHidden:!0},{label:"自定义配置",prop:"customConfig",overHidden:!0}]},data:[],search:{}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{searchReset:function(){this.query={},this.onLoad(this.page)},selectionChange:function(e){this.selections=e},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["f"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))},confirm:function(){this.$emit("emitData",this.selections),this.dialogVisible=!1}}},c=s,l=(a("e090"),a("2877")),u=Object(l["a"])(c,n,i,!1,null,"1a764cbc",null);t["default"]=u.exports},c107:function(e,t,a){},c363:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"auth-detail"},[t("el-card",{staticClass:"main"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n       "),t("b",[e._v(e._s(e.title))])],1),t("el-form",{ref:"form",attrs:{size:"small","label-width":"60px",model:e.form,rules:e.rules,disabled:e.disabled}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"请求头",name:"header"}},[e.headerData.length>0?t("span",{attrs:{slot:"label"},slot:"label"},[t("el-badge",{attrs:{value:e.headerData.length,max:10,type:"success"}},[e._v("请求头")])],1):e._e(),t("request-table",{ref:"headerRef",attrs:{disabled:e.disabled,data:e.headerData},on:{"update:data":function(t){e.headerData=t}}})],1),t("el-tab-pane",{attrs:{label:"Query参数",name:"params"}},[e.queryData.length>0?t("span",{attrs:{slot:"label"},slot:"label"},[t("el-badge",{attrs:{value:e.queryData.length,max:10,type:"success"}},[e._v("Query参数")])],1):e._e(),t("request-table",{ref:"queryRef",attrs:{disabled:e.disabled,data:e.queryData},on:{"update:data":function(t){e.queryData=t}}})],1)],1)],1),e.disabled?e._e():t("footer",[t("el-button",{attrs:{icon:"el-icon-circle-check",type:"primary",size:"small"},on:{click:e.submit}},[e._v("保 存")]),t("el-button",{attrs:{icon:"el-icon-circle-close",size:"small"},on:{click:e.cancel}},[e._v("取 消")])],1)],1)},i=[],r=(a("8e6e"),a("6762"),a("2fdb"),a("bd86")),o=(a("96cf"),a("3b8d")),s=(a("5df3"),a("ac6a"),a("456d"),a("3657")),c=a("1eab");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"authDetail",components:{requestTable:s["default"]},computed:{disabled:function(){return"view"===this.$route.params.actionType},pageType:function(){return this.$route.params.actionType},id:function(){return this.$route.query.id},title:function(){var e="认证信息详情";switch(this.pageType){case"add":e="新增认证信息";break;case"edit":e="编辑认证信息";break;case"view":e="认证信息详情";break}return e}},data:function(){return{form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},loading:!1,activeTab:"header",headerData:[],queryData:[]}},methods:{getParamsKeys:function(e){var t=Object.keys(e.properties||{})||[];return t.length},cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/interface/authentication"})},submit:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=["headerRef","queryRef"],n=[];a.forEach((function(t){n.push(e.$refs[t].validate())})),Promise.all(n).then((function(){e.saveData()}))}}))},saveData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t="add"===this.pageType?c["a"]:c["e"],e.next=4,t(this.handleData()).then((function(){a.$message({type:"success",message:"保存成功！"}),a.cancel()}),(function(e){console.log(e),a.loading=!1}));case 4:this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleData:function(){return u(u({},this.form),{},{content:JSON.stringify({header:this.headerData,query:this.queryData})})},getDetail:function(){var e=this;Object(c["b"])(this.id).then((function(t){if(t.data&&200===t.data.code){var a=t.data.data,n=a.name,i=a.description,r=a.content,o=a.id;e.form={name:n,description:i,id:o};try{var s=JSON.parse(r||{}),c=s.header,l=s.query;e.headerData=c||[],e.queryData=l||[]}catch(u){console.error(u)}}else e.$message({type:"error",message:t.data.msg||"查看详情有误！"})}))}},mounted:function(){["view","edit"].includes(this.pageType)&&this.getDetail()}},p=d,f=(a("6ce6"),a("7b2b"),a("2877")),h=Object(f["a"])(p,n,i,!1,null,"009f7aa4",null);t["default"]=h.exports},c749:function(e,t,a){"use strict";a("6c4e")},c890:function(e,t,a){"use strict";a("2075")},c980:function(e,t,a){"use strict";a("5b4b")},cb7a:function(e,t,a){},ce7e:function(e,t,a){var n=a("63b6"),i=a("584a"),r=a("294c");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],o={};o[e]=t(a),n(n.S+n.F*r((function(){a(1)})),"Object",o)}},d121:function(e,t,a){},d3fc:function(e,t,a){"use strict";a("5fb3")},dc99:function(e,t,a){},dedb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{title:"添加专线业务",direction:"rtl","modal-append-to-body":!1,"append-to-body":!1,size:"900px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("avue-crud",{ref:"crud",attrs:{data:e.data,page:e.page,option:e.option,"table-loading":e.loading},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"selection-change":e.selectionChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),t("footer",{staticClass:"drawer-footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("\n      确 定\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n      取 消\n    ")])],1)])},i=[],r=a("7485"),o=a("1e18"),s={props:{visible:{type:Boolean,default:!1}},data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,border:!0,index:!0,dialogClickModal:!1,addBtn:!1,menuPosition:"right",labelWidth:100,menu:!1,searchSpan:12,column:[{label:"专线业务",prop:"name",search:!0},{label:"专线类型",prop:"type",search:!0,dicData:o["a"],type:"select"},{label:"是否公开",prop:"isPublic",dicData:o["b"]},{label:"文档集",prop:"docSetName"},{label:"联系邮箱",prop:"email"}]},data:[],selectionData:[]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}}},methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))},selectionChange:function(e){this.selectionData=e},submit:function(){0!==this.selectionData.length?(this.$emit("emitData",this.selectionData),this.dialogVisible=!1):this.$message.warning("请选择数据！")}}},c=s,l=(a("87f1"),a("2877")),u=Object(l["a"])(c,n,i,!1,null,"ef4921c6",null);t["default"]=u.exports},df10:function(e,t,a){"use strict";a("109e")},e077:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("basic-container",{staticClass:"dedicated-line-detail"},[t("el-card",{staticClass:"main"},[t("div",{attrs:{slot:"header"},slot:"header"},[e.form.name?t("el-tag",[e._v(e._s(e.form.name))]):e._e(),e._v(" \n            "),t("b",[e._v(e._s(e.title))])],1),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"106px",disabled:e.disabled}},[t("el-form-item",{attrs:{label:"专线名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入 专线名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("div",{staticClass:"key-tips"},[e._v("一般一个对接方用一条专线，可用公司名作为专线名称，如：XXXX公司")])],1),t("el-form-item",{attrs:{label:"颁发机构",prop:"org"}},[t("el-input",{attrs:{placeholder:"请输入 颁发机构"},model:{value:e.form.org,callback:function(t){e.$set(e.form,"org",t)},expression:"form.org"}}),t("div",{staticClass:"key-tips"},[e._v("颁发机构可自定义，如：XXXX公司，该机构名称展示在配对方的配对页面")])],1),t("el-form-item",{attrs:{label:"网关地址",prop:"gatewayUrl"}},[t("div",{staticClass:"url-form"},[t("el-input",{attrs:{placeholder:"请输入 网关地址"},model:{value:e.form.gatewayUrl,callback:function(t){e.$set(e.form,"gatewayUrl",t)},expression:"form.gatewayUrl"}}),t("span",{staticClass:"url"},[e._v("/_fizz-dedicated-line/pair")])],1),t("div",{staticClass:"key-tips"},[e._v("输入网关的公网地址，如：https://网关域名[:端口]/proxy（如果网关前缀/proxy已修改, 则改为相应的前缀）")])]),t("el-form-item",{staticClass:"form-item-required",attrs:{label:"专线业务"}},[e.disabled?e._e():t("el-button",{staticClass:"line-add-btn",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addLine}},[e._v("添 加")]),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.form.dedicatedLineBizs,size:"mini"}},[t("el-table-column",{attrs:{prop:"dedicatedLineBizName",label:"业务名称"}}),t("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.delBusRow(n)}}},[e._v("删除")])]}}])})],1)],1),t("el-form-item",{attrs:{label:"最多配对次数",prop:"maxCount"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:e.form.maxCount,callback:function(t){e.$set(e.form,"maxCount",t)},expression:"form.maxCount"}}),t("span",{staticClass:"unit"},[e._v("次")])],1),t("el-form-item",{attrs:{label:"自定义配置",prop:"customConfig"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 自定义配置",rows:5},model:{value:e.form.customConfig,callback:function(t){e.$set(e.form,"customConfig",t)},expression:"form.customConfig"}}),t("div",{staticClass:"key-tips"},[e._v("\n                    自定义配置供自定义插件使用，所有插件均可获取到此配置信息\n                     "),t("tooltip-custom",{staticClass:"link",attrs:{title:"插件实例"}})],1)],1)],1),e.disabled?e._e():t("footer",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check",loading:e.loading},on:{click:e.submitHandle}},[e._v("保 存")]),t("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:e.cancel}},[e._v(" 取 消 ")])],1)],1),e.businessVisible?t("addBusinessDialog",{attrs:{visible:e.businessVisible},on:{changeDrawer:function(t){e.businessVisible=!1},emitData:e.changeBusiness}}):e._e()],1)},i=[],r=(a("8e6e"),a("456d"),a("6762"),a("2fdb"),a("20d6"),a("bd86")),o=(a("ac6a"),a("96cf"),a("3b8d")),s=a("2f32"),c=a("dd62"),l=a("dedb"),u=a("16cd");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={name:"matchDetail",components:{tooltipCustom:c["default"],addBusinessDialog:l["default"]},data:function(){return{disabled:!1,loading:!1,form:{maxCount:1,dedicatedLineBizs:[]},rules:{name:[{required:!0,message:"请输入 专线名称",trigger:"blur"}],org:[{required:!0,message:"请输入 颁发机构",trigger:"blur"}],gatewayUrl:[{required:!0,message:"请输入 网关地址",trigger:"blur"}],dedicatedLineBizs:[{required:!0,message:"必填"}],maxCount:[{required:!0,message:"请输入 最多配对次数",trigger:"blur"}]},businessVisible:!1}},computed:{title:function(){var e="";switch(this.type){case"add":e="新增配对码";break;case"edit":e="修改配对码";break;case"view":e="配对码详情";break}return e},type:function(){return this.$route.params.actionType},id:function(){return this.$route.query.id}},methods:{getDetail:function(){var e=this;Object(s["b"])(this.id).then((function(t){200===t.data.code&&(e.form=t.data.data)}))},submitHandle:function(){var e=this;this.$refs.form.validate((function(t){if(t){if(0===e.form.dedicatedLineBizs.length)return void e.$message.warning("专线业务列表不能为空！");e.saveHandle()}}))},saveHandle:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t="add"===this.type?s["a"]:s["g"],a=[],this.form.dedicatedLineBizs.forEach((function(e){a.push({dedicatedLineBizId:e.dedicatedLineBizId,dedicatedLineBizName:e.dedicatedLineBizName})})),this.form.customConfig=Object(u["b"])(this.form.customConfig)||"",e.next=7,t(p(p({},this.form),{},{dedicatedLineBizs:a})).then((function(e){200===e.data.code?(n.$message({type:"success",message:e.data.msg||"保存成功！"}),"add"===n.type?n.cancel():n.init()):n.$message({type:"error",message:e.data.msg||"保存失败！"}),n.loading=!1}),(function(){n.loading=!1}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/public-network/dedicated-line"})},delBusRow:function(e){this.form.dedicatedLineBizs.splice(e,1)},addLine:function(){this.businessVisible=!0},changeBusiness:function(e){var t=this;e.forEach((function(e){var a=t.form.dedicatedLineBizs.findIndex((function(t){return t.dedicatedLineBizId===e.id}));-1===a&&t.form.dedicatedLineBizs.push({dedicatedLineBizName:e.name,dedicatedLineBizId:e.id})}))},init:function(){["edit","view"].includes(this.type)?this.getDetail():this.showApi=!0,"view"===this.type&&(this.disabled=!0)}},beforeRouteUpdate:function(e,t,a){e.fullPath!==t.fullPath&&(a(),this.init())},mounted:function(){this.init()}},h=f,b=(a("0457"),a("1d77"),a("2877")),m=Object(b["a"])(h,n,i,!1,null,"4abc804e",null);t["default"]=m.exports},e090:function(e,t,a){"use strict";a("fc6f")},e29e:function(e,t,a){},e35c:function(e,t,a){"use strict";a("30b1")},e38d:function(e,t,a){},e683:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return u}));var n=[{label:"固定值",value:"fixed"},{label:"引用值",value:"ref"}],i={fixed:[{label:"number",value:"number"},{label:"string",value:"string"},{label:"boolean",value:"boolean"}],ref:[{label:"int",value:"int"},{label:"long",value:"long"},{label:"float",value:"float"},{label:"double",value:"double"},{label:"string",value:"string"},{label:"boolean",value:"boolean"},{label:"array",value:"array"}]},r=[{label:"等于 =",value:"eq"},{label:"大于 >",value:"gt"},{label:"大于或等于 >=",value:"ge"},{label:"小于 <",value:"lt"},{label:"小于或等于 <=",value:"le"},{label:"不等于 !=",value:"ne"},{label:"包含",value:"contains"},{label:"不包含",value:"notContain"},{label:"包含任何一个",value:"containsAny"},{label:"is null",value:"isNull"},{label:"is not null",value:"isNotNull"},{label:"is blank",value:"isBlank"},{label:"is not blank",value:"isNotBlank"},{label:"is empty",value:"isEmpty"},{label:"is not empty",value:"isNotEmpty"}],o=[{label:"固定值",value:"fixed"},{label:"引用值",value:"quote"},{label:"脚本",value:"script"},{label:"函数",value:"fn"}],s=[{label:"raw",value:"raw"},{label:"int",value:"int"},{label:"long",value:"long"},{label:"float",value:"float"},{label:"double",value:"double"},{label:"string",value:"string"},{label:"boolean",value:"boolean"}],c=[{label:"number",value:"number"},{label:"string",value:"string"},{label:"boolean",value:"boolean"},{label:"json",value:"json"}],l=[{label:"固定值",value:"fixed"},{label:"引用值",value:"ref"},{label:"函数",value:"func"}],u=[{label:"100 - Continue",value:100},{label:"101 - Switching Protocols",value:101},{label:"102 - Processing",value:102},{label:"103 - Checkpoint",value:103},{label:"200 - OK",value:200},{label:"201 - Created",value:201},{label:"202 - Accepted",value:202},{label:"203 - Non-Authoritative Information",value:203},{label:"204 - No Content",value:204},{label:"205 - Reset Content",value:205},{label:"206 - Partial Content",value:206},{label:"207 - Multi-Status",value:207},{label:"208 - Already Reported",value:208},{label:"226 - IM Used",value:226},{label:"300 - Multiple Choices",value:300},{label:"301 - Moved Permanently",value:301},{label:"302 - Found",value:302},{label:"302 - Moved Temporarily",value:302},{label:"303 - See Other",value:303},{label:"304 - Not Modified",value:304},{label:"305 - Use Proxy",value:305},{label:"307 - Temporary Redirect",value:307},{label:"308 - Permanent Redirect",value:308},{label:"400 - Bad Request",value:400},{label:"401 - Unauthorized",value:401},{label:"402 - Payment Required",value:402},{label:"403 - Forbidden",value:403},{label:"404 - Not Found",value:404},{label:"405 - Method Not Allowed",value:405},{label:"406 - Not Acceptable",value:406},{label:"407 - Proxy Authentication Required",value:407},{label:"408 - Request Timeout",value:408},{label:"409 - Conflict",value:409},{label:"410 - Gone",value:410},{label:"411 - Length Required",value:411},{label:"412 - Precondition Failed",value:412},{label:"413 - Payload Too Large",value:413},{label:"413 - Request Entity Too Large",value:413},{label:"414 - URI Too Long",value:414},{label:"414 - Request-URI Too Long",value:414},{label:"415 - Unsupported Media Type",value:415},{label:"416 - Requested range not satisfiable",value:416},{label:"417 - Expectation Failed",value:417},{label:"418 - I'm a teapot",value:418},{label:"419 - Insufficient Space On Resource",value:419},{label:"420 - Method Failure",value:420},{label:"421 - Destination Locked",value:421},{label:"422 - Unprocessable Entity",value:422},{label:"423 - Locked",value:423},{label:"424 - Failed Dependency",value:424},{label:"425 - Too Early",value:425},{label:"426 - Upgrade Required",value:426},{label:"428 - Precondition Required",value:428},{label:"429 - Too Many Requests",value:429},{label:"431 - Request Header Fields Too Large",value:431},{label:"451 - Unavailable For Legal Reasons",value:451},{label:"500 - Internal Server Error",value:500},{label:"501 - Not Implemented",value:501},{label:"502 - Bad Gateway",value:502},{label:"503 - Service Unavailable",value:503},{label:"504 - Gateway Timeout",value:504},{label:"505 - HTTP Version not supported",value:505},{label:"506 - Variant Also Negotiates",value:506},{label:"507 - Insufficient Storage",value:507},{label:"508 - Loop Detected",value:508},{label:"509 - Bandwidth Limit Exceeded",value:509},{label:"510 - Not Extended",value:510},{label:"511 - Network Authentication Required",value:511}]},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols},ed4b:function(e,t,a){},f38d:function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"match-api"},[e.disabled?e._e():t("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.documentVisible=!0}}},[e._v("添加")]),t("el-form",{ref:"form",attrs:{disabled:e.disabled,size:"small","label-width":"60px"}},[0===e.documentList.length?t("avue-empty"):t("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.fistLoading,expression:"fistLoading"}],ref:"tabs",staticClass:"api-tab",attrs:{"tab-position":"left",closable:!e.disabled},on:{"tab-remove":e.removeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.documentList,(function(a){return t("el-tab-pane",{key:a.id,ref:"tabPane",refInFor:!0,attrs:{label:a.name,name:a.id,disabled:e.fistLoading||e.apiLoading}},[t("span",{staticClass:"tab-pane-title",attrs:{slot:"label",title:a.name},slot:"label"},[e._v(e._s(a.name))]),t("div",{staticClass:"tab-con"},[t("div",{staticClass:"interface-table"},[t("div",{staticClass:"key-tips"},[e._v("请勾选文档集包含的接口")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.apiLoading,expression:"apiLoading"}],ref:"multipleTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{border:"",data:e.openDocApis,"tooltip-effect":"dark",size:"small","row-key":function(e){return e.path+"_"+e.method}},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"接口名称",prop:"name"}}),t("el-table-column",{attrs:{label:"API路径",prop:"path"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.path)+" ")]}}],null,!0)}),t("el-table-column",{attrs:{label:"请求方法",prop:"method"}})],1)],1)])])})),1)],1),e.documentVisible?t("documentDialog",{attrs:{visible:e.documentVisible},on:{changeDrawer:function(t){e.documentVisible=!1},emitData:e.changeDocumentList}}):e._e()],1)},i=[],r=(a("456d"),a("ffc1"),a("20d6"),a("8615"),a("5df3"),a("ac6a"),a("c5f6"),a("3ec6")),o=a("52f7"),s=a("c54a"),c={name:"api",components:{documentDialog:r["default"]},props:{disabled:{type:Boolean,defaut:!1},data:{type:Array,default:function(){return[]}},isPair:{type:Number,default:1}},data:function(){return{multipleSelection:[],openDocApis:[],documentList:[],activeTab:"",openDocs:{},documentVisible:!1,apiLoading:!1,allDocs:{},fistLoading:!1,isUpdateData:!0}},watch:{activeTab:function(e){if(this.allDocs[e]&&this.openDocs[e]){var t=this.allDocs[e];this.openDocApis=t,this.syncData(e);var a=this.openDocs[e].openDocApis;this.setColumnSelect(a)}else e&&this.getDocumentDetail()},data:{deep:!0,immediate:!0,handler:function(e){var t=this;if(this.documentList=[],e.forEach((function(e){t.documentList.push({id:e.openDocId,name:e.openDocName}),t.openDocs[e.openDocId]={openDocApis:e.openDocApis,openDocId:e.openDocId,apiAuthId:e.apiAuthId,service:e.service,id:e.id||void 0}})),this.documentList.length>0&&this.isUpdateData&&this.documentList[0].name){var a=[];this.documentList.forEach((function(e){a.push(t.getDocumentDetail(e.id))})),this.fistLoading=!0,Promise.all(a).then((function(){t.fistLoading=!1,t.activeTab=t.documentList[0].id})).catch((function(){t.fistLoading=!1,t.activeTab=t.documentList[0].id})),this.isUpdateData=!1}}}},methods:{handleSelectionChange:function(e){this.multipleSelection=e,this.openDocs[this.activeTab].openDocApis=e},handleData:function(){var e=this,t=[];return Object.values(this.openDocs).forEach((function(a){if(a.openDocId){var n=[];a.openDocApis.forEach((function(e){n.push({method:e.method,path:e.path})})),t.push({apiAuthId:e.isPair?a.apiAuthId:void 0,id:a.id||void 0,openDocApis:n,openDocId:a.openDocId})}})),t},changeDocumentList:function(e){var t=this;e.forEach((function(e){var a=t.documentList.findIndex((function(t){return e.id===t.id}));-1===a&&t.documentList.push(e)}));var a=[];this.documentList.forEach((function(e){t.allDocs[e.id]&&!t.openDocs[e.id]?t.openDocs[e.id]={openDocApis:t.allDocs[e.id].filter((function(e){return e.isShow})),openDocId:e.id}:t.openDocs[e.id]||a.push(t.getDocumentDetail(e.id))})),a.length>0&&(this.fistLoading=!0,Promise.all(a).then((function(){t.fistLoading=!1})).catch((function(){t.fistLoading=!1}))),""===this.activeTab&&this.documentList.length>0&&(this.activeTab=this.documentList[0].id)},getDocumentDetail:function(e){var t=this;return e||(this.apiLoading=!0,this.openDocApis=[]),Object(o["b"])(e||this.activeTab).then((function(a){if(200!==a.data.code)return t.$message.error(a.data.msg||"获取数据失败！"),void(t.apiLoading=!1);var n=a.data.data,i=JSON.parse(n.content||"{}");n.openDocApis=t.renderPathAndMethod(i,n.openDocApis),t.allDocs[e||t.activeTab]=n.openDocApis,e||(t.openDocApis=n.openDocApis);var r=[];t.openDocs[e||t.activeTab]?(t.syncData(e||t.activeTab),e||(r=t.openDocs[t.activeTab].openDocApis,t.setColumnSelect(r))):(n.openDocApis.forEach((function(e){e.isShow&&r.push(e)})),t.openDocs[e||t.activeTab]={openDocApis:r,openDocId:n.id}),t.apiLoading=!1}),(function(){t.apiLoading=!1}))},syncData:function(e){var t=this,a=[];return this.openDocs[e].openDocApis.forEach((function(n){var i=t.allDocs[e].findIndex((function(e){return"".concat(e.path,"_").concat(e.method)==="".concat(n.path,"_").concat(n.method)}));i>-1&&a.push(t.allDocs[e][i])})),this.openDocs[e].openDocApis=a},renderPathAndMethod:function(e,t){var a=[];return!Object(s["o"])(e)&&e.paths&&Object.entries(e.paths).forEach((function(e){Object.entries(e[1]).forEach((function(n){var i=t.findIndex((function(t){var a=JSON.parse(t.content).curJson,i=Object.keys(a).filter((function(e){return"path"!==e}))[0];return"".concat(i,"_").concat(a.path)==="".concat(n[0],"_").concat(e[0])}));i>-1&&a.push(Object.assign(t[i],{path:e[0],method:n[0],name:n[1].summary}))}))})),a},setColumnSelect:function(e,t){var a=this;this.$nextTick((function(){var n=a.documentList.findIndex((function(e){return e.id===a.activeTab}))||0;t?a.$refs.multipleTable[n]&&a.$refs.multipleTable[n].toggleAllSelection():a.openDocApis.forEach((function(t){var i=e.findIndex((function(e){return e.path+"_"+e.method===t.path+"_"+t.method}));a.$refs.multipleTable[n]&&a.$refs.multipleTable[n].toggleRowSelection(t,i>-1)}))}))},emitData:function(){this.$emit("update:data",this.handleData()),this.isUpdateData=!0},validate:function(){var e=this,t=[];return this.documentList.forEach((function(a){e.openDocs[a.id]&&0===e.openDocs[a.id].openDocApis.length&&t.push(a.name)})),new Promise((function(a,n){t.length>0?n("【".concat(t.join("、"),"】文档的接口列表不能为空！")):0===e.documentList.length?n("请选择文档！"):a()}))},removeTab:function(e){var t=this.documentList.findIndex((function(t){return t.id===e})),a=this.documentList[t].id;delete this.openDocs[a],this.documentList.splice(t,1),this.documentList.length>0&&this.activeTab===a&&(this.activeTab=this.documentList[0].id),0===this.documentList.length&&(this.activeTab="")}}},l=c,u=(a("7424"),a("df10"),a("2877")),d=Object(u["a"])(l,n,i,!1,null,"27125560",null);t["default"]=d.exports},f501:function(e,t,a){"use strict";a("cb7a")},f60a:function(e,t,a){},fc6f:function(e,t,a){}}]);