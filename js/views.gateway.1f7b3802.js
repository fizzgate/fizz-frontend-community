/*!
 * Fizz-Admin v2.2.3
 * (c) 2020-2021 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views.gateway"],{"0479":function(e,t,n){"use strict";n("60dc")},2101:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{"append-to-body":"",width:"900px",top:"20px","close-on-click-modal":!1,title:e.detailDialog.title,visible:e.detailDialog.visible},on:{"update:visible":function(t){return e.$set(e.detailDialog,"visible",t)}}},[n("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,size:"small",disabled:"view"===e.detailDialog.type,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"插件名称",prop:"engName"}},[n("el-input",{attrs:{placeholder:"请输入插件名称",clearable:""},model:{value:e.dialogForm.engName,callback:function(t){e.$set(e.dialogForm,"engName",t)},expression:"dialogForm.engName"}}),n("span",[e._v("插件名称由英文字母、下划线或数字组成, 不能以数字开头，如：memberAuth,  member_auth_v1")])],1),n("el-form-item",{attrs:{label:"插件描述",prop:"chnName"}},[n("el-input",{attrs:{placeholder:"请输入插件描述",clearable:""},model:{value:e.dialogForm.chnName,callback:function(t){e.$set(e.dialogForm,"chnName",t)},expression:"dialogForm.chnName"}}),n("span",[e._v("如：会员登录校验")])],1),n("el-form-item",{attrs:{label:"默认执行顺序",prop:"order"}},[n("el-input",{attrs:{placeholder:"请输入默认执行顺序",clearable:""},model:{value:e.dialogForm.order,callback:function(t){e.$set(e.dialogForm,"order",t)},expression:"dialogForm.order"}})],1),n("el-form-item",{attrs:{label:"表单定义",prop:"config"}},[n("data-editor",{attrs:{content:e.dialogForm.config,height:300},on:{"update:content":function(t){return e.$set(e.dialogForm,"config",t)}}}),n("span",[e._v("\n          路由级别的自定义属性，定义规范请参考：\n          "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showFormTips()}}},[e._v("表单规范说明")])],1)],1),n("el-form-item",{attrs:{label:"自定义配置",prop:"fixedConfig"}},[n("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.dialogForm.fixedConfig,callback:function(t){e.$set(e.dialogForm,"fixedConfig",t)},expression:"dialogForm.fixedConfig"}}),n("span",{staticClass:"key-tips"},[e._v("插件级别的自定义配置信息 "),n("tooltip-custom",{staticClass:"link",attrs:{title:"插件实例"}})],1)],1)],1),"view"!==e.detailDialog.type?n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small",loading:e.detailDialog.loading},on:{click:e.submitForm}},[e._v("保 存\n      ")]),n("el-button",{attrs:{size:"small"},on:{click:function(t){e.detailDialog.visible=!1}}},[e._v("取 消")])],1):e._e(),n("el-dialog",{attrs:{width:"600px",title:"插件表单规范说明",visible:e.tipsDialog.visible,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.tipsDialog,"visible",t)}}},[n("code-highlight",{attrs:{height:"400",code:e.tipsDialog.content}})],1)],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("ade3")),o=n("4df3"),s=n("dd62"),c=n("5880"),l=n("16cd"),g=n("c54a"),d=n("4627"),u=n("d480"),p={pluginFormJS:'/*\r\n* plugin_config_design\r\n* 动态插件参考结构\r\n* */\r\n\r\nconst pluginConfig = [\r\n  {\r\n    /* 必有字段 */\r\n    "field": "inputVal",\r\n    "label": "输入框",\r\n    "component": "input", // input, select, radio, checkbox, textarea\r\n    "dataType": "string", // number(long, double), string, boolean, array\r\n    /* 可选字段 */\r\n    "desc": "字段的说明文字",\r\n    "placeholder": "placeholder文字",\r\n    "default": "Aa123", // 初始默认值\r\n    "options": [ // for select, radio, checkbox\r\n      {\r\n        "label": "选项1",\r\n        "value": 1  // number(long, double), string, boolean,\r\n      },\r\n      {\r\n        "label": "选项2",\r\n        "value": 2\r\n      }\r\n    ],\r\n    "rules": [ // min|max / range / length / regex pattern\r\n      { "required": true, "message": "输入框不能为空", "trigger": "change" }, // required 必填\r\n      // { "min": 3, "ma x": 5, "message": "长度在 3 到 5 个字符", "trigger": "change" }, // range 长度范围（for dataType："string"）\r\n      // { "len": 8, "message": "长度需 8 个字符", "trigger": "change" }, // length 长度限制（for dataType："string"）\r\n      // { "type": "number", "message": "请输入数字类型"}, // for dataType："number" 校验数值\r\n      // { "type": "integer", "message": "请输入整数数值", "trigger": "change" }, // for dataType："long" 校验整数\r\n      // { "type": "float", "message": "请输入浮点数数值", "trigger": "change" }, // for dataType："double" 校验浮点数\r\n      { "pattern": "^[A-Za-z\\\\d]+$", "message": "只能是字母或数字", "trigger": "change" } // regex pattern正则\r\n    ]\r\n  },\r\n  {\r\n    "field": "selectVal",\r\n    "label": "选择器",\r\n    "component": "select",\r\n    "dataType": "number",\r\n    "options": [\r\n      {\r\n        "label": "选项1",\r\n        "value": 1\r\n      },\r\n      {\r\n        "label": "选项2",\r\n        "value": 2\r\n      },\r\n      {\r\n        "label": "选项3",\r\n        "value": 3\r\n      }\r\n    ],\r\n    "desc": "选择器的说明文字",\r\n    "placeholder": "请选择",\r\n    "rules": [\r\n      { "required": true, "message": "选择器不能为空", "trigger": "change" }\r\n    ]\r\n  },\r\n  {\r\n    "field": "radioVal",\r\n    "label": "单选框",\r\n    "component": "radio",\r\n    "dataType": "boolean",\r\n    "default": true,\r\n    "options": [\r\n      {\r\n        "label": "是",\r\n        "value": true\r\n      },\r\n      {\r\n        "label": "否",\r\n        "value": false\r\n      }\r\n    ],\r\n    "desc": "单选框的说明文字",\r\n    "rules": [\r\n      { "required": true, "message": "请选择单选框", "trigger": "change" }\r\n    ]\r\n  },\r\n  {\r\n    "field": "checkboxVal",\r\n    "label": "多选框",\r\n    "component": "checkbox",\r\n    "dataType": "array",\r\n    "options": [\r\n      {\r\n        "label": "选项1",\r\n        "value": 11\r\n      },\r\n      {\r\n        "label": "选项2",\r\n        "value": 22\r\n      },\r\n      {\r\n        "label": "选项3",\r\n        "value": 33\r\n      }\r\n    ],\r\n    "desc": "多选框的说明文字",\r\n    "rules": [\r\n      { "required": true, "message": "请选择多选框", "trigger": "change" }\r\n    ]\r\n  },\r\n  {\r\n    "field": "textVal",\r\n    "label": "文本框",\r\n    "component": "textarea",\r\n    "dataType": "string",\r\n    "desc": "文本框的说明文字",\r\n    "placeholder": "textarea文字",\r\n    "default": "一般放很长的文字",\r\n    "rules": [\r\n      {\r\n        "required": true,\r\n        "message": "文本框不能为空",\r\n        "trigger": "change"\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n// TODO 注意！！\r\n// [pluginConfig]数组注释仅为示例说明，实际数组JSON不可包含注释\r\n// 组件 "checkbox" 的dataType = "array"\r\n// 组件 "radio/select" 的实际值类型等于options内的value值类型\r\n\r\n\r\n'};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={data:function(){return{form:{},dialogForm:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:900,border:!0,index:!0,viewBtn:!0,columnBtn:!1,menuPosition:"right",column:[{label:"ID",prop:"id",width:60},{label:"插件名称",prop:"engName",search:!0,overHidden:!0},{label:"插件描述",prop:"chnName",search:!0,overHidden:!0},{label:"默认执行顺序",prop:"order",hide:!0},{label:"表单定义",prop:"config",overHidden:!0},{label:"自定义配置",prop:"fixedConfig",overHidden:!0}]},data:[],rules:{engName:[{required:!0,message:"必填",trigger:"blur"},{pattern:/^[A-Za-z_][A-Za-z\d_]+$/,message:"格式有误",trigger:"blur"}],chnName:[{required:!0,message:"必填",trigger:"blur"}],order:[{required:!0,message:"必填",trigger:"blur"},{pattern:/^\d+$/,message:"请输入自然数",trigger:"blur"}]},detailDialog:{visible:!1,title:"详情",type:"",loading:!1},tipsDialog:{title:"js",visible:!1,content:"111"}}},computed:f(f({},Object(c["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.gateway_plugin_add,!1),editBtn:this.vaildData(this.permission.gateway_plugin_edit,!1),viewBtn:this.vaildData(this.permission.gateway_plugin_view,!1),delBtn:this.vaildData(this.permission.gateway_plugin_delete,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},components:{dataEditor:d["default"],codeHighlight:u["default"],tooltipCustom:s["default"]},methods:{showFormTips:function(){this.tipsDialog.content=p.pluginFormJS,this.tipsDialog.visible=!0},submitForm:function(){var e=this;this.$refs.dialogForm.validate((function(t){if(t){var n=Object(l["b"])(e.dialogForm),a=Object(g["i"])(n.config);if(n.config&&!a)return e.$message.error("表单定义配置JSON格式有误"),!1;if(n.config&&!(n.config instanceof Array))return e.$message.error("表单定义配置需为数组格式结构"),!1;var r=Object.assign({},n);n.config&&n.config.length?r.config=JSON.stringify(n.config):r.config="","edit"===e.detailDialog.type?e.rowUpdate(r):e.rowSave(r)}}))},rowSave:function(e){var t=this;this.detailDialog.loading=!0,Object(o["a"])(e).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"保存成功"}),t.detailDialog.visible=!1}),(function(e){window.console.log(e)})).finally((function(){t.detailDialog.loading=!1}))},rowUpdate:function(e){var t=this;this.detailDialog.loading=!0,Object(o["f"])(e).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"修改成功"}),t.detailDialog.visible=!1}),(function(e){window.console.log(e)})).finally((function(){t.detailDialog.loading=!1}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["e"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){var n=this;switch(this.detailDialog.type=t,t){case"add":this.detailDialog.title="新增";break;case"edit":this.detailDialog.title="编辑";break;case"view":this.detailDialog.title="查看";break;default:this.detailDialog.title="详情";break}this.dialogForm={},["edit","view"].includes(t)&&Object(o["c"])(this.form.id).then((function(e){n.form=e.data.data,n.dialogForm=Object.assign({},e.data.data||{}),n.detailDialog.visible=!0})),this.detailDialog.visible=!0},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["d"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},m=b,v=(n("76d3"),n("2877")),y=Object(v["a"])(m,a,r,!1,null,null,null);t["default"]=y.exports},5344:function(e,t,n){},"60dc":function(e,t,n){},"76d3":function(e,t,n){"use strict";n("dd4f")},"84cd":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-alert",{attrs:{title:"网关本地缓存的已发布接口信息，版本号为网关实际使用的接口版本。",type:"warning",closable:!1}}),n("el-card",{staticClass:"box-card"},[n("header",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("["+e._s(e.originId)+"] 网关详情")]),n("avue-crud",{ref:"crud",attrs:{data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList,"cell-class-name":"api-cell"},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var a=t.row,r=t.type,i=t.size;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.getDetail(a)}}},[e._v("查看\n        ")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),n("el-dialog",{attrs:{title:"Config Json","append-to-body":"",top:"5vh",width:"900px",visible:e.configDialog},on:{"update:visible":function(t){e.configDialog=t}}},[e.form.serviceName?n("el-tag",[e._v("服务["+e._s(e.form.serviceName)+"]")]):e._e(),e._v(" \n    "),e.form.name?n("b",[e._v(" ["+e._s(e.form.name)+"] ")]):e._e(),n("el-divider"),n("code-highlight",{attrs:{language:"json",code:e.jsonCode,height:600}})],1)],1)},r=[],i=n("e5ec"),o=n("d480"),s={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{size:"mini",dialogWidth:900,menuWidth:120,border:!0,index:!0,addBtn:!1,editBtn:!1,delBtn:!1,columnBtn:!1,menuPosition:"right",column:[{label:"所属服务",prop:"serviceName",search:!0},{label:"接口名",prop:"name",minWidth:120,search:!0},{label:"方法",prop:"method",width:80},{label:"路径",prop:"path",minWidth:120,search:!0},{label:"版本号",prop:"version",width:80}]},data:[],configDialog:!1,configJson:""}},computed:{originId:function(){return this.$route.query.originId||""},jsonCode:function(){var e="";if(this.configJson)try{e=JSON.parse(this.configJson)}catch(t){e=this.configJson||""}return JSON.stringify(e,null,"    ")}},components:{codeHighlight:o["default"]},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{getDetail:function(e){var t=this;e.configId?(this.form=e,Object(i["a"])({instanceId:this.originId,configId:e.configId}).then((function(e){t.configJson=e.data.data||"",t.configDialog=!0}))):this.$message.error("数据缺失，无法操作！")},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,n.instanceId=this.originId,Object(i["b"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},c=s,l=(n("8be4"),n("2877")),g=Object(l["a"])(c,a,r,!1,null,"096e071c",null);t["default"]=g.exports},"8be4":function(e,t,n){"use strict";n("d80e")},"9bda":function(e,t,n){"use strict";n("5344")},b76d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-alert",{attrs:{title:"当前网关在线实例列表，点击查看按钮查看指定实例网关本地缓存的已发布接口信息。",type:"warning",closable:!1}}),n("avue-crud",{ref:"crud",attrs:{data:e.data,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var a=t.row,r=t.type,i=t.size;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.goDetail(a)}}},[e._v("查看\n      ")])]}}])})],1)},r=[],i=(n("386d"),n("e5ec")),o={data:function(){return{query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{menuWidth:120,border:!0,index:!0,addBtn:!1,editBtn:!1,delBtn:!1,columnBtn:!1,menuPosition:"right",column:[{label:"IP",prop:"host"},{label:"端口",prop:"port"}]},data:[]}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{goDetail:function(e){if(e.instanceId){var t="/gateway/config";this.$router.push({path:t,query:{originId:e.instanceId}})}else this.$message.error("数据缺失，无法操作！")},searchReset:function(){this.query={},this.search.apiFilterConfigId=[],this.search.method=[],this.onLoad(this.page)},searchChange:function(e,t){this.search.apiFilterConfigId_in=this.search.apiFilterConfigId.join(",")||"",this.search.method_in=this.search.method.join(",")||"",e=Object.assign(e,this.search),e.apiFilterConfigId_in=e.apiFilterConfigId.join(",")||"",e.method_in=e.method.join(",")||"",delete e.apiFilterConfigId,delete e.method,this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud&&this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(i["c"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n,t.loading=!1,t.selectionClear()}))}}},s=o,c=n("2877"),l=Object(c["a"])(s,a,r,!1,null,null,null);t["default"]=l.exports},c2f4:function(e,t,n){"use strict";n("fb24")},d7d1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.getPermission},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"instanceIpsForm",fn:function(t){return[n("div",[n("el-input",{attrs:{type:"textarea",placeholder:"网关实例IP",autosize:{minRows:3,maxRows:8},clearable:""},model:{value:e.form.instanceIps,callback:function(t){e.$set(e.form,"instanceIps",t)},expression:"form.instanceIps"}}),n("span",{staticClass:"key-tips"},[e._v("多个IP用逗号,分隔，需填写实际IP，不能填写127.0.0.1")])],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},r=[],i=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ade3")),o=(n("ac6a"),n("28a5"),n("0468")),s=n("5880"),c=n("16cd"),l=n("c54a");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:900,border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,column:[{label:"分组ID",prop:"groupId",search:!0,editDisabled:!0,overHidden:!0,rules:[{required:!0,message:"必填",trigger:"blur"}]},{label:"分组名称",prop:"groupName",search:!0,overHidden:!0,rules:[{required:!0,message:"必填",trigger:"blur"}]},{label:"网关实例IP",prop:"instanceIps",placeholder:"多个IP用逗号,分隔",overHidden:!0,type:"textarea",span:24,minRows:3,formslot:!0,rules:[{required:!0,message:"必填",trigger:"blur"},{validator:function(e,t,n){var a=t.split(","),r=!0,i=!1;if(a.forEach((function(e){e&&!Object(l["h"])(Object(c["a"])(e))?r=!1:"127.0.0.1"===Object(c["a"])(e)&&(r=!1,i=!0)})),t&&!r){var o=i?"请勿填写127.0.0.1":"请输入正确的IP";n(new Error(o))}else n()},trigger:"blur"}]}]},data:[]}},computed:d(d({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.gateway_group_add,!1),editBtn:this.vaildData(this.permission.gateway_group_edit,!1),viewBtn:this.vaildData(this.permission.gateway_group_view,!1),delBtn:this.vaildData(this.permission.gateway_group_delete,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{getPermission:function(e,t){return!("addBtn"===e&&!this.permissionList.addBtn)&&(!("viewBtn"===e&&!this.permissionList.viewBtn)&&(!!("editBtn"!==e||"default"!==t.groupId&&this.permissionList.editBtn)&&!!("delBtn"!==e||"default"!==t.groupId&&this.permissionList.delBtn)))},handleSubmitData:function(e){e=Object(c["b"])(e);var t=e.instanceIps.split(",");return t=t.map((function(e){return Object(c["a"])(e)})),t=t.join(","),e.instanceIps=t,e},rowSave:function(e,t,n){var a=this;e=this.handleSubmitData(e),Object(o["a"])(e).then((function(){t(),a.onLoad(a.page),a.$message({type:"success",message:"保存成功"})}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,a){var r=this;e=this.handleSubmitData(e),Object(o["f"])(e).then((function(){n(),r.onLoad(r.page),r.$message({type:"success",message:"修改成功"})}),(function(e){a(),window.console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["e"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["c"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["d"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},p=u,h=(n("9bda"),n("2877")),f=Object(h["a"])(p,a,r,!1,null,"37bf065c",null);t["default"]=f.exports},d80e:function(e,t,n){},dd4f:function(e,t,n){},dd62:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:e.title,width:"830"}},[n("div",{staticClass:"content"},[n("code-highlight",{attrs:{code:e.content,height:600}})],1),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("("+e._s(e.title)+")")])])},r=[],i=n("d480"),o={name:"tooltip-custom",props:{title:{type:String,default:"示例"}},data:function(){return{content:'package we.plugin;\n\nimport java.util.Map;\nimport javax.annotation.Resource;\nimport org.springframework.web.server.ServerWebExchange;\nimport reactor.core.publisher.Mono;\nimport we.plugin.auth.App;\nimport we.plugin.auth.AppService;\nimport we.util.ReactorUtils;\nimport we.util.WebUtils;\n\npublic class MyPluginFilter implements FizzPluginFilter {\n\n     @Resource\n     AppService appService;\n\n     @SuppressWarnings({ "unchecked", "rawtypes", "unused" })\n     @Override\n     public Mono<Void> filter(ServerWebExchange exchange, Map<String, Object> config) {\n          String customConfig = (String) config.get(PluginConfig.CUSTOM_CONFIG); // 获取插件级别的自定义配置信息\n          String appid = WebUtils.getAppId(exchange); // 获取客户端请求携带的appid\n          App app = appService.getApp(appid); // 获取在网关对应的 app\n          String appCustomConfig = app != null ? app.config : null; // 从 app 中取得自定义配置\n\n          doSomething(); // 执行一些逻辑\n          exchange.getAttributes().put("11", "22"); // 往后续插件或逻辑传递参数\n          Mono next = FizzPluginFilterChain.next(exchange); // 执行下一个插件或后续逻辑\n          return next.defaultIfEmpty(ReactorUtils.NULL).flatMap(nil -> {\n               doAfterNext(); // 当 next 完成时执行一些逻辑\n               return Mono.empty();\n          });\n     }\n\n     public void doSomething() {\n\n     }\n\n     public void doAfterNext() {\n       \n     }\n}'}},components:{codeHighlight:i["default"]}},s=o,c=(n("c2f4"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,null,null);t["default"]=l.exports},e3f0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",{staticClass:"gateway-log"},[n("avue-crud",{ref:"crud",attrs:{data:e.data,search:e.search,page:e.page,option:e.option,"table-loading":e.loading},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"expand",fn:function(t){var a=t.row;return[n("el-input",{attrs:{type:"textarea",rows:8,resize:"none",readonly:""},model:{value:a.content,callback:function(t){e.$set(a,"content",t)},expression:"row.content"}})]}},{key:"search",fn:function(t){t.row;var a=t.size;return[n("el-checkbox",{attrs:{size:a},model:{value:e.search.bizIdExactMatchingFlag,callback:function(t){e.$set(e.search,"bizIdExactMatchingFlag",t)},expression:"search.bizIdExactMatchingFlag"}},[e._v("全匹配")])]}}])})],1)},r=[],i=n("e5ec"),o=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=n("b5c6"),c=n("da71");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e,t,n){return Object(s["a"])({url:"".concat(c["a"],"/gateway-log/list"),method:"get",params:g(g({},n),{},{current:e,size:t})})},u=[{label:"FATAL",value:100},{label:"ERROR",value:200},{label:"WARN",value:300},{label:"INFO",value:400},{label:"DEBUG",value:500},{label:"TRACE",value:600}],p={data:function(){return{search:{bizIdExactMatchingFlag:!0},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,addBtn:!1,columnBtn:!1,menuPosition:"right",menu:!1,expand:!0,align:"center",defaultExpandAll:!0,expandFixed:!1,expandWidth:30,column:[{label:"日志时间",prop:"logTime",search:!0,searchRange:!0,searchSpan:12,type:"datetime",valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"服务器IP",prop:"serverIp",search:!0,type:"select",dicData:[],props:{label:"host",value:"host"},searchPlaceholder:"全部"},{label:"日志等级",prop:"level",search:!0,type:"select",dicData:u,searchMultiple:!0,searchTags:!0},{label:"日志内容",prop:"content",search:!0,hide:!0},{label:"业务ID",prop:"bizId",search:!0}]},data:[]}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},created:function(){this.getHostOption()},methods:{getHostOption:function(){var e=this;Object(i["c"])().then((function(t){var n=e.findObject(e.option.column,"serverIp");n.dicData=t.data.data}))},searchReset:function(){this.query={},this.search={bizIdExactMatchingFlag:!1},this.onLoad(this.page)},searchChange:function(e,t){e.logTime&&e.logTime.length>0&&(e.logStartTime=e.logTime[0],e.logEndTime=e.logTime[1],delete e.logTime),e.level&&e.level.length>0&&(e.levels=e.level.join(","),delete e.level),this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,d(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},h=p,f=(n("0479"),n("2877")),b=Object(f["a"])(h,a,r,!1,null,null,null);t["default"]=b.exports},e5ec:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return g}));n("8e6e"),n("ac6a"),n("456d");var a=n("ade3"),r=n("b5c6"),i=n("da71");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e,t,n){return Object(r["a"])({url:"".concat(i["a"],"/fizz-gateway-aggregate/get-instance-list"),method:"get",params:s(s({},n),{},{current:e,size:t})})},l=function(e,t,n){return Object(r["a"])({url:"".concat(i["a"],"/fizz-gateway-aggregate/get-config-list"),method:"post",params:s(s({},n),{},{current:e,size:t})})},g=function(e){var t=e.instanceId,n=e.configId;return Object(r["a"])({url:"".concat(i["a"],"/fizz-gateway-aggregate/get-config-str/").concat(t,"/").concat(n),method:"get"})}},fb24:function(e,t,n){}}]);