/*!
 * Fizz-Admin v2.6.6
 * (c) 2020-2022 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views.authority"],{2457:function(e,t,n){"use strict";t["a"]=[{label:"通用图标",list:["iconfont iconicon_roundadd","iconfont iconicon_compile","iconfont iconicon_glass","iconfont iconicon_roundclose","iconfont iconicon_roundreduce","iconfont iconicon_delete","iconfont iconicon_shakehands","iconfont iconicon_task_done","iconfont iconicon_voipphone","iconfont iconicon_safety","iconfont iconicon_work","iconfont iconicon_study","iconfont iconicon_task","iconfont iconicon_subordinate","iconfont iconicon_star","iconfont iconicon_setting","iconfont iconicon_sms","iconfont iconicon_share","iconfont iconicon_secret","iconfont iconicon_scan_namecard","iconfont iconicon_principal","iconfont iconicon_group","iconfont iconicon_send","iconfont iconicon_scan","iconfont iconicon_search","iconfont iconicon_refresh","iconfont iconicon_savememo","iconfont iconicon_QRcode","iconfont iconicon_im_keyboard","iconfont iconicon_redpacket","iconfont iconicon_photo","iconfont iconicon_qq","iconfont iconicon_wechat","iconfont iconicon_phone","iconfont iconicon_namecard","iconfont iconicon_notice","iconfont iconicon_next_arrow","iconfont iconicon_left","iconfont iconicon_more","iconfont iconicon_details","iconfont iconicon_message","iconfont iconicon_mobilephone","iconfont iconicon_im_voice","iconfont iconicon_GPS","iconfont iconicon_ding","iconfont iconicon_exchange","iconfont iconicon_cspace","iconfont iconicon_doc","iconfont iconicon_dispose","iconfont iconicon_discovery","iconfont iconicon_community_line","iconfont iconicon_cloud_history","iconfont iconicon_coinpurse_line","iconfont iconicon_airplay","iconfont iconicon_at","iconfont iconicon_addressbook","iconfont iconicon_boss","iconfont iconicon_addperson","iconfont iconicon_affiliations_li","iconfont iconicon_addmessage","iconfont iconicon_addresslist","iconfont iconicon_add","iconfont icongithub","iconfont icongitee2","el-icon-set-up","el-icon-s-data","el-icon-paperclip","el-icon-s-claim","el-icon-s-goods"]},{label:"系统图标",list:["iconfont icon-zhongyingwen","iconfont icon-caidan","iconfont icon-rizhi1","iconfont icon-zhuti","iconfont icon-suoping","iconfont icon-bug","iconfont icon-qq1","iconfont icon-weixin1","iconfont icon-shouji","iconfont icon-mima","iconfont icon-yonghu","iconfont icon-yanzhengma","iconfont icon-canshu","iconfont icon-dongtai","iconfont icon-iconset0265","iconfont icon-shujuzhanshi2","iconfont icon-tuichuquanping","iconfont icon-rizhi","iconfont icon-cuowutishitubiao","iconfont icon-debug","iconfont icon-iconset0216","iconfont icon-quanxian","iconfont icon-quanxian","iconfont icon-shuaxin","iconfont icon-bofangqi-suoping","iconfont icon-quanping","iconfont icon-navicon","iconfont icon-biaodan","iconfont icon-liuliangyunpingtaitubiao08","iconfont icon-caidanguanli","iconfont icon-cuowu","iconfont icon-wxbgongju","iconfont icon-tuichu","iconfont icon-daohanglanmoshi02","iconfont icon-changyonglogo27","iconfont icon-biaoge","iconfont icon-baidu1","iconfont icon-tubiao","iconfont icon-souhu","iconfont icon-msnui-360","iconfont icon-iframe","iconfont icon-huanyingye"]}]},3528:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return g}));n("8e6e"),n("ac6a"),n("456d");var o=n("ade3"),i=n("b5c6"),c=n("da71");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t,n){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/list"),method:"get",params:r(r({},n),{},{current:e,size:t})})},u=function(){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/menu/grant-tree"),method:"get"})},l=function(e,t,n,o){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/grant"),method:"post",data:{roleIds:e,menuIds:t,dataScopeIds:n,apiScopeIds:o}})},p=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/remove"),method:"post",params:{ids:e}})},d=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/submit"),method:"post",data:e})},h=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/submit"),method:"post",data:e})},f=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/menu/role-tree-keys"),method:"get",params:{roleIds:e}})},g=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/role/tree"),method:"get",params:{tenantId:e}})}},"60f8":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.role_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{size:"small",icon:"el-icon-setting",plain:""},on:{click:e.handleRole}},[e._v("权限设置\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"角色权限配置","append-to-body":"",visible:e.box,width:"345px"},on:{"update:visible":function(t){e.box=t}}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"菜单权限"}},[n("el-tree",{ref:"treeMenu",attrs:{data:e.menuGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.menuTreeObj,props:e.props}})],1),n("el-tab-pane",{attrs:{label:"数据权限"}},[n("el-tree",{ref:"treeDataScope",attrs:{data:e.dataScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.dataScopeTreeObj,props:e.props}})],1),n("el-tab-pane",{attrs:{label:"接口权限"}},[n("el-tree",{ref:"treeApiScope",attrs:{data:e.apiScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.apiScopeTreeObj,props:e.props}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.box=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],c=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("ade3")),a=n("3528"),r=n("5880"),s=n("1ca4"),u=n("da71");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},box:!1,props:{label:"title",value:"key"},menuGrantList:[],dataScopeGrantList:[],apiScopeGrantList:[],apiGrantList:[],menuTreeObj:[],dataScopeTreeObj:[],apiScopeTreeObj:[],selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"角色名称",prop:"roleName",search:!0,span:24,rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"".concat(u["a"],"/blade-system/tenant/select"),addDisplay:!1,editDisplay:!1,viewDisplay:s["a"].tenantMode,span:24,props:{label:"tenantName",value:"tenantId"},hide:!s["a"].tenantMode,search:s["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"角色别名",prop:"roleAlias",search:!0,span:24,rules:[{required:!0,message:"请输入角色别名",trigger:"blur"}]},{label:"上级角色",prop:"parentId",dicData:[],type:"tree",hide:!0,span:24,props:{label:"title"},rules:[{required:!1,message:"请选择上级角色",trigger:"click"}]},{label:"角色排序",prop:"sort",type:"number",span:24,rules:[{required:!0,message:"请输入角色排序",trigger:"blur"}]}]},data:[]}},computed:p(p({},Object(r["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.role_add,!1),viewBtn:this.vaildData(this.permission.role_view,!1),delBtn:this.vaildData(this.permission.role_delete,!1),editBtn:this.vaildData(this.permission.role_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},idsArray:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e}}),methods:{initData:function(){var e=this;Object(a["d"])().then((function(t){var n=e.findObject(e.option.column,"parentId");n.dicData=t.data.data}))},submit:function(){var e=this,t=this.$refs.treeMenu.getCheckedKeys(),n=this.$refs.treeDataScope.getCheckedKeys(),o=this.$refs.treeApiScope.getCheckedKeys();Object(a["e"])(this.idsArray,t,n,o).then((function(){e.box=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var o=this;Object(a["a"])(e).then((function(){o.onLoad(o.page),o.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,o){var i=this;Object(a["h"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),o()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["g"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){["add","edit"].includes(t)&&this.initData(),e()},handleRole:function(){var e=this;1===this.selectionList.length?(this.menuTreeObj=[],this.dataScopeTreeObj=[],this.apiScopeTreeObj=[],Object(a["f"])().then((function(t){e.menuGrantList=t.data.data.menu,e.dataScopeGrantList=t.data.data.dataScope,e.apiScopeGrantList=t.data.data.apiScope,Object(a["c"])(e.ids).then((function(t){e.menuTreeObj=t.data.data.menu,e.dataScopeTreeObj=t.data.data.dataScope,e.apiScopeTreeObj=t.data.data.apiScope,e.box=!0}))}))):this.$message.warning("只能选择一条数据")},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["g"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(a["b"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))}}},h=d,f=n("2877"),g=Object(f["a"])(h,o,i,!1,null,null,null);t["default"]=g.exports},"646e":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var o=t.row;return[e.permission.api_scope_setting?n("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(o)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-drawer",{attrs:{"append-to-body":"",title:"["+e.scopeMenuName+"] 接口权限配置",visible:e.drawerVisible,direction:e.direction,"before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("basic-container",[n("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(t){var o=t.row;return[n("el-tag",[e._v(e._s(o.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],c=(n("8e6e"),n("456d"),n("7f7f"),n("6762"),n("2fdb"),n("ac6a"),n("ade3")),a=n("a6dc"),r=n("7e26"),s=n("5880"),u=n("2457"),l=n("da71");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeLoading:!1,scopeMenuId:0,scopeMenuName:"菜单",menu:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"".concat(l["a"],"/blade-system/menu/tree"),hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:u["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限路径",prop:"scopePath",width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"接口类型",type:"select",dicUrl:"".concat(l["a"],"/blade-system/dict/dictionary?code=api_scope_type"),props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:100,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},computed:d(d({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var o=this;Object(a["a"])(e).then((function(){o.onLoad(o.page),o.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,o){var i=this;Object(a["i"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),o()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["h"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["h"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(a["d"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(a["c"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var o=e.id;Object(a["c"])(o).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var o=this;e=d(d({},e),{},{menuId:this.scopeMenuId}),Object(r["a"])(e).then((function(){o.onLoadScope(o.pageScope),o.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,o){var i=this;e=d(d({},e),{},{menuId:this.scopeMenuId}),Object(r["i"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),o()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["g"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["g"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["e"])(this.formScope.id).then((function(e){n.formScope=e.data.data})),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var o=d(d({},n),{},{menuId:this.scopeMenuId});Object(r["c"])(e.currentPage,e.pageSize,Object.assign(o,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},f=h,g=n("2877"),b=Object(g["a"])(f,o,i,!1,null,null,null);t["default"]=b.exports},"7e26":function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"e",(function(){return m}));n("8e6e"),n("ac6a"),n("456d");var o=n("ade3"),i=n("b5c6"),c=n("da71");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t,n){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/data-scope/list"),method:"get",params:r(r({},n),{},{current:e,size:t})})},u=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/data-scope/remove"),method:"post",params:{ids:e}})},l=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/data-scope/submit"),method:"post",data:e})},p=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/data-scope/submit"),method:"post",data:e})},d=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/data-scope/detail"),method:"get",params:{id:e}})},h=function(e,t,n){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/api-scope/list"),method:"get",params:r(r({},n),{},{current:e,size:t})})},f=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/api-scope/remove"),method:"post",params:{ids:e}})},g=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/api-scope/submit"),method:"post",data:e})},b=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/api-scope/submit"),method:"post",data:e})},m=function(e){return Object(i["a"])({url:"".concat(c["a"],"/blade-system/api-scope/detail"),method:"get",params:{id:e}})}},"879d":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var o=t.row;return[e.permission.data_scope_setting?n("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(o)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-drawer",{attrs:{"append-to-body":"",title:"["+e.scopeMenuName+"] 数据权限配置",visible:e.drawerVisible,direction:e.direction,"before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("basic-container",[n("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(t){var o=t.row;return[n("el-tag",[e._v(e._s(o.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],c=(n("8e6e"),n("456d"),n("7f7f"),n("6762"),n("2fdb"),n("ac6a"),n("ade3")),a=n("a6dc"),r=n("7e26"),s=n("5880"),u=n("2457"),l=n("d9a3"),p=n("da71");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeMenuId:0,scopeMenuCode:"",scopeMenuName:"菜单",scopeLoading:!1,menu:!0,watchMode:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"".concat(p["a"],"/blade-system/menu/tree"),hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:u["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,value:"",rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:100,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限字段",prop:"scopeColumn",width:130,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"规则类型",type:"select",dicUrl:"".concat(p["a"],"/blade-system/dict/dictionary?code=data_scope_type"),props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:140,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"可见字段",prop:"scopeField",span:24,hide:!0,value:"*",rules:[{required:!0,message:"请输入数据权限可见的字段",trigger:"blur"}]},{label:"权限类名",prop:"scopeClass",span:24,hide:!0,rules:[{required:!0,message:"请输入MybatisMapper对应方法的完整类名路径",trigger:"blur"}]},{label:"规则值",prop:"scopeValue",span:24,minRows:5,type:"textarea",display:!0,hide:!0},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},watch:{"formScope.scopeType":function(){this.initScope()}},computed:h(h({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initScope:function(){var e=this,t=l["a"].toInt(this.formScope.scopeType),n=this.watchMode,o="-",i="暂无";1===t?(o="-",i="全部可见"):2===t?(o="create_user",i="本人可见"):3===t?(o="create_dept",i="所在机构可见"):4===t?(o="create_dept",i="所在机构可见及子级可见"):5===t&&(o="",i="自定义"),this.$refs.crudScope.option.column.filter((function(c){n&&("scopeName"===c.prop&&(e.formScope.scopeName="".concat(e.scopeMenuName," [").concat(i,"]")),"resourceCode"===c.prop&&(e.formScope.resourceCode=e.scopeMenuCode),"scopeColumn"===c.prop&&(e.formScope.scopeColumn=o)),"scopeValue"===c.prop&&(c.display=5===t)}))},rowSave:function(e,t,n){var o=this;Object(a["a"])(e).then((function(){o.onLoad(o.page),o.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,o){var i=this;Object(a["i"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),o()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["h"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["h"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(a["d"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(a["c"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var o=e.id;Object(a["c"])(o).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuCode=e.code,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var o=this;e=h(h({},e),{},{menuId:this.scopeMenuId}),Object(r["b"])(e).then((function(){o.onLoadScope(o.pageScope),o.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,o){var i=this;e=h(h({},e),{},{menuId:this.scopeMenuId}),Object(r["j"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),o()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["h"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["h"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["add"].includes(t)&&(this.watchMode=!0,this.initScope()),["edit","view"].includes(t)&&(this.watchMode=!1,Object(r["f"])(this.formScope.id).then((function(e){n.formScope=e.data.data}))),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var o=h(h({},n),{},{menuId:this.scopeMenuId});Object(r["d"])(e.currentPage,e.pageSize,Object.assign(o,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},g=f,b=n("2877"),m=Object(b["a"])(g,o,i,!1,null,null,null);t["default"]=m.exports},bee2:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",(function(){return i}))},d4ec:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},d9a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("28a5"),n("456d"),n("ac6a"),n("c5f6"),n("ee1d");var o=n("d4ec"),i=n("bee2"),c=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,null,[{key:"notEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isUndefined",value:function(e){return null===e||"undefined"===typeof e}},{key:"isEmpty",value:function(e){return null===e||"undefined"===typeof e||"string"===typeof e&&""===e&&"undefined"!==e}},{key:"toInt",value:function(e,t){if(this.isEmpty(e))return void 0===t?-1:t;var n=parseInt(e,0);return Number.isNaN(n)?void 0===t?-1:t:n}},{key:"toFormData",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(n){t.append(n,Array.isArray(e[n])?e[n].join(","):e[n])})),t}},{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?e.format(t):null}},{key:"join",value:function(e){return e?e.join(","):""}},{key:"split",value:function(e){return e?String(e).split(","):""}}]),e}()}}]);