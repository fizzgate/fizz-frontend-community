/*!
 * Fizz-Admin v2.6.6
 * (c) 2020-2022 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3957d1"],{"0149":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{ref:"pluginDrawer",attrs:{"append-to-body":"",title:"添加插件",size:"50%","modal-append-to-body":!1,wrapperClosable:!1,visible:e.drawerVisible},on:{"update:visible":function(t){e.drawerVisible=t}}},[i("div",{staticStyle:{"padding-bottom":"50px"}},[i("plugin-list",{attrs:{config:this.isDedicatedLine?e.pluginNoLineOptions:e.pluginOptions},on:{change:e.getSelectionPlugins}})],1),i("footer",{staticClass:"drawer-footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handlePluginDrawer}},[e._v("添 加")]),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.drawerVisible=!1}}},[e._v("取 消")])],1)])},a=[],l=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),o=i("5880"),s=i("7555");function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){Object(l["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"pluginDrawer",components:{pluginList:s["default"]},props:{visible:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},isDedicatedLine:{type:Boolean,default:!1}},computed:c(c({},Object(o["mapGetters"])(["pluginNoLineOptions","pluginOptions"])),{},{drawerVisible:{get:function(){return this.visible},set:function(){this.$emit("changeDrawer")}}}),watch:{data:{immediate:!0,deep:!0,handler:function(){this.apiPlugins=this.data}}},data:function(){return{selectionPlugins:[],apiPlugins:[]}},methods:c(c({},Object(o["mapActions"])(["getPluginNoLineOptions","getPluginOptions"])),{},{getSelectionPlugins:function(e){this.selectionPlugins=e},handlePluginDrawer:function(){this.addPlugin(this.selectionPlugins),this.drawerVisible=!1,this.$emit("emitData",this.apiPlugins)},addPlugin:function(e){var t=this.apiPlugins.concat(e);this.apiPlugins=t}}),created:function(){if(this.isDedicatedLine){var e=["dedicatedLineCodecPlugin","dedicatedLineApiAuthPlugin","dedicatedLinePairingPlugin"];this.getPluginNoLineOptions({noEngNames:e.join(",")})}else this.getPluginOptions()}},d=u,f=(i("8612"),i("2877")),p=Object(f["a"])(d,n,a,!1,null,"5447f4c0",null);t["default"]=p.exports},1600:function(e,t,i){},1884:function(e,t,i){"use strict";i("1600")},2627:function(e,t,i){},"378a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"plugin-config-con"},[e._m(0),e.showGroupTip?i("p",{staticClass:"tip"},[e._v("网关分组级别的插件对分组下所有路由都生效")]):e._e(),i("el-button",{staticClass:"add-btn",attrs:{size:"small",type:"primary",disabled:e.disabled,plain:""},on:{click:function(t){e.pluginVisible=!0}}},[e._v("添加插件")]),i("plugin-config",{staticClass:"plugin-list",attrs:{config:e.groupConfig,disabled:"",type:"group",showType:e.showType}}),i("plugin-config",{ref:"pluginConfig",attrs:{config:e.apiPlugins,disabled:e.disabled,type:"route",startIndex:e.groupConfig.length,showType:e.showType},on:{change:e.getApiPluginConfig}}),e.pluginVisible?i("pluginDrawer",{attrs:{visible:e.pluginVisible,data:e.apiPlugins,isDedicatedLine:e.isDedicatedLine},on:{changeDrawer:function(t){e.pluginVisible=!1},emitData:function(t){return e.apiPlugins=t}}}):e._e()],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h3",[i("i",{staticClass:"el-icon-edit-outline avue-group__icon"}),e._v("插件配置")])}],l=(i("8e6e"),i("456d"),i("2909")),o=(i("ac6a"),i("28a5"),i("ade3")),s=i("60cc"),r=i("0149"),c=i("5880");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={name:"pluginConfigCon",components:{pluginConfig:s["default"],pluginDrawer:r["default"]},props:{disabled:{type:Boolean,default:!1},config:{type:Array,default:function(){return[]}},groupConfig:{type:Array,default:function(){return[]}},showType:{type:Boolean,default:!1},showGroupTip:{type:Boolean,default:!1},isDedicatedLine:{type:Boolean,default:!1}},data:function(){return{apiPlugins:[],pluginVisible:!1}},watch:{apiPlugins:{deep:!0,immediate:!0,handler:function(){this.$emit("emitData",this.apiPlugins)}},config:{immediate:!0,deep:!0,handler:function(){this.apiPlugins=this.config}}},computed:d(d({},Object(c["mapGetters"])(["pluginLineOptions"])),{},{actionType:function(){var e=this.$route.path.split("/");return e[e.length-1]||"add"}}),methods:d(d({},Object(c["mapActions"])(["getPluginLineOptions"])),{},{getApiPluginConfig:function(e){this.apiPlugins=e},validate:function(){var e=this;return new Promise((function(t,i){e.$refs.pluginConfig.validate((function(e,n){e?t():i("string"===typeof n&&n||"请完善插件配置")}))}))},getPluginLine:function(){var e=this;if(this.isDedicatedLine&&"add"===this.actionType){var t=["dedicatedLineCodecPlugin","dedicatedLineApiAuthPlugin","dedicatedLinePairingPlugin"];this.getPluginLineOptions({engNames:t.join(",")}).then((function(){var t=[];e.pluginLineOptions.forEach((function(e){t.push(d(d({},e),{},{plugin:e.id,id:null,disabled:!0}))})),e.apiPlugins=[].concat(t,Object(l["a"])(e.apiPlugins))}))}}}),mounted:function(){this.getPluginLine()}},p=f,g=(i("8e0f"),i("7e27"),i("2877")),h=Object(g["a"])(p,n,a,!1,null,"905703ac",null);t["default"]=h.exports},"4fda":function(e,t,i){"use strict";i("2627")},"54df":function(e,t,i){},5558:function(e,t,i){"use strict";i("bb86")},"60cc":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"plugin-config",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.pluginData,(function(t,n){return i("el-collapse-item",{key:n,attrs:{name:t._uuid||t.id,title:t.chnName,disabled:!t.config}},[i("template",{slot:"title"},[i("div",{staticClass:"plugin-title"},[i("div",{staticClass:"plugin-title-left"},[e.showType?i("span",[e._v(e._s(e.renderIndex(n))+"# \n            "),i("span",{staticClass:"type-level"},[e._v(e._s("route"===e.type?"【路由级别】":"【分组级别】")+" ")]),e._v("\n            "+e._s(t.chnName)+"\n          ")]):i("span",[e._v(e._s(e.renderIndex(n))+"#  "+e._s(t.chnName))]),i("span",{staticStyle:{"margin-left":"20px"},on:{click:function(e){e.stopPropagation()}}},[i("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("执行顺序")]),i("el-input-number",{attrs:{size:"mini","controls-position":"right",disabled:e.disabled||t.disabled},model:{value:t.order,callback:function(i){e.$set(t,"order",i)},expression:"item.order"}})],1),t.instruction?i("div",{staticClass:"use-info"},[i("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:"使用说明",trigger:"hover",width:"550"}},[i("div",{staticClass:"content"},[e._l(t.instructions,(function(t,n){return i("p",{key:n,staticClass:"instruction-text"},[e._v(" "+e._s(t)+" ")])})),i("br")],2),i("span",{attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"el-icon-warning-outline"}),e._v(" 使用说明")])])],1):e._e()]),i("div",{staticClass:"plugin-title-right"},[i("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:e.disabled||t.disabled,circle:""},on:{click:function(i){return i.stopPropagation(),e.delPlugin(t,n)}}})],1)])]),i("plugin-form",{ref:"pluginForm",refInFor:!0,attrs:{disabled:e.disabled||t.disabled,config:t.config,order:t.order,name:t.chnName,data:t.apiPluginConfigs},on:{"update:data":function(i){return e.$set(t,"apiPluginConfigs",i)}}})],2)})),1)},a=[],l=(i("28a5"),i("5df3"),i("ac6a"),i("c5f6"),i("6cdf")),o=i("0e0b"),s={components:{pluginForm:l["default"]},data:function(){return{loading:!1,activeNames:[],pluginData:[]}},props:{config:{type:[Array,Object],required:!0,default:function(){return[]}},disabled:{default:!1,type:Boolean},showType:{type:Boolean,default:!1},type:{type:String,default:"route"},startIndex:{type:Number,default:0}},watch:{config:{deep:!0,handler:function(){this.initPluginData()}}},methods:{renderIndex:function(e){return this.startIndex>0?this.startIndex+e+1:e+1},addCollapseActive:function(e){var t=e._uuid||e.id,i=this.activeNames.some((function(e){return e===t}));!i&&e.config&&t&&this.activeNames.push(t)},delPlugin:function(e,t){this.activeNames.splice(this.activeNames.indexOf(e._uuid||e.id),1),this.pluginData.splice(t,1),this.emitData()},validate:function(e){if(this.emitData(),this.pluginData&&this.pluginData.length>0){var t=[];this.$refs.pluginForm.forEach((function(e){t.push(e.validate())})),Promise.all(t).then((function(){e(!0)})).catch((function(t){e(!1,t)}))}else e(!0)},emitData:function(){this.$emit("change",this.pluginData)},initPluginData:function(){var e=this;this.pluginData=[],this.config&&this.config.length&&(this.loading=!0,this.config.forEach((function(t){t._uuid=t._uuid?t._uuid:Object(o["e"])(),e.addCollapseActive(t);var i=t.instruction.split("\n");e.pluginData.push(Object.assign({},t,{instructions:i}))})),this.loading=!1)}}},r=s,c=(i("5558"),i("2877")),u=Object(c["a"])(r,n,a,!1,null,null,null);t["default"]=u.exports},"6cdf":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"formData",staticClass:"plugin-form",attrs:{disabled:e.disabled,model:e.formData,size:"small"}},[e.pluginConfig.length?e._l(e.pluginConfig,(function(t,n){return i("el-form-item",{key:n,attrs:{label:t.label,prop:t.field,rules:t.rules}},["input"===t.component?[["number","long","double"].some((function(e){return e===t.dataType}))?i("el-input",{attrs:{type:"number",placeholder:t.placeholder+"??",autocomplete:"off",clearable:""},model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,e._n(i))},expression:"formData[comp.field]"}}):i("el-input",{attrs:{placeholder:t.placeholder,autocomplete:"off",clearable:""},model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,i)},expression:"formData[comp.field]"}})]:e._e(),"select"===t.component?[i("el-select",{attrs:{placeholder:t.placeholder,clearable:""},model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,i)},expression:"formData[comp.field]"}},e._l(t.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"radio"===t.component?[i("el-radio-group",{model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,i)},expression:"formData[comp.field]"}},e._l(t.options,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)]:e._e(),"checkbox"===t.component?[i("el-checkbox-group",{model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,i)},expression:"formData[comp.field]"}},e._l(t.options,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)]:e._e(),"textarea"===t.component?[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:t.placeholder,autocomplete:"off",clearable:""},model:{value:e.formData[t.field],callback:function(i){e.$set(e.formData,t.field,i)},expression:"formData[comp.field]"}})]:e._e(),i("div",{staticStyle:{color:"#999","font-size":"12px"}},[e._v(e._s(t.desc))])],2)})):[i("el-alert",{attrs:{title:"当前插件配置有误",type:"warning",closable:!1}})]],2)],1)},a=[],l=(i("7514"),i("ac6a"),i("456d"),i("7f7f"),i("c5f6"),i("16cd")),o=i("c54a"),s={data:function(){return{formData:{}}},props:{disabled:{type:Boolean,default:!1},config:{type:[Array,String],required:!0},data:{type:[Array,Object]},order:{type:[String,Number]},name:{type:String}},computed:{pluginConfig:function(){var e=this.config||"";return e&&"string"===typeof e&&(e=JSON.parse(e)),e||[]},watchInit:function(){return{pluginConfig:this.pluginConfig,data:this.data}}},watch:{watchInit:{immediate:!0,deep:!0,handler:function(){this.initData()}}},methods:{validate:function(){var e=this;return this.handleData(),new Promise((function(t,i){e.$refs.formData.validate((function(n,a){if(e.order||Object(o["d"])(e.order,"number")||i("插件【".concat(e.name,"】: 执行顺序不能为空")),n)t();else{if(a){var l=Object.keys(a)[0],s=a[l][0]["message"]||"未完善插件配置";i("插件【".concat(e.name,"】: ").concat(s))}i()}}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleData:function(){var e=this,t=[],i=Object.assign({},this.formData);Object.keys(i).forEach((function(n){var a=e.pluginConfig.find((function(e){return e.field===n}))||{};if("checkbox"===a.component&&!i[n].length)return!1;var l={item:n,type:a.dataType,value:JSON.stringify(i[n])};t.push(l)})),this.$emit("update:data",Object(l["b"])(t))},initData:function(){var e=this,t={};this.pluginConfig.forEach((function(i){if("checkbox"===i.component&&(t[i.field]=[]),Object.keys(i).some((function(e){return"default"===e}))&&(t[i.field]=i.default),e.data&&e.data.length>0){var n=e.data.find((function(e){return e.item===i.field}));n&&(t[i.field]=JSON.parse(n.value))}})),this.formData=Object.assign({},this.formData,t)}}},r=s,c=(i("1884"),i("2877")),u=Object(c["a"])(r,n,a,!1,null,null,null);t["default"]=u.exports},7555:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"plugin-list"},[i("el-checkbox",{staticStyle:{"padding-bottom":"10px","font-weight":"bold"},attrs:{indeterminate:e.isIndeterminate,disabled:e.disabled},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n    全选\n  ")]),i("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.pluginData,(function(t,n){return i("el-collapse-item",{key:n,attrs:{name:n,title:t.chnName,disabled:!t.config}},[i("template",{slot:"title"},[i("div",{staticClass:"plugin-title"},[i("el-checkbox",{attrs:{label:t.chnName,disabled:e.disabled},on:{change:e.handleCheckbox},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),t.config?i("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("配置")]):e._e(),t.instruction?i("div",{staticClass:"use-info"},[i("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:"使用说明",trigger:"hover",width:"650"}},[i("div",{staticClass:"content"},[e._l(t.instructions,(function(t,n){return i("p",{key:n,staticClass:"instruction-text"},[e._v(" "+e._s(t)+" ")])})),i("br")],2),i("span",{attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"el-icon-warning-outline"}),e._v(" 使用说明")])])],1):e._e()],1)]),i("plugin-form",{ref:"pluginForm",refInFor:!0,attrs:{disabled:!0,config:t.config,order:t.order,name:t.chnName,data:t.apiPluginConfigs},on:{"update:data":function(i){return e.$set(t,"apiPluginConfigs",i)}}})],2)})),1)],1)},a=[],l=(i("28a5"),i("ac6a"),i("6cdf")),o={data:function(){return{activeNames:[],pluginData:[],checkAll:!1,isIndeterminate:!1}},props:{config:{type:[Array,Object],required:!0,default:function(){return[]}},disabled:{default:!1,type:Boolean}},computed:{selection:function(){var e=[];return this.pluginData.forEach((function(t){t.check&&e.push(t)})),e}},components:{pluginForm:l["default"]},watch:{config:{immediate:!0,deep:!0,handler:function(){this.initPluginData()}},selection:{deep:!0,handler:function(){this.emitData()}}},methods:{handleCheckAllChange:function(e){this.pluginData.forEach((function(t){t.check=!!e})),this.isIndeterminate=!1},handleCheckbox:function(){this.checkAll=this.selection.length===this.pluginData.length,this.isIndeterminate=this.selection.length>0&&this.selection.length<this.pluginData.length},emitData:function(){this.$emit("change",this.selection)},initPluginData:function(){var e=this;this.pluginData=[],this.config&&this.config.length&&this.config.forEach((function(t){var i=Object.assign({},t,{plugin:t.id,check:!1,id:null}),n=i.instruction.split("\n");e.pluginData.push(Object.assign({},i,{instructions:n}))}))}}},s=o,r=(i("8637"),i("4fda"),i("2877")),c=Object(r["a"])(s,n,a,!1,null,"1356a26e",null);t["default"]=c.exports},"7e27":function(e,t,i){"use strict";i("7f4a")},"7f4a":function(e,t,i){},8612:function(e,t,i){"use strict";i("a2c2")},8637:function(e,t,i){"use strict";i("54df")},"8e0f":function(e,t,i){"use strict";i("a45a")},a2c2:function(e,t,i){},a45a:function(e,t,i){},bb86:function(e,t,i){}}]);