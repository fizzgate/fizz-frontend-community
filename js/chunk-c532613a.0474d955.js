/*!
 * Fizz-Admin v3.2.0-beta1
 * (c) 2020-2024 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c532613a"],{"0f1b":function(e,t,a){},"28d2":function(e,t,a){},"32a6":function(e,t,a){var r=a("241e"),n=a("c3a1");a("ce7e")("keys",(function(){return function(e){return n(r(e))}}))},"3ed6":function(e,t,a){"use strict";a("8ed7")},"4b9e":function(e,t,a){"use strict";a("0f1b")},5850:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return d}));a("8e6e"),a("ac6a"),a("456d");var r=a("bd86"),n=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=function(){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/list"),method:"get"})},s=function(e,t,a){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/page"),method:"get",params:c(c({},a),{},{current:e,size:t})})},f=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/detail/").concat(e),method:"get"})},u=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/save"),method:"post",data:e})},d=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc/config/update"),method:"post",data:e})}},"62e9":function(e,t,a){},"6cdf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formData",staticClass:"plugin-form",attrs:{disabled:e.disabled,model:e.formData,size:"small"}},[t("plugin-form-item",{attrs:{pluginConfig:e.pluginConfig,formData:e.formData}})],1)],1)},n=[],i=(a("6762"),a("2fdb"),a("75fc")),o=(a("7514"),a("ac6a"),a("456d"),a("7f7f"),a("c5f6"),a("16cd")),c=a("c54a"),l=a("80a3"),s={components:{pluginFormItem:l["default"]},data:function(){return{formData:{},pluginConfigCache:{},result:[]}},props:{disabled:{type:Boolean,default:!1},config:{type:[Array,String],required:!0},data:{type:[Array,Object]},order:{type:[String,Number]},name:{type:String}},computed:{pluginConfig:function(){var e=this.config||"";return e&&"string"===typeof e&&(e=JSON.parse(e)),this.renderData(e||[])},watchInit:function(){return{pluginConfig:this.pluginConfig,data:this.data}}},watch:{watchInit:{immediate:!0,deep:!0,handler:function(){this.initData()}}},methods:{validate:function(){var e=this;return this.handleData(),new Promise((function(t,a){e.$refs.formData.validate((function(r,n){if(e.order||Object(c["d"])(e.order,"number")||a("插件【".concat(e.name,"】: 执行顺序不能为空")),r)t();else{if(n){var i=Object.keys(n)[0],o=n[i][0]["message"]||"未完善插件配置";a("插件【".concat(e.name,"】: ").concat(o))}a()}}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleData:function(){var e=this,t=[],a=Object.assign({},this.formData);Object.keys(a).forEach((function(r){var n=e.pluginConfigCache.find((function(e){return e.field===r}))||{};if("checkbox"===n.component&&!a[r].length)return!1;var i={item:r,type:n.dataType,value:JSON.stringify(a[r])};t.push(i)})),this.result=[],this.filterResult(this.pluginConfig,Object(o["c"])(t)),console.log(JSON.stringify(this.result,null,4)),this.$emit("update:data",this.result)},filterResult:function(e,t){var a=this;e.forEach((function(e){var r=t.filter((function(t){return t.item==e.field}));if(r.length>0){a.result=[].concat(Object(i["a"])(a.result),Object(i["a"])(r));var n=e.options;if(n&&n.length>0){var o=n.filter((function(e){return e.value==r[0].value}));o.length>0&&o[0].refData&&a.filterResult(o[0].refData,t)}}}))},initData:function(){var e=this,t={};this.pluginConfigCache.forEach((function(a){if("checkbox"===a.component&&(t[a.field]=[]),Object.keys(a).some((function(e){return"default"===e}))&&(t[a.field]=a.default),e.data&&e.data.length>0){var r=e.data.find((function(e){return e.item===a.field}));r&&(t[a.field]=JSON.parse(r.value))}})),this.formData=Object.assign({},this.formData,t)},getOpt:function(e,t){e=JSON.parse(JSON.stringify(e));var a=e.filter((function(e){return e.vIf===t}));return a.map((function(e){return delete e.vIf,e})),a},renderData:function(e){var t=this;this.pluginConfigCache=e;var a=function a(r){r.forEach((function(r){if(["radio","select","checkbox"].includes(r.component)){var n=r.options;n.map((function(r){r.refs&&r.refs.length>0&&(r.refData=[],r.refs.forEach((function(n){var o,c=t.getOpt(e,n);c.length>0&&(a(c),(o=r.refData).push.apply(o,Object(i["a"])(c)))})))}))}}))};return a(e),e.filter((function(e){return!e.vIf}))}}},f=s,u=(a("ffb0"),a("2877")),p=Object(u["a"])(f,r,n,!1,null,null,null);t["default"]=p.exports},"74a0":function(e,t,a){"use strict";a.r(t);a("7f7f");var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":"",width:"900px",top:"5vh","before-close":e.handleClose,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{model:e.formData,rules:e.rules,disabled:e.disabled,size:"small","label-width":"140px"}},[t("el-form-item",{attrs:{label:"服务信息",prop:"rpcServiceId"}},[t("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择服务",filterable:"",clearable:""},on:{change:e.handleServiceChange},model:{value:e.formData.rpcServiceId,callback:function(t){e.$set(e.formData,"rpcServiceId",t)},expression:"formData.rpcServiceId"}},e._l(e.serviceOptions,(function(a,r){return t("el-option",{key:r,attrs:{label:((1===a.type?"[Dubbo] ":2===a.type&&"[gRPC] ")||4===a.type&&"[WebService] ")+a.service+(1===a.type&&(a.version||a.group)?" ("+a.version+"-"+a.group+")":""),value:a.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.service))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"12px"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:1===a.type&&(a.version||a.group),expression:"item.type === 1 && (item.version || item.group)"}]},[e._v(e._s(a.version)+"-"+e._s(a.group))]),e._v("\n            "+e._s((1===a.type?"Dubbo":2===a.type&&"gRPC")||4===a.type&&"WebService")+"\n          ")])])})),1),!e.disabled&&e.permissionList.serviceAddBtn?t("span",{staticClass:"add-service",on:{click:function(t){e.showServiceAdd=!0}}},[e._v("新增服务")]):e._e()],1),4!=e.formData.type?t("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),t("span",{staticClass:"key-tips"},[e._v("接口名称是一个自定义名称，如：获取用户信息接口")])],1):t("el-form-item",{attrs:{label:"端点名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入端点名称",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),t("span",{staticClass:"key-tips"},[e._v("端点名称是一个自定义名称，如：获取用户信息接口")])],1),4!=e.formData.type?t("el-form-item",{attrs:{label:"方法名",prop:"method"}},[t("el-input",{attrs:{placeholder:"请输入方法名",clearable:""},model:{value:e.formData.method,callback:function(t){e.$set(e.formData,"method",t)},expression:"formData.method"}}),t("span",{staticClass:"key-tips"},[e._v("方法名，如：getUserInfo")])],1):t("el-form-item",{attrs:{label:"端点路径",prop:"name"}},[t("el-input",{attrs:{placeholder:"如：/WebServices/WeatherWS.asmx?wsdl",clearable:""},model:{value:e.formData.method,callback:function(t){e.$set(e.formData,"method",t)},expression:"formData.method"}}),t("span",{staticClass:"key-tips"},[e._v("端点路径是WebService的asmx路径")])],1),1===e.formData.type?[t("el-form-item",{attrs:{label:"参数类型",prop:"paramTypes"}},[t("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.formData.paramTypes,callback:function(t){e.$set(e.formData,"paramTypes",t)},expression:"formData.paramTypes"}}),t("span",{staticClass:"key-tips"},[e._v("\n          输入方法的参数类型列表，多个参数用逗号分隔，如：\n          "),t("br"),e._v("getUserInfo(int age, String name, Depart depart) 则输入int,java.lang.String,com.abc.pojo.Depart\n        ")])],1)]:e._e(),t("el-form-item",{attrs:{label:"备注",prop:"note"}},[t("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.formData.note,callback:function(t){e.$set(e.formData,"note",t)},expression:"formData.note"}})],1)],2),e.disabled?e._e():t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提 交\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleClose()}}},[e._v("取 消")])],1),t("service-dynamic-detail",{attrs:{type:"add",title:"新增RPC服务",visible:e.showServiceAdd,callback:e.getAllServiceOptions},on:{"update:visible":function(t){e.showServiceAdd=t}}})],1)},n=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("7618")),o=(a("7514"),a("bd86")),c=(a("c5f6"),a("5880")),l=a("16cd"),s=a("adc3"),f=a("7b22"),u=a("b874"),p=a("9fa8");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"rpc-api-detail",data:function(){return{loading:!1,btnLoading:!1,formData:{},rules:{type:[{required:!0,message:"必填",trigger:"blur"}],rpcServiceId:[{required:!0,message:"必填",trigger:"blur"}],name:[{required:!0,message:"必填",trigger:"blur"}],method:[{required:!0,message:"必填",trigger:"blur"}]},serviceOptions:[],inputVisible:!1,showServiceAdd:!1}},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"add"},id:{type:[String,Number]},callback:{type:Function},title:{type:String}},computed:m(m({},Object(c["mapGetters"])(["permission"])),{},{permissionList:function(){return{serviceAddBtn:this.vaildData(this.permission.rpc_service_add,!1)}},dialogTitle:function(){return this.title||"add"===this.type&&"新增"||"edit"===this.type&&"编辑"||"view"===this.type&&"查看"||"详情"},disabled:function(){return"view"===this.type||!1}}),components:{serviceDetail:u["default"],ServiceDynamicDetail:p["default"]},watch:{visible:function(e){e?this.getDetail():this.formData={}}},mounted:function(){this.getAllServiceOptions()},methods:{compleServiceInfo:function(e){if(!e)return!1;var t={};"string"===typeof e||"number"===typeof e?t=this.serviceOptions.find((function(t){return parseInt(t.id)===parseInt(e)})):"object"===Object(i["a"])(e)&&(t=e),this.formData.type=t.type||""},handleServiceChange:function(e){if(!e)return!1;this.compleServiceInfo(e)},getAllServiceOptions:function(){var e=this;Object(f["b"])({typesForCondition:"1,2,4"}).then((function(t){var a=t.data.data.records.map((function(e){var t=[],a={};try{e.config&&(t=JSON.parse(e.config),t.forEach((function(e){a[e.item]=JSON.parse(e.value)})))}catch(r){console.log(r)}return a.id=e.id,a.service=e.service,a.type=e.type,a}));e.serviceOptions=a||[]}))},rowSave:function(e){var t=this;this.btnLoading=!0,Object(s["a"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"保存成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},rowUpdate:function(e){var t=this;this.btnLoading=!0,Object(s["g"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"修改成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},getDetail:function(){var e=this;if(!this.id)return this.formData={},!1;this.loading=!0,Object(s["c"])(this.id).then((function(t){var a=t.data.data;e.formData=Object.assign({},a||{}),e.compleServiceInfo(e.formData.rpcServiceId)})).finally((function(){e.loading=!1}))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=Object(l["c"])(e.formData);2===e.formData.type&&delete a.paramTypes,"edit"===e.type?e.rowUpdate(a):e.rowSave(a)}}))},handleClose:function(e){this.$emit("update:visible",!1),e&&e()}}},v=b,h=(a("3ed6"),a("2877")),g=Object(h["a"])(v,r,n,!1,null,"9e83059a",null);t["default"]=g.exports},"7b22":function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return f})),a.d(t,"f",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return m}));a("8e6e"),a("ac6a"),a("456d");var r=a("bd86"),n=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/list"),method:"get",params:c({current:1,size:1e5},e)})},s=function(e,t,a){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/list"),method:"get",params:c(c({},a),{},{current:e,size:t})})},f=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/detail/").concat(e),method:"get"})},u=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/remove"),method:"post",params:{ids:e}})},p=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/save"),method:"post",data:e})},d=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/update"),method:"post",data:e})},m=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/list"),method:"get",params:c(c({},e),{},{current:1,size:-1})})}},"7df7":function(e,t,a){"use strict";a("62e9")},"80a3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[e.pluginConfig.length?e._l(e.pluginConfig,(function(a,r){return t("el-form-item",{key:r,attrs:{label:a.label,prop:a.field,rules:a.rules}},["input"===a.component?[["number","long","double"].some((function(e){return e===a.dataType}))?t("el-input",{attrs:{type:"number",placeholder:a.placeholder+"??",autocomplete:"off",clearable:""},model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,e._n(t))},expression:"formData[comp.field]"}}):t("el-input",{attrs:{placeholder:a.placeholder,autocomplete:"off",clearable:""},model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,t)},expression:"formData[comp.field]"}})]:e._e(),"select"===a.component?[t("el-select",{attrs:{placeholder:a.placeholder,clearable:""},model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,t)},expression:"formData[comp.field]"}},e._l(a.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"radio"===a.component?[t("el-radio-group",{model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,t)},expression:"formData[comp.field]"}},e._l(a.options,(function(a){return t("el-radio",{key:a.value,attrs:{label:a.value}},[e._v("\n                "+e._s(a.label)+"\n              ")])})),1)]:e._e(),"checkbox"===a.component?[t("el-checkbox-group",{model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,t)},expression:"formData[comp.field]"}},e._l(a.options,(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value}},[e._v("\n                "+e._s(a.label)+"\n              ")])})),1)]:e._e(),"textarea"===a.component?[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:a.placeholder,autocomplete:"off",clearable:""},model:{value:e.formData[a.field],callback:function(t){e.$set(e.formData,a.field,t)},expression:"formData[comp.field]"}})]:e._e(),t("div",{staticStyle:{color:"#999","font-size":"12px"}},[e._v("\n            "+e._s(a.desc)+"\n             "),a.tooltipValue?t("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:a.tooltipLabel||"使用说明",width:a.tooltipWidth||500}},[t("div",{staticClass:"content"},[e._v("\n                  "+e._s(a.tooltipValue)+"\n                ")]),t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("("+e._s(a.tooltipLabel||"使用说明")+")")])]):e._e()],1),e.getRefData(e.formData[a.field],a).length>0?t("div",{staticClass:"cycle-con"},[t("plugin-form-item",{attrs:{pluginConfig:e.getRefData(e.formData[a.field],a),formData:e.formData}})],1):e._e()],2)})):[t("el-alert",{attrs:{title:"当前插件配置有误",type:"warning",closable:!1}})]],2)},n=[],i={name:"pluginFormItem",data:function(){return{}},props:{pluginConfig:{type:Array,default:function(){return[]}},formData:{type:Object,default:function(){return{}}}},methods:{getRefData:function(e,t){try{var a=t.options,r=a.filter((function(t){return t.value==e}))[0];if(r.refData&&r.refData.length>0){var n=r.refData.map((function(e){return delete e.ref,e}));return n}return[]}catch(i){}return[]}}},o=i,c=(a("7df7"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},"8ed7":function(e,t,a){},"9fa8":function(e,t,a){"use strict";a.r(t);a("7f7f");var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":"",width:"900px",top:"5vh","before-close":e.handleClose,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{ref:"formData",attrs:{disabled:e.disabled,model:e.formData,rules:e.rules,"label-width":"90px",size:"small"}},[t("el-form-item",{attrs:{label:"服务类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择服务",filterable:"",clearable:""},on:{change:e.handleServiceChange},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.serviceOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[t("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"12px"}},[e._v("\n                "+e._s(a.name)+"\n                ")])])})),1)],1),t("el-form-item",{attrs:{label:"名称",prop:"service"}},[t("el-input",{attrs:{placeholder:"请输入 名称",clearable:""},model:{value:e.formData.service,callback:function(t){e.$set(e.formData,"service",t)},expression:"formData.service"}}),t("div",{staticClass:"key-tips"},[e._v("\n              服务名可自定义,保存后服务名不能修改\n            ")])],1),t("el-form-item",{attrs:{label:"描述",prop:"decription"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入 服务描述",clearable:""},model:{value:e.formData.decription,callback:function(t){e.$set(e.formData,"decription",t)},expression:"formData.decription"}})],1)],1),t("plugin-form",{ref:"pluginForm",attrs:{disabled:e.disabled||e.formData.disabled,config:e.formData.config,order:e.formData.order,name:e.formData.name,data:e.formData.configData},on:{"update:data":function(t){return e.$set(e.formData,"configData",t)}}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保 存")])],1)],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("a8db")),o=(a("6762"),a("2fdb"),a("f559"),a("04ff"),a("bd86")),c=(a("c5f6"),a("7b22")),l=a("fee70"),s=a("6cdf"),f=a("5850"),u=["config","configData"];function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"rpc-service-detail",data:function(){return{loading:!1,btnLoading:!1,serviceOptions:[],formData:{type:1,order:1,disabled:!1,id:"",name:"",configData:[]},rules:{type:[{required:!0,message:"必填",trigger:"blur"}],service:[{required:!0,message:"必填",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"add"},id:{type:[String,Number]},callback:{type:Function},title:{type:String},serviceType:{type:Number,default:1}},computed:{dialogTitle:function(){return this.title||"add"===this.type&&"新增"||"edit"===this.type&&"编辑"||"view"===this.type&&"查看"||"详情"},disabled:function(){return"view"===this.type||!1}},components:{tooltipService:l["default"],pluginForm:s["default"]},watch:{visible:function(e){e&&this.id&&(this.formData=d(d({},this.formData),{},{service:this.service||"",id:this.id||""})),e&&(this.$route.query.type?this.formData.type=Number.parseInt(this.$route.query.type):this.formData.type=this.serviceType,this.getDetail(),this.onLoad())}},methods:{getAllServiceOptions:function(){var e=this;Object(f["c"])().then((function(t){e.serviceOptions=t.data.data||[]}))},onLoad:function(){this.getAllServiceOptions(),this.handleServiceChange()},handleServiceChange:function(){var e=this;Object(f["b"])(this.formData.type).then((function(t){var a=t.data.data,r=a.config&&a.config.startsWith("[")?JSON.parse(a.config):[];e.$set(e.formData,"config",r)}))},getDetail:function(){var e=this;if(!this.id)return!1;this.loading=!0,["view","edit"].includes(this.type)&&Object(c["c"])(this.id).then((function(t){var a=t.data.data,r=[];try{r=JSON.parse(a.config)}catch(n){console.log(n)}e.formData=d(d({},e.formData),{},{service:a.service,id:a.id,description:a.decription,configData:r}),console.log(e.formData)})).finally((function(){e.loading=!1}))},handleSubmitData:function(){var e=Object.assign({},this.formData),t=(e.config,e.configData),a=Object(i["a"])(e,u);return a.config=JSON.stringify(t),a},update:function(e){var t=this;this.btnLoading=!0,Object(c["g"])(e).then((function(e){t.$message.success("修改成功"),t.handleClose((function(){t.callback&&t.callback()}))})).finally((function(){t.btnLoading=!1}))},add:function(e){var t=this;this.btnLoading=!0,Object(c["a"])(e).then((function(e){t.$message.success("新增成功"),t.handleClose((function(){t.callback&&t.callback()}))})).finally((function(){t.btnLoading=!1}))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){t&&e.$refs.pluginForm.validate().then((function(){var t=e.handleSubmitData();"add"===e.type?e.add(t):e.update(t)}))}))},handleClose:function(e){this.$emit("update:visible",!1),e&&e()}}},b=m,v=(a("c18c"),a("2877")),h=Object(v["a"])(b,r,n,!1,null,"50aa37d0",null);t["default"]=h.exports},a8db:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("ed33"),n=a.n(r),i=a("8aae"),o=a.n(i);function c(e,t){if(null==e)return{};var a,r,n={},i=o()(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}function l(e,t){if(null==e)return{};var a,r,i=c(e,t);if(n.a){var o=n()(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}},adc3:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return f})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return p})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return m}));a("8e6e"),a("ac6a"),a("456d"),a("a481");var r=a("bd86"),n=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=function(e,t,a){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/list"),method:"get",params:c(c({},a),{},{current:e,size:t})})},s=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/detail/").concat(e),method:"get",params:{id:e}})},f=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/save"),method:"post",data:e})},p=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/update"),method:"post",data:e})},d=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/export"),method:"post",params:{ids:e},responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/json;charset=utf-8"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,unescape(e.headers.filename.replace(/\\u/g,"%u")));else{var a=document.createElement("a"),r=window.URL.createObjectURL(t);a.href=r,a.download=unescape(e.headers.filename.replace(/\\u/g,"%u")),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}}))},m=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/import"),method:"post",data:e})}},b874:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":"",width:"900px","before-close":e.handleClose,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{model:e.formData,rules:e.rules,disabled:e.disabled,size:"small","label-width":"140px"}},[t("el-form-item",{attrs:{label:"服务类型：",prop:"type"}},[t("el-radio-group",{attrs:{disabled:e.serviceType},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[t("el-radio",{attrs:{label:1}},[e._v("Dubbo")]),t("el-radio",{attrs:{label:2}},[e._v("gRPC")]),t("el-radio",{attrs:{label:3}},[e._v("HTTP")]),t("el-radio",{attrs:{label:4}},[e._v("SOAP")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.formData.type,expression:"formData.type === 3"}],staticClass:"key-tips"},[e._v("只需填写不支持服务发现的HTTP服务")])],1),t("el-form-item",{attrs:{label:"服务名",prop:"service"}},[t("el-input",{attrs:{placeholder:"请输入服务名",clearable:"",disabled:"edit"===e.type},model:{value:e.formData.service,callback:function(t){e.$set(e.formData,"service",t)},expression:"formData.service"}}),3===e.formData.type?t("span",{staticClass:"key-tips"},[e._v("\n        服务名可自定义, 网关会根据该名称来获取实例的IP和端口，如：OrderService;  保存后服务名不能修改\n        ")]):2===e.formData.type?t("span",{staticClass:"key-tips"},[e._v("\n        服务名须包含包路径，如：com.abc.UserService，gRPC服务需启用反射功能"),t("tooltip-service",{staticClass:"link",attrs:{title:"样例"}}),e._v("\n        ;  保存后服务名不能修改\n      ")],1):t("span",{staticClass:"key-tips"},[e._v("服务名须包含包路径，如：com.abc.UserService;  保存后服务名不能修改")])],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:"",type:"textarea"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),1===e.formData.type?[t("el-form-item",{key:"version",attrs:{label:"版本",prop:"version"}},[t("el-input",{attrs:{placeholder:"请输入版本",clearable:""},model:{value:e.formData.version,callback:function(t){e.$set(e.formData,"version",t)},expression:"formData.version"}}),t("span",{staticClass:"key-tips"},[e._v("Dubbo接口的版本号")])],1),t("el-form-item",{key:"group",attrs:{label:"分组",prop:"group"}},[t("el-input",{attrs:{placeholder:"请输入分组",clearable:""},model:{value:e.formData.group,callback:function(t){e.$set(e.formData,"group",t)},expression:"formData.group"}}),t("span",{staticClass:"key-tips"},[e._v("Dubbo接口的分组")])],1)]:[t("el-form-item",{key:"instance",attrs:{label:"实例列表",prop:"instance"}},[t("el-input",{attrs:{type:"textarea",clearable:"",placeholder:"如：10.2.3.114:8080 或 user.fizzgate.com:9090"},model:{value:e.formData.instance,callback:function(t){e.$set(e.formData,"instance",t)},expression:"formData.instance"}}),3===e.formData.type?t("span",{staticClass:"key-tips"},[e._v("输入HTTP服务的实例IP:Port 或 域名:Port, 多个实例用逗号分隔")]):2===e.formData.type?t("span",{staticClass:"key-tips"},[e._v("输入gRPC服务的实例IP:Port 或 域名:Port, 多个实例用逗号分隔")]):e._e()],1),t("el-form-item",{key:"loadBalanceType",attrs:{label:"负载均衡：",prop:"loadBalanceType"}},[t("el-radio-group",{model:{value:e.formData.loadBalanceType,callback:function(t){e.$set(e.formData,"loadBalanceType",t)},expression:"formData.loadBalanceType"}},[t("el-radio",{attrs:{label:1}},[e._v("轮询")]),t("el-radio",{attrs:{label:2}},[e._v("随机")])],1)],1)]],2),e.disabled?e._e():t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提 交\n    ")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleClose()}}},[e._v("取 消")])],1)],1)},n=[],i=(a("c5f6"),a("16cd")),o=a("7b22"),c=a("fee70"),l={name:"rpc-service-detail",data:function(){return{loading:!1,btnLoading:!1,formData:{},rules:{type:[{required:!0,message:"必填",trigger:"blur"}],service:[{required:!0,message:"必填",trigger:"blur"}],instance:[{required:!0,message:"必填",trigger:"change"}],loadBalanceType:[{required:!0,message:"必填",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"add"},id:{type:[String,Number]},callback:{type:Function},title:{type:String},serviceType:{type:Number}},computed:{dialogTitle:function(){return this.title||"add"===this.type&&"新增"||"edit"===this.type&&"编辑"||"view"===this.type&&"查看"||"详情"},disabled:function(){return"view"===this.type||!1}},components:{tooltipService:c["default"]},watch:{visible:function(e){e&&this.id&&this.getDetail(),this.formData={type:this.serviceType||1,loadBalanceType:1}}},methods:{rowSave:function(e){var t=this;this.btnLoading=!0,Object(o["a"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"保存成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},rowUpdate:function(e){var t=this;this.btnLoading=!0,Object(o["g"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"修改成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},getDetail:function(){var e=this;if(!this.id)return!1;this.loading=!0,Object(o["c"])(this.id).then((function(t){var a=t.data.data;e.formData=Object.assign({},a||{})})).finally((function(){e.loading=!1}))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=Object(i["c"])(e.formData);1===a.type?delete a.instance:(delete a.version,delete a.group),"edit"===e.type?e.rowUpdate(a):e.rowSave(a)}}))},handleClose:function(e){this.$emit("update:visible",!1),e&&e()}}},s=l,f=(a("4b9e"),a("2877")),u=Object(f["a"])(s,r,n,!1,null,"841ea9aa",null);t["default"]=u.exports},bdb3:function(e,t,a){"use strict";a("c9b4")},c18c:function(e,t,a){"use strict";a("28d2")},c9b4:function(e,t,a){},ce7e:function(e,t,a){var r=a("63b6"),n=a("584a"),i=a("294c");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],o={};o[e]=t(a),r(r.S+r.F*i((function(){a(1)})),"Object",o)}},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols},fb07:function(e,t,a){},fee70:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:e.title}},[t("div",{staticClass:"content"},[e._v("\n    server = ServerBuilder.forPort(port)"),t("br"),e._v("    \n    .addService(new UserService())"),t("br"),e._v("    \n    .addService(new ShoppingCartService())"),t("br"),e._v("    \n    // gRPC reflection enabled"),t("br"),e._v("    \n    .addService(ProtoReflectionService.newInstance())"),t("br"),e._v("    \n    .build();"),t("br")]),t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("("+e._s(e.title)+")")])])},n=[],i={name:"tooltip-service",props:{title:{type:String,default:"示例"}}},o=i,c=(a("bdb3"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},ffb0:function(e,t,a){"use strict";a("fb07")}}]);