/*!
 * Fizz-Admin v2.6.6
 * (c) 2020-2022 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views.publicNetWork"],{"00a0":function(e,t,a){},1191:function(e,t,a){"use strict";a("9129")},1310:function(e,t){function a(e){return null!=e&&"object"==typeof e}e.exports=a},"1dbd":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("ade3"),r=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(r["a"])({url:"".concat(i["a"],"/degrade-rule/path/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(r["a"])({url:"".concat(i["a"],"/degrade-rule/path/detail/").concat(e),method:"get",params:{id:e}})},u=function(e){return Object(r["a"])({url:"".concat(i["a"],"/degrade-rule/path/remove"),method:"post",params:{ids:e}})},d=function(e){return Object(r["a"])({url:"".concat(i["a"],"/degrade-rule/path/save"),method:"post",data:e})},p=function(e){return Object(r["a"])({url:"".concat(i["a"],"/degrade-rule/path/update"),method:"post",data:e})}},"1e18":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i}));var n=[{label:"接口专线",value:1},{label:"网站专线",value:2}],r=[{label:"是",value:1},{label:"否",value:0}],i=[{label:"未配对",value:1},{label:"已配对",value:2},{label:"需重新配对",value:3}]},"2f32":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return m}));a("8e6e"),a("ac6a"),a("456d");var n=a("ade3"),r=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/save"),method:"post",data:e})},d=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/update"),method:"post",data:e})},p=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/detail/").concat(e),method:"get"})},f=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/pair-code/detail/").concat(e),method:"get"})},m=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line/pair-code/regenerate"),method:"post",data:e})}},"38e0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",{staticClass:"preview"},[a("el-card",{staticClass:"preview-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[e.documentName?a("el-tag",[e._v(e._s(e.documentName))]):e._e(),e._v(" \r\n        "),a("b",[e._v(e._s(e.title))])],1),a("div",{attrs:{id:"micro"}})])],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=a("34ac9"),s=a("1ca4"),c=a("27ae"),l=a("0a5a"),u=a("e223");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={name:"preview",data:function(){return{app:null}},computed:{id:function(){return this.$route.query.id},documentName:function(){return this.$route.query.documentName},type:function(){return this.$route.query.type},pageType:function(){return this.$route.query.pageType},title:function(){return"interface"===this.pageType?"接口文档预览":"document"===this.pageType?"文档集预览":""},pairId:function(){return this.$route.query.pairId},dedicatedLineBizId:function(){return this.$route.query.dedicatedLineBizId}},watch:{$route:{deep:!0,handler:function(){this.app&&(this.app.unmount(),this.actions.offGlobalStateChange(),this.loadApp())}}},methods:{loadApp:function(){var e=this;if(this.id&&Constant.document&&Constant.document.plugins&&Constant.document.plugins.openDocument){var t={pairId:this.pairId,documentId:this.id,dedicatedLineBizId:this.dedicatedLineBizId,type:this.type,headers:{Authorization:"Basic ".concat(c["Base64"].encode("".concat(s["a"].clientId,":").concat(s["a"].clientSecret))),"Blade-Auth":"bearer "+Object(l["a"])()}};this.app=Object(o["b"])(p(p({},Constant.document.plugins.openDocument),{},{container:"#micro",props:t}));var a=this.actions=Object(u["b"])(t),n=a.onGlobalStateChange;this.actions.setGlobalState(t),n((function(t){e.actions.setGlobalState(t)}))}}},mounted:function(){this.loadApp()},beforeDestroy:function(){this.app.unmount(),this.actions.offGlobalStateChange()}},m=f,h=(a("cadc"),a("2877")),b=Object(h["a"])(m,n,r,!1,null,null,null);t["default"]=b.exports},"3a1d":function(e,t,a){},"4c02":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"d",(function(){return f}));a("8e6e"),a("ac6a"),a("456d");var n=a("ade3"),r=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/detail/").concat(e),method:"get"})},u=function(e){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/remove"),method:"post",params:{ids:e}})},d=function(e){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/save"),method:"post",data:e})},p=function(e){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/update"),method:"post",data:e})},f=function(){return Object(r["a"])({url:"".concat(i["a"],"/alarm-subscription/simple-user-list"),method:"get"})}},"4cef":function(e,t){var a=/\s/;function n(e){var t=e.length;while(t--&&a.test(e.charAt(t)));return t}e.exports=n},5321:function(e,t,a){"use strict";a("00a0")},5614:function(e,t,a){},"59df":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"查看配对码","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"600px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:10,disabled:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("input",{ref:"input",staticClass:"hidden-input"}),e.disabled?e._e():a("footer",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleCopy}},[e._v("\n      复制配对码\n    ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.renderCode}},[e._v("\n      重新生成\n    ")])],1)],1)},r=[],i=(a("c5f6"),a("2f32")),o={name:"matchCodeDialog",data:function(){return{code:""}},props:{visible:{type:Boolean,default:!1},id:{type:String|Number}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}}},methods:{handleCopy:function(){this.$refs.input.value=this.code,this.$refs.input.select(),document.execCommand("copy"),this.$message({message:"配对码已复制到粘贴板！",type:"success"})},getDetail:function(){var e=this;this.id&&Object(i["d"])(this.id).then((function(t){200===t.data.code?e.code=t.data.data.pairCode:e.$message({type:"error",message:t.data.msg||"配对码查询失败！"})}))},renderCode:function(){var e=this;this.$confirm("重新生成配对码后旧的配对码失效（已配对的请求将在新配对码配对成功后失败），确认重新生成？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["e"])({id:e.id,pairCode:e.code}).then((function(t){200===t.data.code?(e.$message.success("配对码已重新生成"),e.getDetail(),e.$emit("doSearch")):e.$message({type:"error",message:t.data.msg||"配对码查询失败！"})}))}))}},mounted:function(){this.getDetail()}},s=o,c=(a("fcd9"),a("2877")),l=Object(c["a"])(s,n,r,!1,null,"f3ed6558",null);t["default"]=l.exports},6583:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("ade3")),o=a("5880"),s=a("7485"),c=a("1e18");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"business",data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,editBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,menuWidth:200,column:[{label:"专线业务",prop:"name",search:!0},{label:"专线类型",prop:"type",search:!0,dicData:c["a"],type:"select",width:90},{label:"是否公开",prop:"isPublic",dicData:c["b"],width:80},{label:"文档集",prop:"docSetName"},{label:"联系邮箱",prop:"email"},{label:"创建时间",prop:"createTime",width:130},{label:"更新时间",prop:"updateTime",width:130}]},data:[]}},computed:u(u({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.publicNetwork_business_add,!1),editBtn:this.vaildData(this.permission.publicNetwork_business_edit,!1),delBtn:this.vaildData(this.permission.publicNetwork_business_remove,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{rowDel:function(e){var t=this;this.$confirm("你确定要删除此专线业务吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["d"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){["add","edit","view"].includes(t)&&this.$router.push({path:"/public-network/business/".concat(t),query:{id:this.form.id}})},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))}}},p=d,f=a("2877"),m=Object(f["a"])(p,n,r,!1,null,"035c1258",null);t["default"]=m.exports},"6e09":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"访问方法","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"500px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-main"},[e._l(e.services,(function(t,n){return a("p",{key:n,staticClass:"url"},[e._v("http://网关IP:8601/"+e._s(t)+"/**")])})),a("p",{staticClass:"registry"},[e._v("如果使用注册中心，可通过fizz-dedicated-line服务访问：")]),e._l(e.services,(function(t,n){return a("p",{key:n,staticClass:"url"},[e._v("http://fizz-dedicated-line/"+e._s(t)+"/**")])})),a("p",{staticClass:"tips"},[e._v("(**为具体的接口路径)")])],2)])},r=[],i=(a("c5f6"),{name:"usageDialog",data:function(){return{code:""}},props:{visible:{type:Boolean,default:!1},id:{type:String|Number},services:{type:Array,default:function(){return[]}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}}},methods:{},mounted:function(){}}),o=i,s=(a("5321"),a("2877")),c=Object(s["a"])(o,n,r,!1,null,"22d97184",null);t["default"]=c.exports},7050:function(e,t,a){"use strict";a("94a6")},7325:function(e,t,a){},7485:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p}));a("8e6e"),a("ac6a"),a("456d");var n=a("ade3"),r=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line-biz/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line-biz/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line-biz/save"),method:"post",data:e})},d=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line-biz/update"),method:"post",data:e})},p=function(e){return Object(r["a"])({url:"".concat(i["a"],"/dedicated-line-biz/detail/").concat(e),method:"get"})}},"776d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"配对","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"600px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请复制配对码到此处"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.disabled?e._e():a("footer",[a("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submitHandle}},[e._v("确 定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)},r=[],i=(a("96cf"),a("1da1")),o=(a("c5f6"),a("d462")),s={name:"matchCodeDialog",data:function(){return{code:"",loading:!1}},props:{visible:{type:Boolean,default:!1},id:{type:String|Number}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}}},methods:{submitHandle:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,Object(o["d"])({pairCode:this.code});case 4:if(t=e.sent,a=t.data,200!==a.code){e.next=22;break}if(!a.data||!a.data.sign){e.next=21;break}return n=a.data,r=n.pairCodeId,i=n.reqUrl,s=n.sign,c=n.timestamp,l={"fizz-dl-id":r,"fizz-dl-sign":s,"fizz-dl-ts":c},e.next=12,Object(o["b"])(l,i);case 12:if(u=e.sent,200!==u.status){e.next=19;break}return e.next=16,Object(o["c"])({pairCode:this.code,pairRespContent:JSON.stringify(u.data)});case 16:d=e.sent,p=d.data,200===p.code&&this.matchSuccess();case 19:e.next=22;break;case 21:this.matchSuccess();case 22:this.loading=!1,e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](1),console.log(e.t0),this.loading=!1;case 29:case"end":return e.stop()}}),e,this,[[1,25]])})));function t(){return e.apply(this,arguments)}return t}(),matchSuccess:function(){this.$message.success("配对成功！"),this.dialogVisible=!1,this.$emit("doSearch")},submitHandle2:function(){var e=this;Object(o["d"])({pairCode:this.code}).then((function(t){if(200===t.data.code){var a=t.data.data;if(a&&a.sign){var n=a.appId,r=a.reqUrl,i=a.sign,s=a.timestamp,c={"fizz-appid":n,"fizz-sign":i,"fizz-ts":s};Object(o["b"])(c,r).then((function(t){200===t.status&&Object(o["c"])({pairCode:e.code,pairRespContent:JSON.stringify(t.data)}).then((function(t){200===t.data.code&&e.$message.success("配对成功！")}))}))}else e.$message.success("配对成功！"),e.dialogVisible=!1,e.$emit("doSearch")}}))}}},c=s,l=(a("7f32"),a("2877")),u=Object(l["a"])(c,n,r,!1,null,"11799ef3",null);t["default"]=u.exports},"7f32":function(e,t,a){"use strict";a("ca77")},8078:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,"modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"800px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"main"},[a("el-form",{ref:"formData",attrs:{model:e.form,rules:e.rules,disabled:e.disabled,size:"small","label-width":"155px"}},[a("el-form-item",{attrs:{label:"前端服务名",prop:"service"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:e.form.service,callback:function(t){e.$set(e.form,"service",t)},expression:"form.service"}},e._l(e.frontendServiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"前端API路径",prop:"path"}},[a("el-input",{attrs:{placeholder:"请输入前端API路径",clearable:""},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}}),a("span",{staticClass:"key-tips"},[e._v("如果接口URL为http://网关IP:port/proxy/user-service/user/list, 则输入/user/list，如果不配置路径则按服务熔断")])],1),a("el-form-item",{attrs:{label:"熔断策略:",prop:"strategy"}},[a("el-radio-group",{attrs:{placeholder:"请选择 熔断策略"},model:{value:e.form.strategy,callback:function(t){e.$set(e.form,"strategy",t)},expression:"form.strategy"}},e._l(e.strategyList,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),1===e.form.strategy?a("el-form-item",{attrs:{label:"比例阈值:",prop:"ratioThreshold"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:0,max:1,step:.1},model:{value:e.form.ratioThreshold,callback:function(t){e.$set(e.form,"ratioThreshold",t)},expression:"form.ratioThreshold"}}),a("span",{staticClass:"key-tips"},[e._v("异常的请求比例阈值，超过该值触发熔断，默认值为0.5")])],1):e._e(),2===e.form.strategy?a("el-form-item",{attrs:{label:"异常数:",prop:"exceptionCount"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1},model:{value:e.form.exceptionCount,callback:function(t){e.$set(e.form,"exceptionCount",t)},expression:"form.exceptionCount"}}),a("span",{staticClass:"key-tips"},[e._v("异常的请求数，超过该值触发熔断，默认值为50")])],1):e._e(),a("el-form-item",{attrs:{label:"最小请求数:",prop:"minRequestCount"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1},model:{value:e.form.minRequestCount,callback:function(t){e.$set(e.form,"minRequestCount",t)},expression:"form.minRequestCount"}}),a("span",{staticClass:"key-tips"},[e._v("请求数小于该值时即使异常请求超出阈值也不会熔断，默认值为100")])],1),a("el-form-item",{attrs:{label:"熔断时长:",prop:"timeWindow"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1,max:300},model:{value:e.form.timeWindow,callback:function(t){e.$set(e.form,"timeWindow",t)},expression:"form.timeWindow"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("触发熔断后请求被熔断的时长，默认值为10")])],1),a("el-form-item",{attrs:{label:"统计时长:",prop:"statInterval"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1,max:300},model:{value:e.form.statInterval,callback:function(t){e.$set(e.form,"statInterval",t)},expression:"form.statInterval"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("熔断的统计时长，默认值为10")])],1),a("el-form-item",{attrs:{label:"恢复策略:",prop:"recoveryStrategy"}},[a("el-radio-group",{attrs:{placeholder:"请选择 恢复策略"},model:{value:e.form.recoveryStrategy,callback:function(t){e.$set(e.form,"recoveryStrategy",t)},expression:"form.recoveryStrategy"}},[a("el-radio",{attrs:{label:1}},[a("span",{staticClass:"radio-label"},[e._v("尝试恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                             熔断结束后放通一个请求进入，请求成功时恢复服务，请求失败则立即进入下一个熔断时长。\n                          ")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-radio",{attrs:{label:2}},[a("span",{staticClass:"radio-label"},[e._v("逐步恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                              熔断结束后根据恢复时长按比例逐步放通请求，"),a("br"),e._v("\n                              例如配置恢复时长5秒，则第1秒放通20%的请求，第2秒放通40%的请求，...，第5秒放通100%的请求。\n                          ")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-radio",{attrs:{label:3}},[a("span",{staticClass:"radio-label"},[e._v("立即恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                             熔断结束后立即恢复服务，放通所有请求。\n                          ")]),a("i",{staticClass:"el-icon-question"})])],1)],1)],1),2===e.form.recoveryStrategy?a("el-form-item",{attrs:{label:"恢复时长:",prop:"recoveryTimeWindow"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:5,max:60},model:{value:e.form.recoveryTimeWindow,callback:function(t){e.$set(e.form,"recoveryTimeWindow",t)},expression:"form.recoveryTimeWindow"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("熔断结束后的恢复时长，默认值为5")])],1):e._e(),a("el-form-item",{attrs:{label:"熔断响应ContentType:",prop:"responseContentType"}},[a("el-input",{attrs:{placeholder:"请输入ContentType"},model:{value:e.form.responseContentType,callback:function(t){e.$set(e.form,"responseContentType",t)},expression:"form.responseContentType"}}),a("span",{staticClass:"key-tips"},[e._v("如果不配置则使用默认规则里的熔断响应ContentType")])],1),a("el-form-item",{attrs:{label:"熔断响应报文:",prop:"responseContent"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入 熔断响应报文"},model:{value:e.form.responseContent,callback:function(t){e.$set(e.form,"responseContent",t)},expression:"form.responseContent"}}),a("span",{staticClass:"key-tips"},[e._v("如果不配置则使用默认规则里的熔断响应报文")])],1)],1)],1),e.disabled?e._e():a("footer",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" 确 定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("ade3")),o=(a("c5f6"),a("5880")),s=a("1dbd"),c=a("307b");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=[{label:"异常比例",value:1},{label:"异常数",value:2}],p={strategy:1,ratioThreshold:.5,exceptionCount:50,minRequestCount:100,timeWindow:10,statInterval:10,recoveryTimeWindow:5},f={props:{visible:{type:Boolean,default:!1},type:{type:String,default:""},id:{type:Number}},data:function(){return{loading:!1,disabled:!1,form:Object(c["a"])(p),rules:{service:[{required:!0,message:"必填",trigger:"change"}],strategy:[{required:!0,message:"必填",trigger:"change"}],ratioThreshold:[{required:!0,message:"必填",trigger:"change"}],exceptionCount:[{required:!0,message:"必填",trigger:"change"}],minRequestCount:[{required:!0,message:"必填",trigger:"change"}],timeWindow:[{required:!0,message:"必填",trigger:"change"}],statInterval:[{required:!0,message:"必填",trigger:"change"}],recoveryStrategy:[{required:!0,message:"必填",trigger:"change"}],recoveryTimeWindow:[{required:!0,message:"必填",trigger:"change"}],path:[{pattern:/^[^\u4e00-\u9fa5]+$/,message:"请勿输入中文字符",trigger:"blur"},{pattern:/^(\/)+/,message:"请参照例子正确填写路径, 开头不可缺少 '/' 符号",trigger:"blur"}]},strategyList:d}},computed:u(u({},Object(o["mapGetters"])(["frontendServiceOptions"])),{},{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}},title:function(){var e="";switch(this.type){case"add":e="新增 熔断规则";break;case"edit":e="修改 熔断规则";break;case"view":e="熔断规则 详情";break}return e}}),methods:{submit:function(){var e=this;this.$refs.formData.validate((function(t){t?e.submitService():e.$message.warning("请完善表单信息！")}))},submitService:function(){var e=this;this.loading=!0;var t="add"===this.type?s["a"]:s["e"];t(this.form).then((function(t){200===t.data.code?(e.$emit("doSearch"),e.$message.success("add"===e.type?"保存成功！":"修改成功！"),e.dialogVisible=!1):e.$message.error(t.data.msg||"操作失败!"),e.loading=!1}),(function(){e.loading=!1}))},getDetail:function(){var e=this;Object(s["b"])(this.id).then((function(t){if(200===t.data.code){var a=t.data.data||{};e.form=u(u({},a),{},{strategy:a.strategy||p.strategy,ratioThreshold:a.ratioThreshold||p.ratioThreshold,exceptionCount:a.exceptionCount||p.exceptionCount,minRequestCount:a.minRequestCount||p.minRequestCount,timeWindow:a.timeWindow||p.timeWindow,statInterval:a.statInterval||p.statInterval,recoveryTimeWindow:a.recoveryTimeWindow||p.recoveryTimeWindow})}else e.$message.error(t.data.msg||"详情查询失败!")}))}},mounted:function(){"view"===this.type&&(this.disabled=!0),["edit","view"].includes(this.type)&&this.getDetail()}},m=f,h=(a("e58a"),a("eaf7"),a("2877")),b=Object(h["a"])(m,n,r,!1,null,"3131a2d5",null);t["default"]=b.exports},"84c4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{search:e.search,"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("template",{slot:"serviceSearch"},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.search.service,callback:function(t){e.$set(e.search,"service",t)},expression:"search.service"}},e._l(e.frontendServiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("template",{slot:"timeSearch"},[a("datetime-range",{attrs:{defaultValue:e.search.time,"start-placeholder":"开始日期","end-placeholder":"结束日期",type:"datetime",notMaxTodayStart:!0,notMaxtTodayEnd:!1,startClearable:!1},on:{"update:defaultValue":function(t){return e.$set(e.search,"time",t)},"update:default-value":function(t){return e.$set(e.search,"time",t)},change:e.handleDateTimePicker}})],1)],2)],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("386d"),a("96cf"),a("1da1")),o=a("ade3"),s=a("8e7d"),c=a("84df"),l=a("b5c6"),u=a("da71");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e,t,a){return Object(l["a"])({url:"".concat(u["a"],"/alarm-log/list"),method:"get",params:p(p({},a),{},{current:e,size:t})})},m=a("5880");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"alarmList",components:{datetimeRange:s["default"]},data:function(){return{form:{},query:{},search:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,menu:!1,columnBtn:!1,addBtn:!1,menuPosition:"right",labelWidth:100,menuWidth:320,column:[{label:"前端服务名",prop:"service",search:!0,searchslot:!0,searchLabelWidth:100,searchSpan:8},{label:"API Path",prop:"path",search:!0},{label:"告警类型",prop:"type",type:"select",dicData:[{label:"接口错误",value:1},{label:"接口超时",value:2},{label:"限流",value:3},{label:"熔断",value:4}],search:!0},{label:"错误原因",prop:"desc"},{label:"请求时间",prop:"reqTime"},{label:"请求时间",prop:"time",search:!0,searchslot:!0,searchSpan:12,showColumn:!1}]},data:[],defaultTime:[]}},computed:b({},Object(m["mapGetters"])(["frontendServiceOptions"])),methods:b(b({},Object(m["mapActions"])(["getFrontendServiceOptions"])),{},{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:{},this.loading=!0,this.search.time&&this.search.time.length>0&&(this.query.startDate=this.search.time[0],this.query.endDate=this.search.time[1]||"",delete this.query.time),f(t.currentPage,t.pageSize,Object.assign(a,this.query)).then((function(e){var t=e.data.data;n.page.total=t.total,n.loading=!1,n.data=t.records}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDateTimePicker:function(e){var t=new Date((new Date).setHours(0,0,0,0));if(e[0]){if(new Date(e[0]).getTime()>(new Date).getTime())return this.$message.warning("开始时间不能大于当前时间"),void this.$set(this.search,"time",[Object(c["b"])(t,"yyyy-MM-dd hh:mm:ss"),e[1]||null]);this.$set(this.search,"time",e)}else this.$message.warning("开始时间不能为空!"),this.$set(this.search,"time",[Object(c["b"])(t,"yyyy-MM-dd hh:mm:ss"),null])}}),created:function(){var e=new Date((new Date).setHours(0,0,0,0));this.$set(this.search,"time",[Object(c["b"])(e,"yyyy-MM-dd hh:mm:ss"),null]),this.query.startDate=this.search.time[0],this.getFrontendServiceOptions()}},v=g,y=a("2877"),O=Object(y["a"])(v,n,r,!1,null,"4b33b87a",null);t["default"]=O.exports},8514:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,search:e.search,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.search=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),e.visible?a("detailDialog",{attrs:{type:e.type,id:e.id,visible:e.visible},on:{changeVisible:function(t){e.visible=!1},doSearch:function(t){return e.onLoad({pageSize:e.page.pageSize,currentPage:1})}}}):e._e()],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=a("5880"),s=a("d15d"),c=a("0a6a");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"registerConfig",components:{detailDialog:s["default"]},data:function(){return{form:{},search:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:900,border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,columnBtn:!1,menuPosition:"right",searchLabelWidth:50,column:[{label:"名称",prop:"name",search:!0},{label:"描述",prop:"description",search:!0},{label:"类型",prop:"type",dicData:[{label:"Eureka",value:1},{label:"Nacos",value:2}]},{label:"健康状态",prop:"health",dicData:[{label:"正常",value:!0},{label:"异常",value:!1}]}]},data:[],visible:!1,type:"",id:""}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},computed:u(u({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.proxy_config_add,!1),editBtn:this.vaildData(this.permission.proxy_config_edit,!1),viewBtn:this.vaildData(this.permission.proxy_config_view,!1),delBtn:this.vaildData(this.permission.proxy_configs_remove,!1)}}}),methods:{rowDel:function(e){var t=this;this.$confirm("你确定要删除此注册配置吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["e"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){this.visible=!0,this.type=t,this.id=this.form.id},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))}}},p=d,f=a("2877"),m=Object(f["a"])(p,n,r,!1,null,"6680ce01",null);t["default"]=m.exports},"877e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,search:e.search,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.search=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"serviceSearch",fn:function(t){return[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.search.service,callback:function(t){e.$set(e.search,"service",t)},expression:"search.service"}},e._l(e.frontendServiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}},{key:"methodSearch",fn:function(t){return[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.search.strategy,callback:function(t){e.$set(e.search,"strategy",t)},expression:"search.strategy"}},e._l(e.strategyList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})})),1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),e.visible?a("detailDialog",{attrs:{type:e.type,visible:e.visible,id:e.curId},on:{changeVisible:function(t){e.visible=!1},doSearch:function(t){return e.onLoad({pageSize:e.page.pageSize,currentPage:1})}}}):e._e()],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=a("8078"),s=a("5880"),c=a("1dbd");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=[{label:"异常比例",value:1},{label:"异常数",value:2}],p={name:"interface",components:{detailDialog:o["default"]},data:function(){return{strategyList:d,form:{},search:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{dialogWidth:900,border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,columnBtn:!1,menuPosition:"right",searchLabelWidth:95,column:[{label:"前端服务名",prop:"service",search:!0,searchslot:!0,searchSpan:8},{label:"前端API路径",prop:"path",search:!0},{label:"熔断策略",prop:"strategy",search:!0,type:"select",dicData:d},{label:"比例阈值",prop:"ratioThreshold"},{label:"异常数",prop:"exceptionCount"},{label:"最小请求数",prop:"minRequestCount"},{label:"熔断时长(秒)",prop:"timeWindow"},{label:"统计时长(秒)",prop:"statInterval"}]},data:[],visible:!1,type:"",curId:null}},watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},computed:u(u({},Object(s["mapGetters"])(["frontendServiceOptions","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.fuse_interface_add,!1),editBtn:this.vaildData(this.permission.fuse_interface_edit,!1),viewBtn:this.vaildData(this.permission.fuse_interface_view,!1),delBtn:this.vaildData(this.permission.fuse_interface_remove,!1)}}}),methods:u(u({},Object(s["mapActions"])(["getFrontendServiceOptions"])),{},{rowDel:function(e){var t=this;this.$confirm("你确定要删除此熔断规则吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["d"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){this.curId=this.form.id,this.visible=!0,this.type=t},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var a=e.data.data;t.page.total=a.total,t.data=a.records,t.loading=!1}))}}),mounted:function(){this.getFrontendServiceOptions()}},f=p,m=a("2877"),h=Object(m["a"])(f,n,r,!1,null,"1384e6dd",null);t["default"]=h.exports},"8cc2":function(e,t,a){},"8d74":function(e,t,a){var n=a("4cef"),r=/^\s+/;function i(e){return e?e.slice(0,n(e)+1).replace(r,""):e}e.exports=i},"8e7d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"datatime-range",class:e.className},[a("div",{staticClass:"picker-item"},[a("el-date-picker",{attrs:{type:e.type,placeholder:e.startPlaceholder,align:"right","picker-options":e.startPickerOptions,clearable:e.startClear,readonly:e.readonly,"value-format":e.valueFormat,size:e.size,"default-time":e.defaultTime[0]},on:{change:e.changeTime},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("span",{staticClass:"interval"},[e._v("-")]),a("div",{staticClass:"picker-item"},[a("el-date-picker",{attrs:{type:e.type,placeholder:e.endPlaceholder,align:"right","picker-options":e.endPickerOptions,clearable:e.endClear,readonly:e.readonly,"value-format":e.valueFormat,size:e.size,"default-time":e.defaultTime[1]},on:{change:e.changeTime},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)])},r=[],i=(a("6b54"),a("6762"),a("2fdb"),{name:"datatime-range",props:{className:{type:String,default:""},readonly:{type:Boolean,default:!1},size:{type:String,default:"small",validator:function(e){return-1!==["large","small","mini"].indexOf(e)}},type:{type:String,default:"datetime",validator:function(e){return-1!==["year","month","date","week","datetime"].indexOf(e)}},defaultValue:{type:Array,default:function(){return["",""]}},valueFormat:{type:String,default:"yyyy-MM-dd HH:mm:ss"},startOptions:{type:Object,default:function(){return{}}},endOptions:{type:Object,default:function(){return{}}},notMaxtTodayStart:{type:Boolean,default:!0},notMaxtTodayEnd:{type:Boolean,default:!0},startPlaceholder:{type:String,default:"请选择开始时间"},endPlaceholder:{type:String,default:"请选择结束时间"},defaultTime:{type:String|Array,default:function(e){return"string"===typeof e?[e,e]:e||["",""]}},clearable:{type:Boolean,default:!0},startClearable:{},endClearable:{}},computed:{startPickerOptions:function(){return["date","datetime"].includes(this.type)?Object.assign({},this.beginDate(),this.defaultOption,this.startOptions):Object.assign({},this.defaultOption,this.startOptions)},endPickerOptions:function(){return["date","datetime"].includes(this.type)?Object.assign({},this.processDate(),this.defaultOption,this.endOptions):Object.assign({},this.defaultOption,this.endOptions)}},data:function(){return{startTime:"",endTime:"",defaultOption:{},distance:0,startClear:!1,endClear:!1}},watch:{defaultValue:{immediate:!0,handler:function(){this.startTime=this.defaultValue[0]||"",this.endTime=this.defaultValue[1]||""}}},methods:{beginDate:function(){var e=this;return{disabledDate:function(t){var a=(new Date).getTime(),n=t.getTime();if(e.endTime){var r=new Date(e.endTime).getTime();return e.notMaxtTodayStart?Math.min(r,a)<n:r<n}if(e.notMaxtTodayStart)return a<n}}},processDate:function(){var e=this;return{disabledDate:function(t){var a=(new Date).getTime(),n=t.getTime();if(e.startTime){var r=new Date(e.startTime).getTime();return e.notMaxtTodayEnd?r-e.distance>n||n>a:r-e.distance>n}if(e.notMaxtTodayEnd)return a<n}}},changeTime:function(){if(this.distance=0,this.startTime&&"datetime"===this.type){var e=new Date(this.startTime);(e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0)&&(this.distance=864e5)}if(this.startTime&&this.endTime){var t=new Date(this.startTime).getTime(),a=new Date(this.endTime).getTime();if(t>a)return this.$message({showClose:!0,message:"开始时间不能大于结束时间！",type:"warning"}),void(this.startTime=this.endTime)}this.$emit("change",[this.startTime,this.endTime]),this.$emit("update:time",[this.startTime,this.endTime])}},mounted:function(){this.startClear="[object Boolean]"!==Object.prototype.toString.call(this.startClearable)?this.clearable:this.startClearable,this.endClear="[object Boolean]"!==Object.prototype.toString.call(this.endClearable)?this.clearable:this.endClearable}}),o=i,s=(a("7050"),a("2877")),c=Object(s["a"])(o,n,r,!1,null,"4969b99b",null);t["default"]=c.exports},"8f9b":function(e,t,a){"use strict";a("f04e")},9129:function(e,t,a){},9313:function(e,t,a){"use strict";a("d312")},"94a6":function(e,t,a){},"97a9":function(e,t,a){"use strict";a("a94a")},"9eb6":function(e,t,a){},a94a:function(e,t,a){},b4b0:function(e,t,a){var n=a("8d74"),r=a("1a8c"),i=a("ffd6"),o=NaN,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var a=c.test(e);return a||l.test(e)?u(e.slice(2),a?2:8):s.test(e)?o:+e}e.exports=d},bd5b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("el-card",[a("div",{staticClass:"flow-default-header clearfix",attrs:{slot:"header"},slot:"header"},[a("b",[e._v("单机全局配置")]),a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.editing},on:{click:function(t){e.editing=!0}}},[e._v("编辑")])],1),a("el-form",{ref:"formData",attrs:{model:e.form,rules:e.rules,disabled:!e.editing,size:"small","label-width":"130px"}},[a("el-form-item",{attrs:{label:"服务默认配置:",prop:"serviceDefaultEnabled","label-width":"150px"}},[a("el-checkbox",{on:{change:e.serviceEnabledChange},model:{value:e.form.serviceDefaultEnabled,callback:function(t){e.$set(e.form,"serviceDefaultEnabled",t)},expression:"form.serviceDefaultEnabled"}},[e._v("启用")])],1),e.form.serviceDefaultEnabled?a("div",{staticStyle:{"padding-left":"100px"}},[a("el-form-item",{attrs:{label:"熔断策略:",prop:"strategy"}},[a("el-radio-group",{attrs:{placeholder:"请选择 熔断策略"},model:{value:e.form.strategy,callback:function(t){e.$set(e.form,"strategy",t)},expression:"form.strategy"}},e._l(e.strategyList,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),1===e.form.strategy?a("el-form-item",{attrs:{label:"比例阈值:",prop:"ratioThreshold"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:0,max:1,step:.1},model:{value:e.form.ratioThreshold,callback:function(t){e.$set(e.form,"ratioThreshold",t)},expression:"form.ratioThreshold"}}),a("span",{staticClass:"key-tips"},[e._v("异常的请求比例阈值，超过该值触发熔断，默认值为0.5")])],1):e._e(),2===e.form.strategy?a("el-form-item",{attrs:{label:"异常数:",prop:"exceptionCount"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1},model:{value:e.form.exceptionCount,callback:function(t){e.$set(e.form,"exceptionCount",t)},expression:"form.exceptionCount"}}),a("span",{staticClass:"key-tips"},[e._v("异常的请求数，超过该值触发熔断，默认值为50")])],1):e._e(),a("el-form-item",{attrs:{label:"最小请求数:",prop:"minRequestCount"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1},model:{value:e.form.minRequestCount,callback:function(t){e.$set(e.form,"minRequestCount",t)},expression:"form.minRequestCount"}}),a("span",{staticClass:"key-tips"},[e._v("请求数小于该值时即使异常请求超出阈值也不会熔断，默认值为100")])],1),a("el-form-item",{attrs:{label:"熔断时长:",prop:"timeWindow"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1,max:300},model:{value:e.form.timeWindow,callback:function(t){e.$set(e.form,"timeWindow",t)},expression:"form.timeWindow"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("触发熔断后请求被熔断的时长，默认值为10")])],1),a("el-form-item",{attrs:{label:"统计时长:",prop:"statInterval"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:1,max:300},model:{value:e.form.statInterval,callback:function(t){e.$set(e.form,"statInterval",t)},expression:"form.statInterval"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("熔断的统计时长，默认值为10")])],1),a("el-form-item",{attrs:{label:"恢复策略:",prop:"recoveryStrategy"}},[a("el-radio-group",{attrs:{placeholder:"请选择 恢复策略"},model:{value:e.form.recoveryStrategy,callback:function(t){e.$set(e.form,"recoveryStrategy",t)},expression:"form.recoveryStrategy"}},[a("el-radio",{attrs:{label:1}},[a("span",{staticClass:"radio-label"},[e._v("尝试恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                  熔断结束后放通一个请求进入，请求成功时恢复服务，请求失败则立即进入下一个熔断时长。\n                              ")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-radio",{attrs:{label:2}},[a("span",{staticClass:"radio-label"},[e._v("逐步恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                  熔断结束后根据恢复时长按比例逐步放通请求，"),a("br"),e._v("\n                                  例如配置恢复时长5秒，则第1秒放通20%的请求，第2秒放通40%的请求，...，第5秒放通100%的请求。\n                              ")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-radio",{attrs:{label:3}},[a("span",{staticClass:"radio-label"},[e._v("立即恢复")]),a("el-tooltip",{attrs:{placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                  熔断结束后立即恢复服务，放通所有请求。\n                              ")]),a("i",{staticClass:"el-icon-question"})])],1)],1)],1),2===e.form.recoveryStrategy?a("el-form-item",{attrs:{label:"恢复时长:",prop:"recoveryTimeWindow"}},[a("el-input-number",{staticClass:"mini-input",attrs:{min:5,max:60},model:{value:e.form.recoveryTimeWindow,callback:function(t){e.$set(e.form,"recoveryTimeWindow",t)},expression:"form.recoveryTimeWindow"}}),a("span",{staticClass:"unit"},[e._v("秒")]),a("span",{staticClass:"key-tips"},[e._v("熔断结束后的恢复时长，默认值为5")])],1):e._e()],1):e._e(),a("el-form-item",{attrs:{label:"熔断响应ContentType:",prop:"responseContentType","label-width":"150px"}},[a("el-input",{attrs:{placeholder:"请输入ContentType"},model:{value:e.form.responseContentType,callback:function(t){e.$set(e.form,"responseContentType",t)},expression:"form.responseContentType"}})],1),a("el-form-item",{attrs:{label:"熔断响应报文:",prop:"responseContent","label-width":"150px"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入 熔断响应报文"},model:{value:e.form.responseContent,callback:function(t){e.$set(e.form,"responseContent",t)},expression:"form.responseContent"}})],1)],1),e.editing?a("footer",[a("el-button",{attrs:{type:"primary",size:"small",loading:e.loading},on:{click:e.submitForm}},[e._v("提 交\n          ")]),a("el-button",{attrs:{size:"small"},on:{click:e.cancelForm}},[e._v("取 消")])],1):e._e()],1)],1)},r=[],i=(a("8e6e"),a("456d"),a("8615"),a("ac6a"),a("ade3")),o=a("b5c6"),s=a("da71"),c=function(){return Object(o["a"])({url:"".concat(s["a"],"/degrade-rule/get-global-rule"),method:"get"})},l=function(e){return Object(o["a"])({url:"".concat(s["a"],"/degrade-rule/save-global-rule"),method:"post",data:e})};function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=[{label:"异常比例",value:1},{label:"异常数",value:2}],f={strategy:1,ratioThreshold:.5,exceptionCount:50,minRequestCount:100,timeWindow:10,statInterval:10,recoveryTimeWindow:5},m={name:"default-rule",data:function(){return{data:{},form:{serviceDefaultEnabled:!0},rules:{strategy:[{required:!0,message:"必填",trigger:"change"}],ratioThreshold:[{required:!0,message:"必填",trigger:"change"}],exceptionCount:[{required:!0,message:"必填",trigger:"change"}],minRequestCount:[{required:!0,message:"必填",trigger:"change"}],timeWindow:[{required:!0,message:"必填",trigger:"change"}],statInterval:[{required:!0,message:"必填",trigger:"change"}],recoveryStrategy:[{required:!0,message:"必填",trigger:"change"}],recoveryTimeWindow:[{required:!0,message:"必填",trigger:"change"}]},editing:!1,loading:!1,strategyList:p}},methods:{getGlobalRule:function(){var e=this;c().then((function(t){if(200===t.data.code){var a=t.data.data;e.serviceEnabledChange(a.serviceDefaultEnabled),e.data=d(d({},a.degradeRule||{}),{},{responseContentType:a.responseContentType,responseContent:a.responseContent,serviceDefaultEnabled:a.serviceDefaultEnabled,ratioThreshold:a.degradeRule.ratioThreshold||f.ratioThreshold,exceptionCount:a.degradeRule.exceptionCount||f.exceptionCount}),e.form=Object.assign({},e.data)}}))},serviceEnabledChange:function(e){var t=!0;e&&Object.values(f).forEach((function(e){e||(t=!1)})),t&&e&&(this.form=d(d({},f),this.form))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){if(t){e.loading=!0;var a={degradeRule:{exceptionCount:e.form.exceptionCount,minRequestCount:e.form.minRequestCount,ratioThreshold:e.form.ratioThreshold,recoveryStrategy:e.form.recoveryStrategy,recoveryTimeWindow:e.form.recoveryTimeWindow,statInterval:e.form.statInterval,strategy:e.form.strategy,timeWindow:e.form.timeWindow},responseContent:e.form.responseContent,responseContentType:e.form.responseContentType,serviceDefaultEnabled:e.form.serviceDefaultEnabled};l(a).then((function(t){200===t.data.code?(e.$message.success("保存配置成功!"),e.editing=!1,e.getGlobalRule()):e.$message.error(t.data.msg||"保存配置失败!"),e.loading=!1}),(function(){e.loading=!1}))}else e.$message.warning("请完善表单信息!")}))},cancelForm:function(){this.form=Object.assign({},this.data),this.editing=!1}},mounted:function(){this.getGlobalRule()}},h=m,b=(a("9313"),a("8f9b"),a("2877")),g=Object(b["a"])(h,n,r,!1,null,"684633e0",null);t["default"]=g.exports},bee2:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",(function(){return r}))},c60d:function(e,t,a){},ca77:function(e,t,a){},cadc:function(e,t,a){"use strict";a("f84e")},ccb2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("input",{ref:"urlInput",staticClass:"url-input"}),a("div",{staticClass:"filter-con"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-check"},on:{click:function(t){e.codeVisible=!0}}},[e._v("配对")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"document-item"},[a("div",{staticClass:"header"},[a("span",{staticClass:"company"},[e._v(e._s(t.org))])]),a("div",{staticClass:"card-con"},[e._l(t.dedicatedLineBizRelations,(function(t,n){return a("div",{key:n,staticClass:"card-item"},[a("div",{staticClass:"card-item-padding"},[a("div",{staticClass:"card-item-left",class:{open:t.status}},[a("i",{staticClass:"el-icon-connection"}),a("div",{staticClass:"card-item-left-con"},[a("p",{staticClass:"title",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("p",{staticClass:"description",attrs:{title:t.description}},[e._v(e._s(t.description||"暂无描述"))])])]),a("div",{staticClass:"card-item-right"},[0===t.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.apply(t)}}},[e._v("申    请")]):e._e(),1===t.status&&1===t.type&&t.docSetId?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showDoc(t)}}},[e._v("查看文档")]):e._e(),1!==t.status||1!==t.type||t.docSetId?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showUsage(t)}}},[e._v("使用说明")]),1===t.status&&2===t.type?a("el-button",{staticClass:"two-buttons",attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showView(t)}}},[e._v("浏  览")]):e._e(),1===t.status&&2===t.type?a("el-button",{staticClass:"two-buttons",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.showGateway(t)}}},[e._v("设置网关地址")]):e._e()],1)])])})),0===t.dedicatedLineBizRelations.length?a("avue-empty"):e._e()],2)])})),0),0===e.list.length?a("avue-empty"):e._e(),e.codeVisible?a("pairCodeDialog",{attrs:{visible:e.codeVisible},on:{changeVisible:function(t){e.codeVisible=!1},doSearch:e.getList}}):e._e(),e.useageVisible?a("usageDialog",{attrs:{visible:e.useageVisible,services:e.services},on:{changeVisible:function(t){e.useageVisible=!1}}}):e._e(),e.gatewayVisible?a("setGatewayDialog",{attrs:{visible:e.gatewayVisible,dedicatedLineBizId:e.dedicatedLineBizId,webUrl:e.websiteUrl,entrancePath:e.entrancePath},on:{changeVisible:function(t){e.gatewayVisible=!1},doSearch:e.getList}}):e._e()],1)},r=[],i=(a("7f7f"),a("776d")),o=a("6e09"),s=a("d5ef"),c=a("d462"),l=a("c54a"),u={name:"match",components:{pairCodeDialog:i["default"],usageDialog:o["default"],setGatewayDialog:s["default"]},data:function(){return{list:[],loading:!1,codeVisible:!1,useageVisible:!1,gatewayVisible:!1,dedicatedLineBizId:null,websiteUrl:"",entrancePath:"",services:[]}},methods:{apply:function(e){var t=this;this.$refs.urlInput.value=e.email,this.$refs.urlInput.select(),document.execCommand("copy"),this.$confirm("商务合作请联系 ".concat(e.email),"提示",{confirmButtonText:"复制邮箱",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"邮箱地址已复制到粘贴板了!"})}))},showDoc:function(e){this.$router.push({path:"/public-network/interface/preview",query:{pairId:e.pairId,id:e.docSetId,dedicatedLineBizId:e.dedicatedLineBizId,documentName:e.name,type:"match",pageType:""}})},showUsage:function(e){this.useageVisible=!0,this.services=e.services},showView:function(e){if(e.websiteUrl&&e.entrancePath){var t=e.websiteUrl+e.entrancePath;if(!Object(l["n"])(t))return void this.$message.warning("地址不正确，无法浏览！");window.open(t)}},showGateway:function(e){this.gatewayVisible=!0,this.dedicatedLineBizId=e.id,this.websiteUrl=e.websiteUrl,this.entrancePath=e.entrancePath},getList:function(){var e=this;this.loading=!0,Object(c["a"])().then((function(t){200===t.data.code&&(e.list=t.data.data.records),e.loading=!1}),(function(){e.loading=!1}))}},mounted:function(){this.getList()}},d=u,p=(a("1191"),a("97a9"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"20659880",null);t["default"]=f.exports},d15d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,"modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"800px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"main"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,disabled:e.disabled,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入 名称",clearable:"",disabled:"edit"===e.type},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("span",{staticClass:"key-tips"},[e._v("名称可自定义, 网关会根据该名称来获取注册中心的配置，如：Eureka_1; 保存后名称不能修改")])],1),a("el-form-item",{attrs:{label:"描述:",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入 描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-radio-group",{attrs:{placeholder:"请选择 类型"},on:{change:e.renderDefaultContent},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[e._v("Eureka")]),a("el-radio",{attrs:{label:2}},[e._v("Nacos")])],1)],1),a("el-form-item",{attrs:{label:"配置格式:",prop:"format"}},[a("el-radio-group",{attrs:{placeholder:"请选择 配置格式"},on:{change:e.renderDefaultContent},model:{value:e.form.format,callback:function(t){e.$set(e.form,"format",t)},expression:"form.format"}},[a("el-radio",{attrs:{label:1}},[e._v("yml")]),a("el-radio",{attrs:{label:2}},[e._v("properties")])],1)],1),a("el-form-item",{attrs:{label:"配置内容:",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入 配置内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1),"view"!==e.type?a("footer",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submitHandle}},[e._v(" 确 定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1):e._e()])},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("ade3")),o=a("5880"),s=a("0a6a");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={props:{visible:{type:Boolean,default:!1},type:{type:String,default:""},id:{type:String,default:""}},data:function(){return{disabled:!1,form:{content:""},rules:{name:[{required:!0,message:"必填",trigger:"blur"}],type:[{required:!0,message:"必填",trigger:"change"}],format:[{required:!0,message:"必填",trigger:"change"}],content:[{required:!0,message:"必填",trigger:"change"}]},loading:!1}},computed:l(l({},Object(o["mapGetters"])(["frontendServiceOptions"])),{},{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}},title:function(){var e="";switch(this.type){case"add":e="新增 注册中心";break;case"edit":e="修改 注册中心";break;case"view":e="注册中心 详情";break}return e}}),methods:{getDetail:function(){var e=this;this.id&&Object(s["b"])(this.id).then((function(t){200===t.data.code?e.form=t.data.data:e.$message({type:"error",message:t.data.msg||"详情查询失败！"})}))},submitHandle:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.loading=!0;var a="add"===e.type?s["a"]:s["f"];a(e.form).then((function(t){200===t.data.code&&(e.$message({type:"success",message:"add"===e.type?"保存成功！":"修改成功！"}),e.dialogVisible=!1,e.$emit("doSearch")),e.loading=!1})).catch((function(){e.loading=!1}))}}))},renderDefaultContent:function(){1===this.form.type&&1===this.form.format?this.form.content="eureka:\n  client:\n    serviceUrl:\n      # need replace\n      defaultZone: http://6.6.6.6:6600/eureka/\n":1===this.form.type&&2===this.form.format?this.form.content="eureka.client.serviceUrl.defaultZone=http://6.6.6.6:6600/eureka/ ":2===this.form.type&&1===this.form.format?this.form.content="nacos:\n  discovery:\n    # need replace\n    server-addr: 6.6.6.6:8848\n    namespace: null\n    group: DEFAULT_GROUP \n":2===this.form.type&&2===this.form.format&&(this.form.content="# need replace \nnacos.discovery.server-addr=6.6.6.6:8848\nnacos.discovery.namespace=null\nnacos.discovery.group=DEFAULT_GROUP\n")}},mounted:function(){"view"===this.type&&(this.disabled=!0),["edit","view"].includes(this.type)&&this.getDetail()}},d=u,p=(a("d83d"),a("e775"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"29f7e7f0",null);t["default"]=f.exports},d2bc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,search:e.search,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("template",{slot:"serviceSearch"},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.search.service,callback:function(t){e.$set(e.search,"service",t)},expression:"search.service"}},e._l(e.frontendServiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],2)],1)},r=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("8615"),a("96cf"),a("1da1")),o=(a("6762"),a("2fdb"),a("ade3")),s=a("5880"),c=a("4c02");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=[{label:"接口错误",value:"1"},{label:"接口超时",value:"2"},{label:"限流",value:"3"},{label:"熔断",value:"4"}],p={name:"subscriptionAlarm",components:{},data:function(){return{form:{},query:{},search:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,editBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,menuWidth:320,column:[{label:"主题",prop:"subject",search:!0},{label:"前端服务名",prop:"service",search:!0,searchslot:!0,searchLabelWidth:100,searchSpan:8},{label:"告警类型",prop:"type",type:"select",dicData:d},{label:"用户",prop:"user",search:!0},{label:"创建时间",prop:"createTime"},{label:"更新时间",prop:"updateTime"}]},data:[]}},computed:u(u({},Object(s["mapGetters"])(["permission","frontendServiceOptions"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.alarm_subscription_add,!1),editBtn:this.vaildData(this.permission.alarm_subscription_edit,!1),delBtn:this.vaildData(this.permission.alarm_subscription_remove,!1),viewBtn:this.vaildData(this.permission.alarm_subscription_view,!1)}}}),methods:u(u({},Object(s["mapActions"])(["getFrontendServiceOptions"])),{},{rowDel:function(e){var t=this;this.$confirm("你确定要删除此订阅告警吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["e"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){["add","edit","view"].includes(t)&&this.$router.push({path:"/alarm/subscription/".concat(t),query:{type:t,id:this.form.id}})},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:{},this.loading=!0,Object(c["c"])(t.currentPage,t.pageSize,Object.assign(a,this.query)).then((function(e){var t=e.data.data;n.page.total=t.total,n.data=t.records,n.data.map((function(e){e.service=e.services.join(",");var t=[];return d.forEach((function(a){(e.types.indexOf("0")>-1||e.types.indexOf(a.value)>-1)&&t.push(a.label)})),e.type=t.join(","),e.user=Object.values(e.userId2NameMap||[]).join(","),e})),n.loading=!1})).catch((function(){n.loading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}),created:function(){this.getFrontendServiceOptions()}},f=p,m=a("2877"),h=Object(m["a"])(f,n,r,!1,null,"6868b6d6",null);t["default"]=h.exports},d312:function(e,t,a){},d462:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return l}));var n=a("b5c6"),r=a("da71"),i=function(){return Object(n["a"])({url:"".concat(r["a"],"/pair/list"),method:"get",params:{current:1,size:-1}})},o=function(e){return Object(n["a"])({url:"".concat(r["a"],"/pair/pairing-req-info"),method:"post",data:e})},s=function(e,t){return Object(n["a"])({url:t,headers:e,method:"get"})},c=function(e){return Object(n["a"])({url:"".concat(r["a"],"/pair/pairing"),method:"post",data:e})},l=function(e){return Object(n["a"])({url:"".concat(r["a"],"/pair/update-website-url"),method:"post",data:e})}},d4ec:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return n}))},d5ef:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"设置网关专线地址","modal-append-to-body":!1,"append-to-body":!0,"close-on-click-modal":!1,width:"600px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"网关专线地址",prop:"websiteUrl"}},[a("div",{staticClass:"row"},[a("el-input",{model:{value:e.form.websiteUrl,callback:function(t){e.$set(e.form,"websiteUrl",t)},expression:"form.websiteUrl"}}),a("span",{staticClass:"url-suffix"},[e._v(e._s(e.entrancePath))])],1),a("p",{staticClass:"key-tips"},[e._v("输入网关专线地址，如：http://网关IP:8601（如果无法直接访问网关IP，需配置代理，在此处填入代理地址） ")])])],1),a("footer",{staticClass:"drawer-footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("\n      确 定\n    ")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)},r=[],i=(a("c5f6"),a("d462")),o={name:"setGatewayDialog",data:function(){return{form:{websiteUrl:""},rules:{websiteUrl:[{required:!0,message:"请输入 网关地址",trigger:"blur"}]},loading:!1}},props:{visible:{type:Boolean,default:!1},id:{type:String|Number},dedicatedLineBizId:{},webUrl:{type:String,default:""},entrancePath:{type:String,default:""}},computed:{dialogVisible:{get:function(){return this.visible},set:function(){this.$emit("changeVisible")}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,Object(i["e"])({dedicatedLineBizRelationId:e.dedicatedLineBizId,websiteUrl:e.form.websiteUrl}).then((function(t){200===t.data.code?(e.$message.success("网关专线地址设置 成功！"),e.dialogVisible=!1,e.$emit("doSearch")):e.$message.success(t.data.msg),e.loading=!1}),(function(){e.loading=!1})))}))}},mounted:function(){this.form.websiteUrl=this.webUrl}},s=o,c=(a("e7d4"),a("2877")),l=Object(c["a"])(s,n,r,!1,null,"0cc24f44",null);t["default"]=l.exports},d83d:function(e,t,a){"use strict";a("9eb6")},e20e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",{staticClass:"dedicated-line"},[a("avue-crud",{ref:"crud",attrs:{"before-open":e.beforeOpen,data:e.data,page:e.page,option:e.option,"table-loading":e.loading,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var n=t.row;return[e.permissionList.viewCodeBtn?a("el-button",{attrs:{icon:"el-icon-tickets",size:"small",type:"text"},on:{click:function(t){return e.showCodeDialog(n.id)}}},[e._v("查看配对码")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),e.codeVisible?a("matchCodeDialog",{attrs:{visible:e.codeVisible,id:e.curId},on:{doSearch:function(t){return e.onLoad(e.page)},changeVisible:function(t){e.codeVisible=!1}}}):e._e()],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("ade3")),o=a("5880"),s=a("59df"),c=a("2f32"),l=a("1e18");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"match",components:{matchCodeDialog:s["default"]},data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{border:!0,index:!0,dialogClickModal:!1,viewBtn:!0,editBtn:!0,columnBtn:!1,menuPosition:"right",labelWidth:100,column:[{label:"专线名称",prop:"name",search:!0},{label:"配对状态",prop:"status",dicData:l["c"],type:"select",search:!0,width:90},{label:"已配对次数",prop:"pairCount",width:90},{label:"最多配对次数",prop:"maxCount",width:96},{label:"配对时间",prop:"pairTime"},{label:"颁发机构",prop:"org"},{label:"网关地址",prop:"gatewayUrl"},{label:"创建时间",prop:"createTime",width:130},{label:"更新时间",prop:"updateTime",width:130}]},data:[],codeVisible:!1,curId:null}},computed:d(d({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.interface_dedicatedLine_view,!1),addBtn:this.vaildData(this.permission.interface_dedicatedLine_add,!1),editBtn:this.vaildData(this.permission.interface_dedicatedLine_edit,!1),delBtn:this.vaildData(this.permission.interface_dedicatedLine_remove,!1),viewCodeBtn:this.vaildData(this.permission.interface_dedicatedLine_viewCode,!1)}}}),watch:{data:function(){var e=this;this.$nextTick((function(){e.$refs.crud.refreshTable()}))}},methods:{rowDel:function(e){var t=this;this.$confirm("你确定要删除此专线吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["f"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"删除成功"})}))},beforeOpen:function(e,t){["add","edit","view"].includes(t)&&this.$router.push({path:"/public-network/dedicated-line/".concat(t),query:{id:this.form.id}})},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["c"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){if(200===e.data.code){var a=e.data.data;t.page.total=a.total,t.data=a.records}t.loading=!1}),(function(){t.loading=!1}))},showCodeDialog:function(e){this.codeVisible=!0,this.curId=e}}},f=p,m=a("2877"),h=Object(m["a"])(f,n,r,!1,null,"78ad192a",null);t["default"]=h.exports},e58a:function(e,t,a){"use strict";a("8cc2")},e775:function(e,t,a){"use strict";a("3a1d")},e7d4:function(e,t,a){"use strict";a("c60d")},eaf7:function(e,t,a){"use strict";a("5614")},f04e:function(e,t,a){},f84e:function(e,t,a){},fcd9:function(e,t,a){"use strict";a("7325")},ffd6:function(e,t,a){var n=a("3729"),r=a("1310"),i="[object Symbol]";function o(e){return"symbol"==typeof e||r(e)&&n(e)==i}e.exports=o}}]);