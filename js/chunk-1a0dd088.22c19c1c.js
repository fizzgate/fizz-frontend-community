/*!
 * Fizz-Admin v2.2.3
 * (c) 2020-2021 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a0dd088"],{"147a":function(e,t,a){"use strict";a("7f5b")},3947:function(e,t,a){},"74a0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":"",width:"900px",top:"5vh","before-close":e.handleClose,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{model:e.formData,rules:e.rules,disabled:e.disabled,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"服务信息",prop:"rpcServiceId"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择服务",filterable:"",clearable:""},on:{change:e.handleServiceChange},model:{value:e.formData.rpcServiceId,callback:function(t){e.$set(e.formData,"rpcServiceId",t)},expression:"formData.rpcServiceId"}},e._l(e.serviceOptions,(function(t,r){return a("el-option",{key:r,attrs:{label:(1===t.type?"[Dubbo] ":2===t.type&&"[gRPC] ")+t.service+(1===t.type&&(t.version||t.group)?" ("+t.version+"-"+t.group+")":""),value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.service))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"12px"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:1===t.type&&(t.version||t.group),expression:"item.type === 1 && (item.version || item.group)"}]},[e._v(e._s(t.version)+"-"+e._s(t.group))]),e._v("\n            "+e._s(1===t.type?"Dubbo":2===t.type&&"gRPC")+"\n          ")])])})),1),!e.disabled&&e.permissionList.serviceAddBtn?a("span",{staticClass:"add-service",on:{click:function(t){e.showServiceAdd=!0}}},[e._v("新增服务")]):e._e()],1),a("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),a("span",{staticClass:"key-tips"},[e._v("接口名称是一个自定义名称，如：获取用户信息接口")])],1),a("el-form-item",{attrs:{label:"方法名",prop:"method"}},[a("el-input",{attrs:{placeholder:"请输入方法名",clearable:""},model:{value:e.formData.method,callback:function(t){e.$set(e.formData,"method",t)},expression:"formData.method"}}),a("span",{staticClass:"key-tips"},[e._v("方法名，如：getUserInfo")])],1),1===e.formData.type?[a("el-form-item",{attrs:{label:"参数类型",prop:"paramTypes"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.formData.paramTypes,callback:function(t){e.$set(e.formData,"paramTypes",t)},expression:"formData.paramTypes"}}),a("span",{staticClass:"key-tips"},[e._v("\n          输入方法的参数类型列表，多个参数用逗号分隔，如：\n          "),a("br"),e._v("getUserInfo(int age, String name, Depart depart) 则输入int,java.lang.String,com.abc.pojo.Depart\n        ")])],1)]:e._e(),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.formData.note,callback:function(t){e.$set(e.formData,"note",t)},expression:"formData.note"}})],1)],2),e.disabled?e._e():a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提 交\n    ")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleClose()}}},[e._v("取 消")])],1),a("service-detail",{attrs:{type:"add",title:"新增RPC服务",visible:e.showServiceAdd,callback:e.getAllServiceOptions},on:{"update:visible":function(t){e.showServiceAdd=t}}})],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("53ca")),o=(a("7514"),a("ade3")),s=(a("c5f6"),a("5880")),c=a("16cd"),l=a("adc3"),p=a("7b22"),u=a("b874");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"rpc-api-detail",data:function(){return{loading:!1,btnLoading:!1,formData:{},rules:{type:[{required:!0,message:"必填",trigger:"blur"}],rpcServiceId:[{required:!0,message:"必填",trigger:"blur"}],name:[{required:!0,message:"必填",trigger:"blur"}],method:[{required:!0,message:"必填",trigger:"blur"}]},serviceOptions:[],inputVisible:!1,showServiceAdd:!1}},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"add"},id:{type:[String,Number]},callback:{type:Function},title:{type:String}},computed:f(f({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{serviceAddBtn:this.vaildData(this.permission.rpc_service_add,!1)}},dialogTitle:function(){return this.title||"add"===this.type&&"新增"||"edit"===this.type&&"编辑"||"view"===this.type&&"查看"||"详情"},disabled:function(){return"view"===this.type||!1}}),components:{serviceDetail:u["default"]},watch:{visible:function(e){e?this.getDetail():this.formData={}}},mounted:function(){this.getAllServiceOptions()},methods:{compleServiceInfo:function(e){if(!e)return!1;var t={};"string"===typeof e||"number"===typeof e?t=this.serviceOptions.find((function(t){return parseInt(t.id)===parseInt(e)})):"object"===Object(i["a"])(e)&&(t=e),this.formData.type=t.type||""},handleServiceChange:function(e){if(!e)return!1;this.compleServiceInfo(e)},getAllServiceOptions:function(){var e=this;Object(p["b"])({typesForCondition:"1,2"}).then((function(t){e.serviceOptions=t.data.data.records||[]}))},rowSave:function(e){var t=this;this.btnLoading=!0,Object(l["a"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"保存成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},rowUpdate:function(e){var t=this;this.btnLoading=!0,Object(l["g"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"修改成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},getDetail:function(){var e=this;if(!this.id)return this.formData={},!1;this.loading=!0,Object(l["c"])(this.id).then((function(t){var a=t.data.data;e.formData=Object.assign({},a||{}),e.compleServiceInfo(e.formData.rpcServiceId)})).finally((function(){e.loading=!1}))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=Object(c["b"])(e.formData);2===e.formData.type&&delete a.paramTypes,"edit"===e.type?e.rowUpdate(a):e.rowSave(a)}}))},handleClose:function(e){this.$emit("update:visible",!1),e&&e()}}},m=b,v=(a("95b8"),a("2877")),y=Object(v["a"])(m,r,n,!1,null,"48426850",null);t["default"]=y.exports},"7b22":function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return p})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return f}));a("8e6e"),a("ac6a"),a("456d");var r=a("ade3"),n=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/detail/").concat(e),method:"get",params:{id:e}})},p=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/save"),method:"post",data:e})},d=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/update"),method:"post",data:e})},f=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service/list"),method:"get",params:s(s({},e),{},{current:1,size:-1})})}},"7e2e":function(e,t,a){"use strict";a("3947")},"7f5b":function(e,t,a){},"95b8":function(e,t,a){"use strict";a("b0c9")},adc3:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return b}));a("8e6e"),a("ac6a"),a("456d"),a("a481");var r=a("ade3"),n=a("b5c6"),i=a("da71");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t,a){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/list"),method:"get",params:s(s({},a),{},{current:e,size:t})})},l=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/detail/").concat(e),method:"get",params:{id:e}})},p=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/remove"),method:"post",params:{ids:e}})},u=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/save"),method:"post",data:e})},d=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/update"),method:"post",data:e})},f=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/export"),method:"post",params:{ids:e},responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/json;charset=utf-8"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,unescape(e.headers.filename.replace(/\\u/g,"%u")));else{var a=document.createElement("a"),r=window.URL.createObjectURL(t);a.href=r,a.download=unescape(e.headers.filename.replace(/\\u/g,"%u")),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}}))},b=function(e){return Object(n["a"])({url:"".concat(i["a"],"/rpc-service-method/import"),method:"post",data:e})}},b0c9:function(e,t,a){},b874:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":"",width:"900px","before-close":e.handleClose,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formData",attrs:{model:e.formData,rules:e.rules,disabled:e.disabled,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"服务类型：",prop:"type"}},[a("el-radio-group",{attrs:{disabled:e.serviceType},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[a("el-radio",{attrs:{label:1}},[e._v("Dubbo")]),a("el-radio",{attrs:{label:2}},[e._v("gRPC")]),a("el-radio",{attrs:{label:3}},[e._v("HTTP")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.formData.type,expression:"formData.type === 3"}],staticClass:"key-tips"},[e._v("只需填写不支持服务发现的HTTP服务")])],1),a("el-form-item",{attrs:{label:"服务名",prop:"service"}},[a("el-input",{attrs:{placeholder:"请输入服务名",clearable:""},model:{value:e.formData.service,callback:function(t){e.$set(e.formData,"service",t)},expression:"formData.service"}}),3===e.formData.type?a("span",{staticClass:"key-tips"},[e._v("服务名可自定义, 网关会根据该名称来获取实例的IP和端口，如：OrderService")]):2===e.formData.type?a("span",{staticClass:"key-tips"},[e._v("\n        服务名须包含包路径，如：com.abc.UserService，gRPC服务需启用反射功能"),a("tooltip-service",{staticClass:"link",attrs:{title:"样例"}})],1):a("span",{staticClass:"key-tips"},[e._v("服务名须包含包路径，如：com.abc.UserService")])],1),1===e.formData.type?[a("el-form-item",{key:"version",attrs:{label:"版本",prop:"version"}},[a("el-input",{attrs:{placeholder:"请输入版本",clearable:""},model:{value:e.formData.version,callback:function(t){e.$set(e.formData,"version",t)},expression:"formData.version"}}),a("span",{staticClass:"key-tips"},[e._v("Dubbo接口的版本号")])],1),a("el-form-item",{key:"group",attrs:{label:"分组",prop:"group"}},[a("el-input",{attrs:{placeholder:"请输入分组",clearable:""},model:{value:e.formData.group,callback:function(t){e.$set(e.formData,"group",t)},expression:"formData.group"}}),a("span",{staticClass:"key-tips"},[e._v("Dubbo接口的分组")])],1)]:[a("el-form-item",{key:"instance",attrs:{label:"实例列表",prop:"instance"}},[a("el-input",{attrs:{type:"textarea",clearable:"",placeholder:"如：10.2.3.114:8080 或 user.fizzgate.com:9090"},model:{value:e.formData.instance,callback:function(t){e.$set(e.formData,"instance",t)},expression:"formData.instance"}}),3===e.formData.type?a("span",{staticClass:"key-tips"},[e._v("输入HTTP服务的实例IP:Port 或 域名:Port, 多个实例用逗号分隔")]):2===e.formData.type?a("span",{staticClass:"key-tips"},[e._v("输入gRPC服务的实例IP:Port 或 域名:Port, 多个实例用逗号分隔")]):e._e()],1),a("el-form-item",{key:"loadBalanceType",attrs:{label:"负载均衡：",prop:"loadBalanceType"}},[a("el-radio-group",{model:{value:e.formData.loadBalanceType,callback:function(t){e.$set(e.formData,"loadBalanceType",t)},expression:"formData.loadBalanceType"}},[a("el-radio",{attrs:{label:1}},[e._v("轮询")]),a("el-radio",{attrs:{label:2}},[e._v("随机")])],1)],1)]],2),e.disabled?e._e():a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提 交\n    ")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleClose()}}},[e._v("取 消")])],1)],1)},n=[],i=(a("c5f6"),a("16cd")),o=a("7b22"),s=a("fee70"),c={name:"rpc-service-detail",data:function(){return{loading:!1,btnLoading:!1,formData:{},rules:{type:[{required:!0,message:"必填",trigger:"blur"}],service:[{required:!0,message:"必填",trigger:"blur"}],instance:[{required:!0,message:"必填",trigger:"change"}],loadBalanceType:[{required:!0,message:"必填",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"add"},id:{type:[String,Number]},callback:{type:Function},title:{type:String},serviceType:{type:Number}},computed:{dialogTitle:function(){return this.title||"add"===this.type&&"新增"||"edit"===this.type&&"编辑"||"view"===this.type&&"查看"||"详情"},disabled:function(){return"view"===this.type||!1}},components:{tooltipService:s["default"]},watch:{visible:function(e){e&&this.id&&this.getDetail(),this.formData={type:this.serviceType||1,loadBalanceType:1}}},methods:{rowSave:function(e){var t=this;this.btnLoading=!0,Object(o["a"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"保存成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},rowUpdate:function(e){var t=this;this.btnLoading=!0,Object(o["f"])(e).then((function(){t.callback&&"function"===typeof t.callback&&t.callback(),t.$message({type:"success",message:"修改成功"}),t.handleClose()})).finally((function(){t.btnLoading=!1}))},getDetail:function(){var e=this;if(!this.id)return!1;this.loading=!0,Object(o["c"])(this.id).then((function(t){var a=t.data.data;e.formData=Object.assign({},a||{})})).finally((function(){e.loading=!1}))},submitForm:function(){var e=this;this.$refs.formData.validate((function(t){if(t){var a=Object(i["b"])(e.formData);1===a.type?delete a.instance:(delete a.version,delete a.group),"edit"===e.type?e.rowUpdate(a):e.rowSave(a)}}))},handleClose:function(e){this.$emit("update:visible",!1),e&&e()}}},l=c,p=(a("147a"),a("2877")),u=Object(p["a"])(l,r,n,!1,null,"32276f67",null);t["default"]=u.exports},fee70:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{"popper-class":"tooltip-dark",placement:"top",title:e.title}},[a("div",{staticClass:"content"},[e._v("\n    server = ServerBuilder.forPort(port)"),a("br"),e._v("    \n    .addService(new UserService())"),a("br"),e._v("    \n    .addService(new ShoppingCartService())"),a("br"),e._v("    \n    // gRPC reflection enabled"),a("br"),e._v("    \n    .addService(ProtoReflectionService.newInstance())"),a("br"),e._v("    \n    .build();"),a("br")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("("+e._s(e.title)+")")])])},n=[],i={name:"tooltip-service",props:{title:{type:String,default:"示例"}}},o=i,s=(a("7e2e"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,null,null);t["default"]=c.exports}}]);