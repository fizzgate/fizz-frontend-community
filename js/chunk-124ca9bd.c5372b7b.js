/*!
 * Fizz-Admin v3.2.0-beta1
 * (c) 2020-2024 Joker-Lee
 * AGPL v3 Licensed.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-124ca9bd"],{"01df":function(t,e,i){"use strict";i("5d81")},"170d":function(t,e,i){"use strict";i.r(e);i("ac6a"),i("7f7f");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"item-detail-show"},[e("div",{staticClass:"item-detail-left"},[e("div",{staticClass:"item-detail-big-img"},[e("img",{attrs:{src:t.packageDetail.icon}})])]),e("div",{staticClass:"item-detail-right"},[e("div",{staticClass:"item-detail-title"},[e("p",[t._v("\n          "+t._s(t.packageDetail.name)+" "),e("el-tag",[t._v(t._s(t.packageDetail.apiCategory))])],1)]),e("div",{staticClass:"item-detail-description"},[t._v("\n        "+t._s(t.packageDetail.description)+"\n      ")]),e("sku",{attrs:{data:t.list,activies:t.activies},on:{click:t.skuClick}}),t._l(t.formatList,(function(i,a){return e("div",{key:i.name,staticClass:"item-select"},[e("div",{staticClass:"item-select-title"},[e("p",[t._v(t._s(i.name))])]),e("div",{staticClass:"item-select-column"},t._l(i.values,(function(i){return e("div",{key:i.value,staticClass:"item-select-row"},[e("div",{staticClass:"item-select-box",class:{"item-select-box-active":i.value===t.currentSelceted[a]},on:{click:function(e){return t.select(a,i.value)}}},[e("div",{staticClass:"item-select-intro"},[e("p",[t._v(t._s(i.value))])])])])})),0)])})),e("div",{staticClass:"add-buy-car-box"},[e("div",{staticClass:"item-detail-price-row"},[e("div",{staticClass:"item-price-left"},[e("div",{staticClass:"item-price-row"},[t.price?e("div",[e("span",{staticClass:"item-price-title"},[t._v("套餐价格")]),e("span",{staticClass:"item-price"},[t._v(t._s(t._f("unitPrice")(t.price*t.count,"￥")))]),e("span",{},[t._v("\n                   约"+t._s(t._f("unitPrice")(t.price/t.selectedSku.requestTimes,"￥"))+" /次\n              ")]),e("span",{},[t._v("    共"+t._s(t.selectedSku.requestTimes)+"次/"+t._s(t.cycleName))])]):t._e()])]),t._m(0)]),e("div",{staticClass:"add-buy-car"},[0!=t.price?e("el-button",{attrs:{type:"warning",loading:t.loading1},on:{click:t.buyNow}},[t._v("立即购买")]):t._e(),0==t.price?e("el-button",{attrs:{type:"warning",loading:t.loading1},on:{click:t.freeBuyNow}},[t._v("免费使用")]):t._e()],1)])],2)]),e("el-dialog",{attrs:{visible:t.visible,width:"800px",top:"0px",fullscreen:"","close-on-click-modal":!1,"show-close":!0,"custom-class":"pay-dialog",center:"","append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[e("iframe",{attrs:{srcdoc:t.payHtml,width:"100%",height:"100%",frameborder:"0",id:"payDialog"}})])],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-price-right"},[e("div",{staticClass:"item-remarks-sum"})])}],s=(i("7514"),i("dac6")),c=i("7cff"),o={name:"ShowGoods",props:{detail:{type:Object,default:null}},watch:{detail:{handler:function(t){t.data&&(this.packageDetail=t.data,this.formatSku(this.packageDetail))},deep:!0,immediate:!0}},data:function(){return{list:[{id:-1,skuName:"套餐类型",name:"流量包",pid:0}],payHtml:"",visible:!1,activies:[],count:1,imgIndex:0,currentSelceted:[],imgList:[{url:""}],packageDetail:{name:"",intro:"",specList:[]},formatList:[],loading:!1,loading1:!1}},components:{Sku:s["default"]},computed:{price:function(){return this.selectedSku&&this.selectedSku.price?this.selectedSku.price:0},selectedSku:function(){if(this.activies&&this.activies.length>0){var t=this.activies[this.activies.length-1];return t}return null},cycle:function(){return this.selectedSku&&this.selectedSku.cycle?this.selectedSku.cycle:0},cycleName:function(){switch(this.cycle){case 3:return"年";case 2:return"月";case 1:return"日"}return null}},methods:{select:function(t,e){var i=this;this.$set(this.currentSelceted,t,e);var a=this.goodsSpecList.find((function(t){for(var e=!0,a=t.specValues.filter((function(t){return"images"!==t.specName})),n=0;n<a.length;n++)if(a[n].specValue!==i.currentSelceted[n])return void(e=!1);if(e)return t}));this.$emit("handleClickSku",{skuId:a.skuId,goodsId:this.packageDetail.goodsId})},freeBuyNow:function(){var t=this,e={packageId:this.packageDetail.id,skuId:this.selectedSku.id};this.loading1=!0,Object(c["b"])(e).then((function(e){var i=e.data;t.loading1=!1,200==i.code?(t.$message({type:"success",message:"订阅成功!"}),t.$router.push({path:"/openapi/myapi"})):t.$message({type:"error",message:i.msg})})).catch((function(){t.loading1=!1}))},buyNow:function(){var t=this,e={packageId:this.packageDetail.id,skuId:this.selectedSku.id};this.loading1=!0,Object(c["b"])(e).then((function(e){var i=e.data;if(t.loading1=!1,200==i.code){t.$message({type:"success",message:"跳转支付!"});var a=i.data.payUrl;t.payHtml=a,t.visible=!0}else t.$message({type:"error",message:i.msg})})).catch((function(){t.loading1=!1}))},formatSku:function(t){var e=this;t.openapiPackageSkus&&t.openapiPackageSkus.forEach((function(t,i){e.list.push({id:t.id,skuName:"请求次数",name:t.name,price:t.price,requestTimes:t.requestTimes,cycle:t.cycle,pid:-1})}))},messageHandle:function(t){var e=t.data;"payment-success"==e.type?(this.visible=!1,this.success(e.data)):"getHostnameCallback"==e.type&&(this.infoForm.domain=e.data)},success:function(t){this.$router.push({path:"/openapi/myapi"})}},skuClick:function(t){console.log(t)},mounted:function(){document.title=this.packageDetail&&this.packageDetail.name?this.packageDetail.name:""},unmouted:function(){window.removeEventListener("message",this.messageHandle)},created:function(){window.addEventListener("message",this.messageHandle)}},r=o,l=(i("01df"),i("2877")),u=Object(l["a"])(r,a,n,!1,null,"c2955244",null);e["default"]=u.exports},"2f34":function(t,e,i){},4135:function(t,e,i){},"4c94":function(t,e,i){},"5a6f":function(t,e,i){"use strict";i("927c")},"5d81":function(t,e,i){},"5e28":function(t,e,i){},"6cf0":function(t,e,i){"use strict";i("5e28")},7068:function(t,e,i){"use strict";i.r(e);i("7f7f");var a=function(){var t=this,e=t._self._c;return e("div",[t.list&&t.list.length?e("div",{staticClass:"sku-name"},[e("p",{directives:[{name:"show",rawName:"v-show",value:t.list[0].show,expression:"list[0].show"}]},[t._v(t._s(t.list[0].skuName))])]):t._e(),t._l(t.list,(function(i,a){return e("div",{key:a,staticClass:"value-item"},[e("p",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"item.show"}],staticClass:"button",class:{active:t.activies[i.level]&&t.activies[i.level].name==i.name},on:{click:function(e){return t.itemClick(i,a)}}},[t._v("\n          "+t._s(i.name)+"\n      ")])])})),t._l(t.list,(function(i,a){return i.children&&i.children.length?e("SkuItem",{key:a,staticClass:"item-box",class:["item-box-"+i.level],attrs:{activies:t.activies,list:i.children}}):t._e()}))],2)},n=[],s=(i("ac6a"),{name:"SkuItem",props:{list:{type:Array,default:function(){return[]}},activies:{type:Array,default:function(){return[]}}},component:{},data:function(){return{}},methods:{itemClick:function(t,e){this.itemHide(this.list),this.list.forEach((function(t){return t.show=!0})),this._itemClick(t),this.$emit("click",t)},_itemClick:function(t){var e=this;t.show=!0,this.$set(this.activies,t.level,t),this.activies.splice(t.level+1),t.children&&t.children.length>0&&t.children.forEach((function(t,i){0==i&&e._itemClick(t),t.show=!0}))},itemHide:function(t,e){var i=this;t.forEach((function(t,e){t.show=!1,t.children&&i.itemHide(t.children,t.name)}))}}}),c=s,o=(i("7604"),i("2877")),r=Object(o["a"])(c,a,n,!1,null,"435c7ae0",null);e["default"]=r.exports},7604:function(t,e,i){"use strict";i("4135")},"7cff":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return c}));var a=i("b5c6"),n=i("da71"),s=function(t,e){return Object(a["a"])({url:"".concat(n["a"],"/openapiorder/getPayedOrder"),method:"get",params:{id:t,payId:e}})};function c(t){return Object(a["a"])({url:"".concat(n["a"],"/openapiorder/save"),method:"post",data:t})}},"927c":function(t,e,i){},"9f15":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"micro"}})},n=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),c=i("34ac9"),o=i("1ca4"),r=i("27ae"),l=i("0a5a"),u=i("e223");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var p={name:"preview",props:{detail:{type:Object,default:null}},data:function(){return{app:null,docDetail:{id:null,documentName:null,type:"document",pageType:null,pairId:null,dedicatedLineBizId:null}}},watch:{detail:{handler:function(t){t&&(this.docDetail=t,this.app&&(this.app.unmount(),this.actions.offGlobalStateChange(),this.loadApp()))},deep:!0,immediate:!0}},computed:{id:function(){return this.docDetail.id},documentName:function(){return this.docDetail.documentName},pageType:function(){return this.docDetail.pageType},title:function(){return"interface"===this.pageType?"接口文档预览":"document"===this.pageType?"文档集预览":""},pairId:function(){return this.docDetail.pairId},dedicatedLineBizId:function(){return this.docDetail.dedicatedLineBizId}},methods:{loadApp:function(){var t=this;if(this.id&&Constant.document&&Constant.document.plugins&&Constant.document.plugins.openDocument){var e={pairId:this.pairId,documentId:this.id,dedicatedLineBizId:this.dedicatedLineBizId,type:this.type,headers:{Authorization:"Basic ".concat(r["Base64"].encode("".concat(o["a"].clientId,":").concat(o["a"].clientSecret))),"Blade-Auth":"bearer "+Object(l["a"])()}};this.app=Object(c["b"])(f(f({},Constant.document.plugins.openDocument),{},{container:"#micro",props:e}));var i=this.actions=Object(u["b"])(e),a=i.onGlobalStateChange;this.actions.setGlobalState(e),a((function(e){t.actions.setGlobalState(e)}))}}},mounted:function(){this.loadApp()},beforeDestroy:function(){this.app.unmount(),this.actions.offGlobalStateChange()}},h=p,m=(i("5a6f"),i("2877")),v=Object(m["a"])(h,a,n,!1,null,null,null);e["default"]=v.exports},b740:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{background:"#fff"}},[e("ShowGoods",{attrs:{detail:t.goodsMsg},on:{handleClickSku:t.targetClickSku}}),t.goodsMsg.data?e("ShowGoodsDetail",{attrs:{detail:t.goodsMsg}}):t._e(),t.takeDownSale?e("empty",{attrs:{_Title:"当前API已下架"}},[e("div",{staticClass:"sale-btn"},[e("Button",{staticClass:"mr_10",attrs:{size:"small"},on:{click:function(e){return t.target("/apishop")}}},[t._v("返回首页")])],1)]):t._e(),t.isLoading?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},n=[],s=(i("96cf"),i("3b8d")),c=(i("ac6a"),i("170d")),o=i("cedd"),r=i("f505"),l=i("ad2b"),u={name:"GoodsDetail",beforeRouteEnter:function(t,e,i){window.scrollTo(0,0),i()},created:function(){this.getGoodsDetail()},mixins:[],data:function(){return{goodsMsg:{},isLoading:!1,categoryBar:[],storeCollected:!1,storeMsg:{},takeDownSale:!1}},methods:{target:function(t){this.$router.push({path:t})},targetClickSku:function(t){},getGoodsDetail:function(t){var e=this;this.isLoading=!0;var i=this.$route.query.id;Object(l["b"])(i).then((function(t){if(e.isLoading=!1,t.data.code){t.data.data;e.goodsMsg=t.data}else e.$Message.error(t.msg),e.isLoading=!1})).catch((function(t){e.isLoading=!1,11001===t.code&&(e.takeDownSale=!0)}))},goGoodsList:function(t){var e=[];return this.categoryBar.forEach((function(i,a){a<=t&&e.push(i.id)})),location.origin+"/goodsList?categoryId="+e.toString()},collect:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},watch:{},components:{ShowGoods:c["default"],ShowGoodsDetail:r["default"],empty:o["default"]}},d=u,f=(i("6cf0"),i("2877")),p=Object(f["a"])(d,a,n,!1,null,"65a661e4",null);e["default"]=p.exports},cedd:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty"},[t._Title?e("p",[t._v(t._s(t._Title))]):t._e(),t._t("default")],2)},n=[],s=(i("c5f6"),{name:"Main",props:{_Title:{type:null,default:"暂无更多"},_Size:{type:Number,default:150}}}),c=s,o=(i("f378"),i("2877")),r=Object(o["a"])(c,a,n,!1,null,"fb368380",null);e["default"]=r.exports},cf9c:function(t,e,i){"use strict";i("4c94")},dac6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("sku-item",{ref:"itemRef",attrs:{list:t.list,activies:t.activies},on:{click:t.itemClick}})],1)},n=[],s=(i("8e6e"),i("456d"),i("bd86")),c=(i("ac6a"),i("7068"));function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={name:"sku",props:{data:{type:Array,default:function(){return[]}},activies:{type:Array,default:function(){return[]}}},components:{skuItem:c["default"]},activies:{type:Array,default:function(){return[]}},data:function(){return{list:[]}},methods:{itemClick:function(t){this.$emit("click",t)},calculationLevel:function(t){var e=0;return function t(i,a){++a,e=Math.max(a,e);for(var n=0;n<i.length;n++){var s=i[n];s.level=a,s.children&&s.children.length>0?t(s.children,a):delete s.children}}(t,0),e},formatToTree:function(t){var e=[],i=function e(i,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;t.forEach((function(t,s){if(t.pid===a){var c=r(r({},t),{},{show:!1,children:[]});0===c.pid&&(c.show=!0),c.level=n,i.push(c),e(c.children,c.id,++c.level)}}))};return i(e,0),e}},watch:{data:{handler:function(t){var e=this;this.list=this.formatToTree(t),setTimeout((function(){e.$refs.itemRef.itemClick(e.list[0])}),0)}},deep:!0,immediate:!0},mounted:function(){var t=this;this.list=this.formatToTree(this.data),setTimeout((function(){t.$refs.itemRef.itemClick(t.list[0])}),0)}},u=l,d=i("2877"),f=Object(d["a"])(u,a,n,!1,null,"46792ab2",null);e["default"]=f.exports},f378:function(t,e,i){"use strict";i("2f34")},f505:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"auto"}},[e("div",{staticClass:"item-intro-show"},[e("div",{ref:"itemIntroDetail",staticClass:"item-intro-detail"},[e("div",{staticClass:"item-intro-nav item-tabs"},[e("el-tabs",{attrs:{animated:!1},on:{"on-click":t.tabClick}},[e("el-tab-pane",{attrs:{label:"商品介绍"}},[e("div",{ref:"itemIntroGoods",staticClass:"item-intro-img"},[t.packageDetail.intro?e("div",{ref:"itemIntro",staticClass:"item-intro"}):e("div",{staticStyle:{margin:"20px"}},[t._v("暂无商品介绍")])])]),t.packageDetail.openDocSetId>0?e("el-tab-pane",{attrs:{label:"API文档"}},[e("div",{ref:"itemGoodsComment",staticClass:"remarks-container"},[e("div",{staticClass:"remarks-analyse-box"},[e("docPreview",{attrs:{detail:t.docDetail},on:{"update:detail":function(e){t.docDetail=e}}})],1),t.docDetail?t._e():e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t._v("\n                暂无API文档\n              ")])])]):t._e()],1)],1)])])])},n=[],s=(i("7f7f"),i("ff41")),c=i.n(s),o=(i("2f2f"),i("9f15")),r={name:"ShowGoodsDetail",props:{detail:{type:Object,default:null}},components:{docPreview:o["default"]},data:function(){return{packageDetail:{intro:""},commentTypeNum:{},commentTotal:0,onceFlag:!0}},computed:{},watch:{detail:{handler:function(t){t.data&&(this.packageDetail=t.data,this.docDetail={id:this.packageDetail.openDocSetId,documentName:this.packageDetail.name,pageType:"interface"})},deep:!0,immediate:!0}},methods:{renderMarkdown:function(t,e){c.a.preview(t,e,{cdn:"/cdn/vditor/3.9.6",speech:{enable:!0},anchor:1,after:function(){}})},changeHeight:function(t){},handleScroll:function(){var t=this;this.onceFlag&&(this.$nextTick((function(){t.changeHeight("itemIntroGoods")})),this.onceFlag=!1)}},mounted:function(){var t=this;this.$nextTick((function(){setTimeout(t.changeHeight("itemIntroGoods"),2e3)})),window.addEventListener("scroll",this.handleScroll);var e=this.packageDetail.intro?this.packageDetail.intro:"";this.renderMarkdown(this.$refs.itemIntro,e)}},l=r,u=(i("cf9c"),i("2877")),d=Object(u["a"])(l,a,n,!1,null,"3220d95f",null);e["default"]=d.exports}}]);